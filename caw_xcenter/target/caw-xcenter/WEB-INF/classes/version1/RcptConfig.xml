<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * CONFIDENTIAL AND PROPRIETARY SOURCE CODE. 
 * 
 * Use and distribution of this code is subject to applicable 
 * licenses and the permission of the code owner.  This notice 
 * does not indicate the actual or intended publication of 
 * this source code.
 * 
 * Portions developed for Camping World by BTM Global Consulting
 * LLC and are the property of Camping World.
 * 
 * ===== BTM Modification ===========================================
 * Req/Bug ID#       ddMMyy      Description
 * BZ22762           110817      CW - Capture Employee Sale Signature
 * BZ22850           110817      Enable store copy for receipt
 * BZ23021           240817      Store copy is only required for: Refunds, Work Order cancel and 
 *                               all employee transactions
 * BZ23113           070917      Update receipt base on business requirement capability
 * BZ23265           200917      Implement issue "Create Good Sam Visa" card function
 * BZ23458           210917      [DEV] Create a custom flow for "purchase used firearm" that is 
 *                               largely the same as the non-receipted return flow
 * BZ23544           260917      Entry method 'Chip Read' should be displayed in receipt instead of 
 *                               'keyed' when performing transaction with EMV card
 * BZ23558           270917      Receipts are missing EMV data
 * BZ23372           280917      Printing a special receipt to attach to returned items to aid disposition/restocking
 * BZ23263           250917      Implement House Account
 * BZ23542           290917      [GC] Balance Inquiry receipt displays incorrect in receipt when performing Inquiry Gift Card
 * BZ23356           011017      CWS Will Require a Printed Decline Receipt for EMV Tenders
 * BZ23559           021017      [Receipts] Gift Card Tender Exchange transaction receipt does not meet CW requirements
 * BZ23701           021017      Void Receipt is required for Credit, Debit Tender line Void.
 * BZ23356           011017      CWS Will Require a Printed Decline Receipt for EMV Tenders
 * BZ23697           041017      Decline receipt is printed for EMV- Fall back card
 * BZ23607           051017      CWS Receipts Requires Printing of Regular and Club Pricing for Items
 * BZ23800           051017      Missing EMV tag in declined receipt when performing transaction with EMV is declined
 * BZ23372           101017      [DEV] Printing a special receipt to attach to 
 *                               returned items to aid disposition/restocking
 * BZ23765           101017      Mask should be limited in receipt when performing a transaction by merchandise certificate tender
 * BZ23864           101017      CW address should be displayed below CW's logo on Declined receipt for EMV/non-EMV/GC
 * BZ23616           131017      [Xstore] Scanning and Franking Requirements for Check Tenders.
 * BZ23955           131017      Should be removed return information on return product receipt
 * BZ23949           161017      Receipt Changes Required
 * BZ24050           171017      Duplicate Cashier info on declined Credit/Debit receipt in Sale/Return transaction
 * BZ24049           171017      Missing Cashier number on Return Product receipt when return with receipt transaction.
 * BZ24064           181017      [Tenders] Add prompt to frank traveler checks.
 * BZ24041           171017      The information of check franking doesn't met the requirement of Camping World.
 * BZ24073           181017      Customer belonging to company (type =2) displays incorrectly customer info on receipt.
 * BZ24028           191017      [Xstore] Franking is printing blank for Merchant Certificate and Check Tenders
 * BZ24120           191017      Duplicate cashier number on PayIn/Payout receipt when performing pay In/pay out transaction
 * BZ24096           191017      Store#/Register/Cashier/Trans date/Time doesn't appear 
 *                               in one line horizontally in Balance Inquiry receipt
 * BZ24103           191017      PO# is printed incorrectly when performing a transaction and tender by third party
 * BZ24107           191017      Cashier info is not removed out of decline receipt when performing the sale transaction and tender by GC
 * BZ24130           201017      Looping "Frank Error" prompt when splitting "Check" and "US Travel Check"
 * BZ24132           201017      Missing Cashier number & Saleperson in Cash out receipt number when GC is declined
 * BZ24133           201017      Should be added once spacing line for Trans. in Till Summary Receipt
 * BZ24102           191017      Club accounts information is repeated many times in receipt 
 *                               when selecting 'Print Balance receipt' on Account tab in Customer screen
 * BZ24147           231017      Spacing Issue on receipt when Member ID is longer than 8 characters
 * BZ24170           231017      Missing salesperson number on Temporary shopping pass receipt
 * BZ24174           231017      GC number should be displayed in declined receipt instead of 'R' when issues/Reload GC in offline case
 * BZ24171           231017      'Picked up By' displayed 'GLOBAL SATELLITE SOLUTI' instead of 'GLOBAL SATELLITE SOLUTIONS' in receipt when performing transaction by Thirty-party tender
 * BZ24191           241017      Should be added once spacing line for Trans. in return product receipt - Register Closed - Register open ...receipt
 * BZ24255           271017      [UAT]'Trans Discount:$Off' should be displayed in receipt instead of 'Trans Discount:$Of' when doing a trans level discount $ amount or % amount
 * BZ24363           061117      "Return Price" displays incorrectly price when selling item has quantity > 1
 * BZ24383           091117      "Auto-Renew" term should be printed on receipt when choosing "Auto-renew membership sold"
 * BZ24429           101117      Receipt Change - Please Add Expiration Date to Receipt
 * BZ24428           101117      Receipt Change - Please Remove "Welcome to our Store"
 * BZ24462           101317      Should be removed group price for item non-physical in receipt
 * BZ24541           171117      [UAT][Receipt] Return Price on receipt needs to match the Amount (Extended Price) column
 * BZ24539           171117      Disable Warranty Receipt in POS
 * BZ24531           171117      Receipt needs to show transaction type
 * BZ24350           201117      Receipts need to print Tax code summary
 * BZ24599           241117      Tax code summary should be displayed in receipt event though tax amount is 0.00.
 * BZ24603           271117      Tax group id 'NT' and 'T01' displayed in receipt when adding exempt tax for item in transaction.
 * BZ24564           281117      Need to Print Coupon Code on Receipt
 * BZ23607           011217      CWS Receipts Requires Printing of Regular and Club Pricing for Items.
 * BZ24657           011217      "You could have saved..." receipts changes
 * BZ24745           081217      CWS Requires The Receipt to Display Gross Amount When Merch Cert Applied
 * BZ24816           121217      Return policy change on sales receipts
 * BZ25188           240118      [Xstore] Remove CLUB PRICING on receipts if no customer is attached to transaction
 * BZ25640           052518      New Requirement - Used Firearm System Process Redesign
 * BZ26270           060418      New Requirement - Display UPC on both Xstore screens and on receipts
 * BZ25958           100718      New Requirement - Remove Gift Card transactions from the Pin Pad
 * BZ26847           160718      [1.6.0][25958] Reload/Issue Gift card info prints on receipt incorrectly
 * BZ26849           160718      [1.6.0][25958] Changes to Balance Inquiry receipt for Gift Card.
 * BZ26289           240718      New Requirement - Enable A/R Payment Functionality in Xstore
 * BZ26207           190718      New Requirement - Enable Work Order Functionality
 * BZ26963           310718      Missing Serialize number each line item on receipt after complete sale transaction
 * BZ26629           310718      [New Requirement] Add a prompt to capture discount code when the Retail Coupon discount reason is selected
 * BZ27026           030818      [1.6.3][Internal]Store Copy of Work Order Deposit receipt says "HOUSE ACCOUNT PAYMENT" incorrectly
 * BZ26978           060818      Gift Card Receipt not printing for activation/reload
 * BZ27058           070818      Deposit/Payment Amount is not printing on Work Order Deposit Customer Copy
 * BZ27057           070818      Tender information is missing on Customer Copy of Work Order Deposit transaction
 * BZ27182           140818      Gift Card Receipt Title Not Appearing 
 * BZ27163           140818      WO Email receipt shows the incorrect header for Work Order Deposit or Refund
 * BZ27256           220818      Extend price doesn't show on WO refund UI as well as receipt.
 * BZ27288           220818      [1.6.11] WO Refund shows the incorrect Original Deposit Amount on the receipt
 * BZ26893           270918      [Xstore] Transaction Receipt Changes
 * BZ27915           011118      [Internal] WORK ORDER COMPLETE receipt does not display orig tran info for returned item
 * BZ28106           051118      [Internal][26893] Selected discount type does not present on receipt when applying any discount types except retail coupon into a transaction.
 * BZ28107           051118      [26893] 'Club Price' text for member should be displayed in receipt instead of 'Your Price' text.
 * BZ27937           071118      [26893/27346] Customer Card Number not on correct line in the receipt
 * BZ28108           071118      [Internal] Sold Item Count does not print on WORK ORDER COMPLETE Receipts for work order only items.
 * BZ28201           121118      [New Requirement] Additional Item Prompts and attributes for 500 item needs to print on transaction receipts.
 * BZ28361           201118      [2.9.4] Sales receipts with a discount are displaying the return price as the regular price.
 * BZ28488           031218      [2.9.5] Need to remove the extra rows that separate each item on the transaction receipts when multiple items are sold/returned.
 * BZ28489           071218      [2.9.5] Need to re-arrange the EMV Trace Data on transaction receipts.
 * BZ28664           141218      [2.9.4] Sales Receipts for Work Orders Printing Extra lines.
 * BZ28688           201218      [2.9.4] Club Price appears on expired club member return receipts.
 * BZ28767           241218      [2.9.7] Work Order Receipts for GSC Members do not have "Club Price".
 * BZ28915           020119      [Internal] Missing Cashier and Transaction number on Balance Inquiry receipt.
 * BZ28942           300119      [Internal] Credit card name displays inconsistent on shopping Pass receipt and Xstore screen
 * BZ29292           140219      [Internal] Need to fix the text on the PLCC Shopping Pass to match ADS Requirements
 * BZ29361           150219      [Requirement] PLCC Acquisition - Changes to Temporary Shopping Pass
 * BZ29388           150219      [Internal] PLCC - Only 1 receipt prints when making a payment
 * BZ29478           210219      [EXTERNAL] PLCC Acquisition Changes from Client
 * BZ29476           210219      [Internal] GS Account Payment is prompting signature on PinPad.
 * BZ29454           220219      [Internal] Temporary Shopping Pass is missing Temporary Limit amount.
 * BZ29619           040319      [Internal][PLCC] Shopping Pass Changes
 * BZ29717           130319      [EXTERNAL] 4.0.2 Shopping Pass Changes
 * BZ29625           080419      [New Requirement] - Auto-Renewal Item Specific Receipts
 * BZ30085           080419      [Internal] Review xstore log for 4.0
 * BZ30383           260419      [NEW REQUIREMENT] Add the 3rd party payerâ€™s account number to the receipts
 * BZ30153           130619      [New Requirement] Xstore allow to add the sale associate to line items and submit the certain sale associate for each line items to Order Service
 * BZ31357           170619      [INTERNAL] The sale association of trans is missing in receipt
 * BZ30154           210619      [New Requirement] Xstore capture the Work Order line items' sale associate from S&I and forward it to Order Service as part of item attribute
 * BZ31522           250619      [Port BZ31010 to 5.0][Xstore] Deals are being calculated into "You have saved..." for Club Members
 * BZ31772           050719      [INTERNAL] The xstore printed the blank space when applying tax exemption
 * BZ32067           230719      [Port 32063 to 5.0] [Prod] Add Marcus message to the customer copy receipts
 * BZ30085           300719      [Internal] Review xstore log for 4.0
 * BZ32830           040919      [INTERNAL] The receipt printed double the regular price of item
 * BZ33315           101019      [New Requirement] Custom message on the Receipt
 * BZ34116           111219      [PROD] Bounce Back coupon verbiage changes (continuation of 33981 and 34030)
 * BZ33655           120419      [INTERNAL] Xstore log show the Error Exception
 * BZ32519           120419      [INTERNAL] the Error displayed in Xstore log while I creating the house account payment
 * BZ30259           120220      [New Requirement] Customer Specific Messages on Receipts 
 * BZ36863           280720      [PROD] Duplicate receipts for all returns/exchanges
 * BZ37202           180820      [TASK] Modify Order receipts to matches Camping World's current templates and rules 
 * BZ37382           270820      Signature capturing for Order Creation/Pickup transaction
 * BZ37585           010920      [Internal] - The Regular price line on receipts Order transaction display incorrectly
 * BZ37621           070920      [Internal] Receipt messages on the "Order Copy" of Emailed receipt does not match Camping World	
 * BZ37709           080920      [Internal] Removing the customer's signature line on Store Copy receipt of Create Order transaction
 * BZ37954           180920      [Internal] - Changing Barcode on Order Customer Copy receipt to Barcode of transaction
 * BZ38029           220920      [Requirement] Remove the "Thank you for using us for all your ordering needs." text from receipt header 
 * BZ38070           240920      UPC needs to print on Order Transaction Receipts per existing CW Functionality
 * BZ38010           240920      [Task] Order Pick Slip Changes
 * BZ38075           300920      [Internal] - The Qty column and pricing title on receipt for Club member display incorrectly on Order Pick Slip
 * BZ37992           300920      Proposed modification for disable extra customer copy & store copy Return of printed receipts for Order Cancel
 * BZ38077           300920      [Internal] Pickup Order - Need to remove the base message on the Order Store Copy receipt
 * BZ37876           051020      [Internal] Warn/Error statement always appears into Xstore log each hit print receipt of the order transaction
 * BZ38347           081020      [Internal] - The Pick Slip receipt is printed Incorrectly with an item No UPC 
 * BZ38355           121020      [Internal] Pickup Order - The receipts are printed incorrectly when executing Pickup partial Order
 * BZ33319           260221      Good Sam Visa Promo Plan - Phase 2/Deferred Financing
 * BZ45487           090821      [PROD] Verify Auto-renew receipt messages
 * BZ46879           221021      Xstore Patch 16 Receipt Issues
 * BZ42307           221121      [Requirement] Add ability to reject at the item level for BOPIS
 * BZ48178           170122      Patch 16 - Pick slip Qty is not lined up with header on receipt
 * BZ59418           181023      Free Tier Opt In Loyalty SKU customization
 *===================================================================
 */ 
-->
<ReceiptDefinitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="RcptConfig.xsd">

  <FormatterMap>
    <Formatter name="DateMediumShortYear" class="dtv.pos.i18n.format.DateFormatter" ctx="RECEIPT" formatterType="DateMediumShortYear" /> <!-- BZ26893 -->
    <Formatter name="DateExpirationShort" class="dtv.pos.i18n.format.DateFormatter" ctx="RECEIPT" formatterType="DateExpirationShort" /> <!-- BZ27937 -->
    <!-- BEGIN BZ29292 -->
    <Formatter name="InputTimeShort" class="dtv.pos.i18n.format.DateFormatter" ctx="RECEIPT" formatterType="InputTimeShort" />
    <!-- END BZ29292 -->
  </FormatterMap>
  <ReceiptCopyRules>
  <!-- BEGIN BZ22850 -->
  <!-- BEGIN 23021 -->
    <ReceiptCopyRule name="STORE_COPY_EMP_TRANSACTION" document="STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.EmpSaleRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.EnabledForSuspendedTransactionRule" />
    </ReceiptCopyRule>
   <!-- BEGIN 23021 -->
   <!-- END BZ22850 -->
   
    <ReceiptCopyRule name="WORK_ORDER_MAIN_STORE" document="WORK_ORDER_MAIN_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="WORK_ORDER" />
    </ReceiptCopyRule>
    
    <ReceiptCopyRule name="SP_ORDER_MAIN_STORE" document="SP_ORDER_MAIN_STORE">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawAlwaysNotSatisfiedRule" />
    </ReceiptCopyRule>
    
    <ReceiptCopyRule name="PRESALE_ACCOUNT_MAIN_STORE" document="PRESALE_ACCOUNT_MAIN_STORE">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawAlwaysNotSatisfiedRule" />
    </ReceiptCopyRule>
    
    <ReceiptCopyRule name="ONHOLD_ACCOUNT_MAIN_STORE" document="ONHOLD_ACCOUNT_MAIN_STORE">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawAlwaysNotSatisfiedRule" />
    </ReceiptCopyRule>
    
    <ReceiptCopyRule name="SEND_SALE_MAIN_STORE" document="SEND_SALE_MAIN_STORE">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawAlwaysNotSatisfiedRule" />
    </ReceiptCopyRule>
    
    <ReceiptCopyRule name="LAYAWAY_MAIN_STORE" document="LAYAWAY_MAIN_STORE">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawAlwaysNotSatisfiedRule" />
    </ReceiptCopyRule>
    
    <ReceiptCopyRule name="SERIAL_EXCHANGE_STORE" document="SERIAL_EXCHANGE_STORE">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawAlwaysNotSatisfiedRule" />
    </ReceiptCopyRule>
    
    <ReceiptCopyRule name="CAW_SHOPPING_PASS" document="CAW_SHOPPING_PASS">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawShoppingPassRule" />
    </ReceiptCopyRule>
    
    <!-- Begin BZ-23372 -->
    <ReceiptCopyRule name="CAW_RETURN_SPECIAL" document="CAW_RETURN_SPECIAL">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawDisableRcptForAccountRule" type="WORK_ORDER" /> <!--BZ26207  work order session -->
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawReturnSpecialReceiptRule" />
    </ReceiptCopyRule>
    <!-- End BZ-23372 -->
    
    <!-- Begin BZ23356 -->
    <ReceiptCopyRule name="CAW_EMV_DECLINED" document="CAW_EMV_DECLINED">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawEmvDeclineRule" />
    </ReceiptCopyRule>
    <!-- End BZ23356 -->
    
    <ReceiptCopyRule name="CAW_GIFT_CARD_DECLINED" document="CAW_GIFT_CARD_DECLINED">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawGiftCardDeclineRule" />
    </ReceiptCopyRule>
    
      <!-- BZ24096 -->
     <ReceiptCopyRule name="SYSTEM_CYCLE" document="CAW_SYSTEM_CYCLE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.OpenCloseRule" />
    </ReceiptCopyRule>
    <!-- Begin BZ24539 -->
    <ReceiptCopyRule name="WARRANTY_RECEIPT" document="WARRANTY_RECEIPT">
      <Rule class="dtv.pos.warranty.conditions.AnyWarrantiesRcptCopyRule" type="WARRANTY" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawNoPrintWarrantyTransactionRule" />
    </ReceiptCopyRule>
    <!-- End BZ24539 -->
    <!-- Begin BZ25640 -->
    <ReceiptCopyRule name="CAW_RCPT_PAID_OUT_UFA_RULE" document="CAW_RCPT_PAID_OUT_UFA_DOC">
      <Rule class="caw.pos.register.ufa.rcpt.CawRcptUFATransTypeRule" type="PAID_OUT" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="PAID_OUT" document="PAID_OUT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TenderControlTransTypeRule" type="PAID_OUT" />
      <Rule class="caw.pos.register.ufa.rcpt.CawRcptUFATransNoTypeRule" type="PAID_OUT" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <!-- End BZ25640 -->
    <!-- BZ26289 start -->

    <ReceiptCopyRule name="RETAIL_SALE" document="CUSTOMER">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawDisableRcptForAccountRule" type="WORK_ORDER" /> <!--BZ26207  work order session -->
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="RETAIL_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.EnabledForSuspendedTransactionRule" />
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawRcptHouseAccountPaymentRule" inverted="true" />
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawRcptAccountPaymentRule" inverted="true"/><!-- BZ29388 -->
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawDisableOrderRule" /><!-- BZ37884 -->
    </ReceiptCopyRule>
    
    <ReceiptCopyRule name="CAW_HA_PAYMENT_CUSTOMER_RULE" document="HOUSE_ACCOUNT_PAYMENT_CUSTOMER">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="RETAIL_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.EnabledForSuspendedTransactionRule" />
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawRcptHouseAccountPaymentRule" />
    </ReceiptCopyRule>
    
    <ReceiptCopyRule name="CAW_HA_PAYMENT_STORE_RULE" document="HOUSE_ACCOUNT_PAYMENT_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="RETAIL_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.EnabledForSuspendedTransactionRule" />
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawRcptHouseAccountPaymentRule" />
    </ReceiptCopyRule>
    <!-- BZ26289 end -->
    <!-- BEGIN BZ29388 -->
    <ReceiptCopyRule name="CAW_ACCOUNT_PAYMENT_CUSTOMER_RULE" document="CAW_ACCOUNT_PAYMENT_CUSTOMER">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="RETAIL_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawRcptAccountPaymentRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="CAW_ACCOUNT_PAYMENT_STORE_RULE" document="CAW_ACCOUNT_PAYMENT_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="RETAIL_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawRcptAccountPaymentRule" />
    </ReceiptCopyRule>
    <!-- END BZ29388 -->
    <ReceiptCopyRule name="REFUND" document="STORE">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawDisableRcptForAccountRule" type="WORK_ORDER" /> <!--BZ26207  work order session -->
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawRefundRule" /> <!-- BZ36863 -->
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawDisableOrderRule" /><!-- BZ37992 -->
    </ReceiptCopyRule>
    <!-- Begin BZ27026 -->
    <ReceiptCopyRule name="CUST_SIGN" document="STORE">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawDisableRcptForAccountRule" type="WORK_ORDER" /> <!--BZ26026 -->
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustSignRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
    </ReceiptCopyRule>
    <!-- End BZ27026 -->

    <!-- Begin BZ26978 -->
    <ReceiptCopyRule name="CAW_GIFT_CARD_ACTIVE_RELOAD_RULE" document="CAW_GIFT_CARD_ACTIVE_RELOAD">
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawBalanceReloadActiveReceiptRule" /> 
    </ReceiptCopyRule>
    <!-- End BZ26978 -->
    
    <!--BEGIN BZ37884 -->
    <ReceiptCopyRule name="ORDER_MAIN_STORE" document="ORDER_MAIN_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.IsInstanceCopyRule" value="dtv.pos.order.OrderReceiptSource" /> 
      <Rule class="caw.pos.hardware.rcptbuilding.copyrules.CawDisableOrderRule" />
    </ReceiptCopyRule>
    <!--END BZ37884 -->
  </ReceiptCopyRules>

  <receipts>
    <receipt document="CAW_GIFT_CARD_ACTIVE_RELOAD" sectionref="caw_gift_card_active_reload_section" /><!-- BZ26978 -->
    <receipt document="HOUSE_ACCOUNT_PAYMENT_CUSTOMER" sectionref="House_Account_Customer" email="true" /><!-- BZ26289 -->
    <receipt document="HOUSE_ACCOUNT_PAYMENT_STORE" sectionref="House_Account_Store" /><!-- BZ26289 -->
    <receipt document="CAW_SHOPPING_PASS" sectionref="CawShoppingPass" />
     <!-- BZ24096 -->
    <receipt document="CAW_SYSTEM_CYCLE" sectionref="CAW_SYSTEM_CYCLE" />
    <!-- BEGIN BZ29388 -->
    <receipt document="CAW_ACCOUNT_PAYMENT_CUSTOMER" sectionref="Caw_Account_Payment_Customer" email="true" />
    <receipt document="CAW_ACCOUNT_PAYMENT_STORE" sectionref="Caw_Account_Payment_Store" />
    <!-- END BZ29388 -->
  </receipts>
  <!-- Begin BZ23356 -->
  <receipts>
    <receipt document="CAW_EMV_DECLINED" sectionref="CawEmvDeclined" />
  </receipts>
  <!-- End BZ23356 -->
  
  <!-- Begin BZ23372 -->
  <receipts>
    <receipt document="CAW_RETURN_SPECIAL" sectionref="CawReturnListSpecialReceipt" />
  </receipts>
  <!-- End BZ23372 -->
  
  <receipts>
    <receipt document="CAW_GIFT_CARD_DECLINED" sectionref="CawGiftCardDeclinedReceipt" />
  </receipts>
  <!-- Begin BZ25640 -->
  <receipts>
    <receipt document="CAW_RCPT_PAID_OUT_UFA_DOC" sectionref="CAW_RCPT_PAID_OUT_UFA_SEC" />
  </receipts>
  <!-- End BZ25640 -->

  <sections>
    <section name="StoreCopy">
      <sectionref>header</sectionref>
      <sectionref>STORE_COPY_HEADER_DB</sectionref>
      <!-- <sectionref>tenderExchangeLabel</sectionref> --> <!-- BZ28688 -->
      <sectionref>items</sectionref>
      <sectionref>subTotals</sectionref>
      <sectionref>tax_code_summary</sectionref>
      <sectionref>totals</sectionref>
      <sectionref>storecopy_tenders</sectionref>
      <sectionref>change</sectionref>
      <sectionref>TaxExemptInfo</sectionref>
      <sectionref>TaxExemptSignature</sectionref>
      <sectionref>account_receivable_terms</sectionref>
      <sectionref>footer</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>STORE_COPY_FOOTER_DB</sectionref>
      <!-- BEGIN BZ22762 -->
      <sectionref>emp_sale_signature_line</sectionref>
      <!-- END BZ22762 -->
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    
    <!-- BEGIN BZ22762 -->
    <!-- Printout the line to capture employee signature for all transactions in only Store Copy receipt -->
    <section name="emp_sale_signature_line">
      <condition class="dtv.pos.docbuilding.conditions.EmployeeSaleCondition"/>
      <horizontal_rule style="Strong">
        <field text="_employeesignature" />
      </horizontal_rule>
    </section>
    <!-- END BZ22762 -->
    
    <!-- Begin BZ24383, BZ45487 -->
    <!-- <section name="AUTO_RENEWAL">
      <condition class="caw.pos.common.rcpt.CawAutoRenewalMsgCondition" />
      <row></row>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <region align="C">
            <field text="_autoRenewalRcpt" />
      </region>
      <row />
    </section> -->
    <!-- End BZ24383, BZ45487 -->
    
    <!-- Begin BZ-23113 -->
    <section name="CawYouSavedMessage">
      <!--<condition class="dtv.pos.common.rcpt.TotalAmountSavedMsgCondition" />--> <!--BZ 24816 change-->
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
        <sectionref>caw_marketing_mess</sectionref> <!-- BZ33315 -->
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    
    <!-- Begin BZ-37876 -->
    <section name="CawYouSavedMessageOrder">
      <!--<condition class="dtv.pos.common.rcpt.TotalAmountSavedMsgCondition" />--> <!--BZ 24816 change-->
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
        <sectionref>caw_marketing_mess_order</sectionref> <!-- BZ33315 -->
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    <!-- End BZ-37876 -->

    <!-- BEGIN BZ33655 -->
    <section name="CawYouSavedMessageWo">
      <!--<condition class="dtv.pos.common.rcpt.TotalAmountSavedMsgCondition" />--> <!--BZ 24816 change-->
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <sectionref>caw_marketing_mess_wo</sectionref> <!-- BZ33315 -->
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    <!-- END BZ33655 -->
    
    <section name="SALE_DISCLAIMER_DB">
    <sectionref>caw_return_policy</sectionref> <!--  BZ33315 -->
      <sectionref>CawYouSavedMessage</sectionref>
      <!-- BEGIN BZ29625 -->
      <sectionref>CawItemMessage</sectionref>
      <!-- END BZ29625 -->
      <!-- BEGIN BZ30259 -->
      <sectionref>CawCustomerMessage</sectionref>
      <!-- END BZ30259 -->
    </section>
    
    <!-- Begin BZ-37876 -->
    <section name="SALE_DISCLAIMER_DB_ORDER">
      <sectionref>caw_return_policy_order</sectionref> <!--  BZ33315 -->
      <sectionref>CawYouSavedMessageOrder</sectionref>
      <!-- BEGIN BZ29625 -->
      <sectionref>CawItemMessage</sectionref>
      <!-- END BZ29625 -->
      <!-- BEGIN BZ30259 -->
      <sectionref>CawCustomerMessage</sectionref>
      <!-- END BZ30259 -->
    </section>
    <!-- End BZ-37876 -->

    <!-- BEGIN BZ33655 -->
    <section name="SALE_DISCLAIMER_DB_WO">
      <sectionref>caw_return_policy_wo</sectionref> <!--  BZ33315 -->
      <sectionref>CawYouSavedMessageWo</sectionref>
      <!-- BEGIN BZ29625 -->
      <sectionref>CawItemMessage</sectionref>
      <!-- END BZ29625 -->
      <!-- BEGIN BZ30259 -->
      <sectionref>CawCustomerMessage</sectionref>
      <!-- END BZ30259 -->
    </section>
    <!-- END BZ33655 -->

    <!-- BEGIN BZ29625 -->
    <section name="CawItemMessage">
        <condition class="caw.pos.common.rcpt.CawItemMessageCondition" />
        <region align="C">
            <field>
            <aggregate class="caw.pos.common.rcpt.CawItemMessageDocBuilderField"/>
        </field>
          </region>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    <!-- END BZ29625 -->

    <!-- BEGIN BZ30259 -->
    <section name="CawCustomerMessage">
        <condition class="caw.pos.common.rcpt.CawCustomerMessageCondition" />
        <region align="C">
            <field>
            <aggregate class="caw.pos.common.rcpt.CawCustomerMessageDocBuilderField"/>
        </field>
          </region>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    <!-- END BZ30259 -->

    <section name="footer_cust_copy">
      <sectionref>soldItemsCount</sectionref>
      <sectionref>returnedItemsCount</sectionref>
      <sectionref>LOCAL.ITEMS_COUNT</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>trans_barcode</sectionref>
    </section>
    
    <section name="CustomerCopy">
      <sectionref>header</sectionref>
      <!-- <sectionref>CUST_COPY_HEADER_DB</sectionref> --> <!-- BZ24428 -->
      <sectionref>COUNTRYPACK.SUSPEND_NONFISCAL</sectionref>
      <sectionref>items</sectionref>
      <sectionref>subTotals</sectionref>
      <sectionref>tax_code_summary</sectionref>
      <sectionref>totals</sectionref>
      <sectionref>tenders</sectionref>
      <sectionref>change</sectionref>
      <sectionref>YouSavedMessage</sectionref>
      <sectionref>YouCouldSavedMessage</sectionref>
      <sectionref>TaxExemptInfo</sectionref>
      <sectionref>SALE_DISCLAIMER_DB</sectionref>
      <sectionref>DONATION_FOOTER_MESSAGE</sectionref>
      <sectionref>verbiageGiftCardRedeem</sectionref><!-- BZ 23559 -->
      <sectionref>marcus_quote</sectionref> <!-- BZ32067 -->
      <sectionref>footer_cust_copy</sectionref>
      <!-- <sectionref>AUTO_RENEWAL</sectionref> --> <!-- BZ24383, BZ45487 -->
      <sectionref>system_mode</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>LOCAL.CUST_COPY_FOOTER</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <!-- End BZ-23113 -->
    
    <!-- Begin BZ23949 -->
    <section name="header">
      <sectionref>headerTop</sectionref>
      <row /> <!-- BZ26893 -->
      <sectionref>transaction_type</sectionref> <!-- BZ24531 -->
      <sectionref>CUSTOMER_INFO</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>return_header</sectionref>
    </section>
    <!-- RETURN HEADER SECTION -->
    <section name="return_header">
      <condition class="dtv.pos.docbuilding.conditions.AnySaleLineItemTypeExistsCondition" value="RETURN" />
    </section>
    <section name="headerTop">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location</sectionref>
      <horizontal_rule />
      <sectionref>LOCAL.HEADER_TOP</sectionref>
      <sectionref>transaction_header_info</sectionref>
      <sectionref>SALES_PERSON_INFO</sectionref>
      <sectionref>transaction_flight_information</sectionref>
    </section>
    <!-- Begin BZ24531 -->
    <section name="transaction_type">
      <row align="C">
        <field style="BOLD" >
          <aggregate class="caw.pos.common.rcpt.CawTransTypeBuilderField" />
        </field>
      </row>
      <!-- BZ26289 start -->
      <sectionref>ha_print_empty_row</sectionref>
      <!-- BZ26289 end -->
    </section>
    <section name="STORE_COPY_HEADER_DB" dbRef="STORE_COPY_HEADER::DEFAULT::getTransactionDate">
    <!-- <row /> --> <!-- BZ26893 -->
    </section>
    <!-- End BZ24531 -->
    <!-- BEGIN BZ30085 -->
    <section name="CAW_STORE_COPY_HEADER_DB" dbRef="STORE_COPY_HEADER::DEFAULT::getCurrentTransaction.getTransactionDate">
    </section>
    <!-- END BZ30085 -->
    <section name="transaction_header_info">
      <sectionref>transaction_header_info_detail_1</sectionref><!-- BZ 24174 -->
      <sectionref>transaction_header_info_detail_2</sectionref><!-- BZ 24174 -->
    </section>
    
    <section name="transaction_header_info_detail_1">
        <condition method="getOperatorParty.getEmployeeId" comparison="NOT_NULL" />
        <row>
        <field text="_str" />
        <field text="_reg" align="L" loc="6" />
        <field text="_csi" align="L" loc="11" />
        <field text="_tkt" align="L" loc="19" />
       <field text="_datetime" align="L" loc="27" /><!-- BZ24191 -->
      </row>
      <row>
        <field method="getRetailLocationId" />
        <field method="getWorkstationId" align="L" loc="6" />
        <field method="getOperatorParty.getEmployeeId" align="L" loc="11" />
        <field method="getTransactionSequence" align="L" loc="19" />
        <field align="L" loc="27"><!-- BZ24191 -->
          <aggregate class="caw.pos.common.rcpt.CawDateTimeDocBuilderField" />
        </field>
      </row>
    </section>
    
     <!-- Begin BZ26893 -->
     <section name="PaidOut">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.tsn.ITenderControlTransaction" />
      <sectionref>till_header</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row>
        <field text="_tillColon" />
        <sp />
        <field method="getOutboundSession.getTenderRepositoryId" />
      </row>
      <horizontal_rule style="Strong" />
      <row>
        <field text="_paidOut" />
      </row>
      <row>
        <field text="_code" />
        <sp />
        <field method="getReasonCode" />
      </row>
      <row>
        <field method="getReasonCodeObject.getDescription" />
      </row>
      <iterator method="getTransactionNotes">
        <row>
          <field text="_comments" />
        </row>
        <region left_margin="2" right_margin="2">
          <field method="getNote" />
        </region>
      </iterator>
      <horizontal_rule style="Strong" />
      <row>
        <field text="_paidOutAmount" />
        <field method="getAmount" formatter="Money" loc="-5" />
      </row>
      <row n="2" /> 
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_employeesignature" />
      </row>
      <!-- Begin BZ26893 -->
      <row n="2" /> 
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_caw_managersignature" />
      </row>
      <!-- End BZ26893 -->
      <row n="2" /> 
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_payeesignature" />
      </row>
      <!-- <horizontal_rule style="Double"/> --> <!-- BZ26893 -->
      <row />
      <sectionref>footer</sectionref>
      <sectionref>transaction_disclaimers</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <!-- End BZ26893 -->
    <section name="reasoncode_comment" >
      <condition method="getTransactionNotes" comparison="NOT_NULL" />
      <iterator method="getTransactionNotes">
        <region left_margin="2" right_margin="2">
          <field method="getNote" />
        </region>
      </iterator>
    </section>
    
    
    <section name="transaction_header_info_detail_2">
        <condition method="getOperatorParty.getEmployeeId" comparison="IS_NULL" />
        <row>
        <field text="_str" />
        <field text="_reg" align="L" loc="6" />
        <field text="_csi" align="L" loc="11" />
        <field text="_tkt" align="L" loc="19" />
        <field text="_datetime" align="L" loc="27" /><!-- BZ24191 -->
      </row>
      <row>
        <field method="getRetailLocationId" />
        <field method="getWorkstationId" align="L" loc="6" />
        <field method="getEmployeeId" align="L" loc="11" /><!-- BZ 24132 -->
        <field method="getTransactionSequence" align="L" loc="19" />
        <field align="L" loc="27"><!-- BZ24191 -->
          <aggregate class="caw.pos.common.rcpt.CawDateTimeDocBuilderField" />
        </field>
      </row>
      <row />
    </section>
    
   <section name="SALES_PERSON_INFO">
      <!-- Begin BZ31357 -->
      <region >
        <!-- <field text="_salesperson" />
        <sp /> -->
        <field>
          <aggregate class="caw.pos.common.rcpt.CawTranSalespersonBuilderField" />
        </field>
      </region>
      <!-- Begin BZ31357 -->
    </section>
    <section name="CUSTOMER_INFO">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <sectionref>CUSTOMER_DETAILS</sectionref>
      <sectionref>LOYALTY_INFO</sectionref>
    </section>
    <!-- BZ24073 -->
    <section name="CUSTOMER_DETAILS">
      <condition method="getCustomerParty" comparison="NOT_NULL" />
      <row>
        <field method="getCustomerParty" formatter="BasicName" />
      </row>
    </section>
    <section name="LOYALTY_INFO">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <condition class="caw.pos.common.rcpt.CawMembershipRcptCondition" />
      <iterator method="getLoyaltyCardObject.getLoyaltyAccounts">
        <!-- Begin BZ24429 , BZ26893 -->
        <row>
          <field>
            <aggregate class="caw.pos.common.rcpt.CawMembershipNameDocBuilderField" />
          </field>
           <sp />
          <field method="getAccountId" align="L" loc="14" />
          <sp />
          <field method="getExpirationDate" align="L" loc="28" formatter="DateExpirationShort"/> <!-- BZ27937 -->
           <sp />
          <field>
            <aggregate class="caw.pos.common.rcpt.CawMembershipStatusDocBuilderField" />
          </field>
        </row>
        <!-- End BZ24429 , BZ26893 -->
      </iterator>
      <row /> <!-- BZ26893 -->
    </section>
    
    <!-- Begin BZ26893, copied and corrected -->
    <section name="item_header">
     <row style="STRONGUNDERLINE">
        <field text="_item" />
        <field text="_caw_qty" align="R" loc="29" />
        <field align="R" >
          <aggregate class="caw.pos.common.rcpt.CawItemHeaderBuilderField" /> <!-- BZ28107 -->
        </field>
      </row>
      <sectionref>item_details</sectionref>
    </section>
    <!-- End BZ26893-->
    <!-- End BZ23949 -->
   
    <!-- Begin BZ-23265 -->
    <section name="CawShoppingPass">
      <!-- BEGIN BZ29292 -->
      <sectionref>HeaderTop_ShoppingPass</sectionref> <!-- BZ23864 -->
      <row />
      <sectionref>caw_congratulations_shopping_pass</sectionref>
      <row />
      <sectionref>caw_sale_person_shopping_pass</sectionref>
      <sectionref>caw_summary_shopping_pass</sectionref><!-- BZ29361 -->
      <row />
      <sectionref>caw_footer_date_shopping_pass</sectionref>
      <!-- END BZ29292 -->
      <sectionref>page_break</sectionref>
    </section>
    <!-- End BZ-23265 -->
    
    <!-- Begin BZ-23458 -->
    <section name="return_reason_code">
      <condition class="dtv.pos.docbuilding.conditions.SaleLineItemTypeCondition" value="RETURN" />
      <row>
        <field method="getReasonCodeObject.getDescription" />
      </row>
      
      <region>
        <condition class="caw.pos.docbuilding.returns.CawPurchaseUsedFirearmCondition" />
        <field>
          <aggregate class="caw.pos.docbuilding.returns.CawPurchaseUsedFirearmDocBuilderTextField" />
        </field>
      </region>
    </section>
    <!-- End BZ-23458 -->
    <!-- Begin BZ23544 -->
    <section name="creditcard_tender">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.ttr.ICreditDebitTenderLineItem" />
      <sectionref>creditcard_detail_customer</sectionref>
      <row /> <!-- BZ26893 -->
      <sectionref>EMVData_general_info</sectionref>
      <sectionref>EMVData_Declined_Info</sectionref>
      <row /> <!-- BZ26893 -->
    </section>
    
    <section name="storecopy_creditcard_tender">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.ttr.ICreditDebitTenderLineItem" />
      <sectionref>creditcard_detail</sectionref>
      <row /> <!-- BZ26893 -->
      <sectionref>EMVData_general_info</sectionref>
      <sectionref>EMVData_Declined_Info</sectionref>
      <row /> <!-- BZ26893 -->
    </section>
    
    <!-- Begin BZ26893 -->
    <section name="credit_card_terms_for_signature">
      <condition class="dtv.pos.docbuilding.conditions.IncludeTenderTypeCondition" type="CREDIT_CARD" />
      <condition method="getSignature.getSignature" comparison="NOT_NULL" /> <!-- BZ28664 -->
       <sectionref>TENDER_CREDIT_TERMS_DB</sectionref> <!-- BZ28664 -->
      </section>
    <!-- End BZ26893 -->

    <section name="creditcard_detail_customer">
      <condition class="dtv.pos.docbuilding.conditions.TenderIdCondition" tenderId="ROOM_CHARGE" inverted="true" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <field method="getMaskAccountNumberDao" loc="5" />
      </row>
      <!-- Begin BZ26893 -->
      <row>
        <condition method="getParentTransaction.getPostVoid" comparison="TRUE" />
        <field text="_authnbr" />
        <sp />
        <field method="getAuthorizationCode" />
        <sp n="2"/>
        <field text="_caw_authTime" />
        <sp />
        <field formatter="TimeShort">
          <aggregate class="dtv.pos.common.rcpt.PostVoidAuthTimeDocBuilderField" />
        </field>
      </row>
      <row>
        <condition method="getParentTransaction.getPostVoid" comparison="FALSE" />
        <field text="_authnbr" loc="5" />
        <sp />
        <field method="getAuthorizationCode" />
        <sp n="2"/>
        <field text="_caw_authTime" />
        <sp />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawAuthTimeDocBuilderField" />
        </field>
      </row>
      <!-- End BZ26893 -->
      <row>
        <field text="_transType" loc="5" />
        <sp />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawRcptTransactionTypeDocBuilderField" />
        </field>
      </row>
      <row>
        <field text="_entryMethod" loc="5" />
        <sp />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawTenderEntryMethodDocBuilderField" />
        </field>
      </row>
      <row>
        <condition class="caw.pos.common.rcpt.CawEMVVerificationDataCondition" />
        <field text="_verification" loc="5" />
        <sp />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawEMVVerificationMethodDocBuilderField" />
        </field>
      </row>
      <row>
        <condition method="getStringProperty" method_param="REPORTED_BALANCE" comparison="NOT_BLANK" />
        <field text="_voucherBalance" loc="5" />
        <sp />
        <field method="getStringProperty" method_param="REPORTED_BALANCE" />
      </row>
      <row>
        <condition method="getTraceNumber" comparison="NOT_NULL" />
        <field text="_traceNumber" loc="5" />
        <sp />
        <field method="getTraceNumber" />
      </row>
    </section>
    <section name="creditcard_detail">
      <condition class="dtv.pos.docbuilding.conditions.TenderIdCondition" tenderId="ROOM_CHARGE" inverted="true" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <field method="getMaskAccountNumberDao" loc="5" />
        <sp />
        <!-- PCI default is not to display.  Can be enabled at customer request
        <field method="getExpirationDate" formatter="CreditCardExp" />
        -->
      </row>
      <row>
        <field text="_authnbr" loc="5" />
        <sp />
        <field method="getAuthorizationCode" />
        <!-- Begin BZ26893 -->
        <sp n="2"/>
        <field text="_caw_authTime" />
        <sp />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawAuthTimeDocBuilderField" />
        </field>
        <!-- End BZ26893 -->
      </row>
      <row>
        <field text="_transType" loc="5" />
        <sp />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawRcptTransactionTypeDocBuilderField" />
        </field>
      </row>
      <row>
        <field text="_entryMethod" loc="5" />
        <sp />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawTenderEntryMethodDocBuilderField" />
        </field>
      </row>
      <row>
        <condition class="caw.pos.common.rcpt.CawEMVVerificationDataCondition" />
        <field text="_verification" loc="5" />
        <sp />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawEMVVerificationMethodDocBuilderField" />
        </field>
      </row>
      <row>
        <condition method="getTraceNumber" comparison="NOT_NULL" />
        <field text="_traceNumber" loc="5" />
        <sp />
        <field method="getTraceNumber" />
      </row>
    </section>
    <!-- End BZ23544 -->
  <!-- Begin BZ23558, BZ26893-->
  <section name="EMVData_general_info">
        <condition class="caw.pos.common.rcpt.CawHasEMVDataCondition" />
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="SEQNUM" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvSeqNum</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="SEQNUM" />
           </field>
        </row>
        
        <!-- Begin BZ26893 HOSRESCODE with ISORESCODE -->
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="HOSRESCODE" />
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="ISORESCODE" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawNewEmvHosResCode</text>
            </field>
            <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="HOSRESCODE" />
            </field>
            
            <field alignment="LEFT"  formatter="RCPTTRANSLATER" loc="20">
              <text dtype="String">_cawNewEmvISOResCode</text>
            </field>
            <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="ISORESCODE" />
            </field>
        </row>
        
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="ISORESCODE" inverted="true" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawNewEmvHosResCode</text>
            </field>
            <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="HOSRESCODE" />
            </field>
        </row>
        
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="HOSRESCODE" inverted="true"/>
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawNewEmvISOResCode</text>
            </field>
            <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="ISORESCODE" />
            </field>
        </row>
        <!-- End BZ26893 HOSRESCODE with ISORESCODE -->
        
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="AID" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvAID</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="AID" />
           </field>
        </row>
        
        <!-- Begin BZ28489-->
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="APPNAME" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvAppName</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="APPNAME" />
           </field>
        </row>
        <!-- End BZ28489 -->
        <!-- Begin BZ28489 TVR with CURRENCY -->
        
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="TVR" />
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="CURRENCY" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvTVR</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="TVR" />
           </field>
           <field alignment="LEFT"  formatter="RCPTTRANSLATER" loc="20">
              <text dtype="String">_cawEmvCurrency</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="CURRENCY" />
           </field>
        </row>
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="CURRENCY" inverted="true"/>
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvTVR</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="TVR" />
           </field>
        </row>
        
        <!-- End BZ28489 TVR with CURRENCY -->
        
        <!-- Begin BZ26893 TSI with AC -->
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="TSI" />
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="AC" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvTSI</text>
            </field>
            <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="TSI" />
            </field>
            <field alignment="LEFT"  formatter="RCPTTRANSLATER" loc="20">
              <text dtype="String">_cawEmvAC</text>
            </field>
            <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="AC" />
            </field>
        </row> 
        
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="AC" inverted="true"/>
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvTSI</text>
            </field>
            <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="TSI" />
            </field>
        </row>
        
        <row alignment="LEFT">
           <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="TSI" inverted="true" />
           <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvAC</text>
           </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="AC" />
           </field>
        </row>
        <!-- End BZ26893 TSI with AC -->
        
        <!-- Begin BZ28489 TVR with CURRENCY -->
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="TVR" inverted="true"/>
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvCurrency</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="CURRENCY" />
           </field>
        </row>
        <!-- Begin BZ28489 TVR with CURRENCY -->
        
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="TRANUM" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvTraNum</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="TRANUM" />
           </field>
        </row> 
        
        <!-- Begin BZ26893 DEVICEID with TERINALNUM -->
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="DEVICEID" />
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="TERINALNUM" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvDeviceId</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="DEVICEID" />
           </field>
           <field alignment="LEFT"  formatter="RCPTTRANSLATER" loc="20"> <!-- BZ28489 -->
              <text dtype="String">_cawEmvTerinalNum</text>
           </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="TERINALNUM" />
           </field>
        </row>
        
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="TERINALNUM" inverted="true"/>
            <field alignment="LEFT" formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvDeviceId</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="DEVICEID" />
           </field>
        </row>
        <!-- Begin BZ26893 DEVICEID with TERINALNUM -->
        
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="MERCHID" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvMerchId</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="MERCHID" />
           </field>
        </row> 
        
        <!-- Begin BZ26893 DEVICEID with TERINALNUM -->
        <row alignment="LEFT">
            <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="DEVICEID" inverted="true" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvTerinalNum</text>
            </field>
           <field alignment="LEFT">
              <aggregate class="caw.pos.common.rcpt.CawEMVMethodDocBuilderField" />
              <Parameter name="emv_Value" value="TERINALNUM" />
           </field>
        </row>
        <!-- End BZ26893 DEVICEID with TERINALNUM -->
        <sectionref>defer_financial</sectionref><!-- BZ33319 -->
     </section>
  <!-- End BZ23558, BZ26893 -->
  
  <!-- Begin BZ-23372 -->
    <section name="CawReturnListSpecialReceipt">
        <iterator method="getLineItemsByTypeCodeFiltered">
        <method_param dtype="String">ITEM</method_param>
        <method_param dtype="String">dtv.pos.hardware.rcptbuilding.DefaultRcptLineItemFilter</method_param>
        <!-- The following line is an example of a summary filter, for base we are not going to use a summary filter-->
        <!-- <method_param dtype="String">dtv.pos.hardware.rcptbuilding.SummaryRcptLineItemFilter</method_param> -->
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.VoidedCustomerAccountDetailLineCondition" />
        <condition class="caw.pos.docbuilding.conditions.CawReturnReceiptPerItemCondition" />
        <sectionref>CawReturnSpecialReceipt</sectionref>
      </iterator>
    </section>
    
    <section name="CawReturnSpecialReceipt">
      <row /> <!-- BZ26893 -->
      <sectionref>header_return</sectionref><!-- BZ23955 -->
      <row align="C">
        <field text="_cawSpecialReturnTitle" style="BOLD" />
      </row>
      <row style="STRONGUNDERLINE">
        <!-- Begin BZ26893 -->
        <field text="_item" />
        <field text="_caw_qty" align="R" loc="29" />
        <field align="R" >
          <aggregate class="caw.pos.common.rcpt.CawItemHeaderBuilderField" /> <!-- BZ28688-->
        </field>
        <!-- End BZ26893 -->
      </row>
      <sectionref>nonvoided_item_return</sectionref><!-- BZ23955 -->
      <sectionref>CawSpecialReturnItems</sectionref>
      <sectionref>caw_detailed_cust_info</sectionref>
      <sectionref>caw_return_items_trans_barcode</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    
    <section name="CawSpecialReturnItems">
        <row/>
        <row align="L">
            <field alignment="LEFT">
              <text dtype="String">_cawSpecialReturnLocation</text>
              <horizontal_rule style="Strong" />
            </field>
            <field text="x_______________________________________" style="BOLD" />
        </row>
        <row>
            <field alignment="LEFT">
              <text dtype="String">_cawSpecialReturnRMA</text>
              <horizontal_rule style="Strong" />
            </field>
            <field text="x_______________________________________" style="BOLD" />
        </row>
        <row>
            <field alignment="LEFT">
              <text dtype="String">_cawSpecialReturnReason</text>
              <horizontal_rule style="Strong" />
            </field>
            <field text="x_______________________________________" style="BOLD" />
        </row>
        <row>
            <field text="x_______________________________________" style="BOLD" />
        </row>
        <row>
            <field text="x_______________________________________" style="BOLD" />
        </row>
        <row/>
    </section>
    <!-- END BZ24049 -->
    <section name="transaction_header_info_return">
      <row>
        <field text="_str" />
        <field text="_reg" align="L" loc="7" />
        <field text="_csi" align="L" loc="12" />
        <field text="_tkt" align="L" loc="20" />
        <field text="_datetime" align="L" loc="27" /><!-- BZ24191 -->
      </row>
      <row>
        <field method="getRetailLocationId" />
        <field method="getWorkstationId" align="L" loc="7" />
        <field method="getParentTransaction.getOperatorParty.getEmployeeId" align="L" loc="12" />
        <field method="getTransactionSequence" align="L" loc="20" />
        <field align="L" loc="27"><!-- BZ24191 -->
          <aggregate class="caw.pos.common.rcpt.CawDateTimeDocBuilderField" />
        </field>
      </row>
      <row /> <!-- BZ26893 -->
    </section>
    <!-- END BZ24049 -->

    <!-- BEGIN BZ23955 -->
    <section name="header_return">
        <sectionref>logo</sectionref>
        <sectionref>transaction_store_location_return</sectionref>
        <horizontal_rule />
        <sectionref>LOCAL.HEADER_TOP</sectionref>
        <sectionref>transaction_header_info_return</sectionref>
        <sectionref>SALES_PERSON_INFO</sectionref>
        <sectionref>transaction_cashier</sectionref>
        <sectionref>transaction_flight_information</sectionref>
        <row /><!-- BZ26893 -->
    </section>
    <section name="transaction_store_location_return">
        <row />
        <region alignment="C">
            <field>
                <aggregate class="caw.pos.common.rcpt.CawStoreLocationDocBuilderField" />
            </field>
        </region>
    </section>
    
    <section name="nonvoided_item_return">
      <condition class="dtv.pos.docbuilding.conditions.AllowDonationLineItemOnReceipts" />
      <!-- Begin BZ26893 -->
      <row>
      <condition class="caw.pos.common.rcpt.CawItemQuantityCondition" /> <!-- BZ26893 -->
        <field method="getTaxGroupId" style="BOLD" />
        <sp />
        <field method="getItemDescription" style="BOLD"  align="L" />
      </row>
      <sectionref>nonvoided_item_BaseUnitPrice</sectionref> <!-- BZ26893 -->
      <row>
        <field method="getItem.getItemId" />
        <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" />
        <field text="/" align="L"/>
        <field>
          <aggregate class="caw.pos.common.rcpt.CawRcptUpcLineItemBuilderField" />
        </field>
        <field method="getExtendedAmount" formatter="Money" align="R" loc="-3" /> 
        <field  loc="-1">
          <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" />
        </field>
      </row>
       <row>
        <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" inverted="true"/>
        <field method="getItem.getItemId" />
        <field method="getExtendedAmount" formatter="Money" align="R" loc="-3" /> 
         <field loc="-1">
          <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" />
        </field>
      </row>
      <!-- End BZ26893 -->
      
      <!-- Begin BZ28201 -->
      <region left_margin="3">
       <condition class="caw.pos.common.rcpt.CawItemPropeptiesOnReceiptCondition" />
        <field >
          <aggregate class="caw.pos.common.rcpt.CawItemPropertiesBuilderField" />
        </field>
      </region>
      <!-- End BZ28201 -->
      
      <row>
        <condition method="getItem.getDimension1" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="1" />
        </field>
      </row>
      <row>
        <condition method="getItem.getDimension2" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="2" />
        </field>
      </row>
      <row>
        <condition method="getItem.getDimension3" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="3" />
        </field>
      </row>
      <sectionref>item_serial_number</sectionref> <!-- BZ23607 -->
      <sectionref>caw_item_cust_group</sectionref>
      <sectionref>caw_item_cust_group_NoCustomer</sectionref> <!-- BZ25188 -->
      <sectionref>LOCAL.NONVOIDED_ITEM</sectionref>
      <sectionref>kit_components</sectionref>
      <!-- <sectionref>item_serial_number</sectionref> --> <!-- BZ23607 -->
      <sectionref>item_inventory_locations</sectionref>
      <sectionref>return_proration</sectionref>
      <sectionref>return_reason_code</sectionref>
      <sectionref>item_discounts</sectionref>
      <sectionref>layaway_info</sectionref>
      <sectionref>SP_ORDER_INFO</sectionref>
      <sectionref>WARRANTY_COVERAGE</sectionref>
      <sectionref>WARRANTY_LINE</sectionref>
      <sectionref>registry_info</sectionref>
      <sectionref>item_comments</sectionref>
    </section>
    <!-- END BZ23955 -->
    
    <section name="caw_detailed_cust_info">
      <region>
        <field>
          <aggregate class="caw.pos.common.rcpt.CawRetrieveCustomerInfoDocBuilder" />
        </field>
      </region>
      <row/>
    </section>
    
    <section name="caw_return_items_trans_barcode">
      <barcode symbology="Code 93">
        <field>
          <aggregate class="caw.hardware.barcode.CawTranBarcodeDocBuilderField" />
        </field>
      </barcode>
    </section>
  <!-- End BZ-23372 -->
  
  <!-- Begin BZ23585 -->
    <!-- - - - - - - - tenders section - - - - - - - -->
    <section name="tenders">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trn.IPosTransaction" />
      <horizontal_rule style="Double" />
      <iterator method="getLineItemsByTypeCode" method_param="TENDER">
        <!-- <condition class="caw.pos.common.rcpt.CawVoidTenderLineCondition" /> -->
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.IncludeTenderStateCondition" value="CHANGE" inverted="true" />
        <sectionref>nonchange_tender</sectionref>
      </iterator>
      <horizontal_rule style="Double" />
    </section>
    
    <section name="nonchange_tender">
      <sectionref>currency_tender</sectionref>
      <sectionref>creditcard_tender</sectionref>
      <sectionref>travelers_check_tender</sectionref>
      <sectionref>check_tender</sectionref>
      <sectionref>account_credit</sectionref>
      <sectionref>voucher_tender</sectionref>
      <sectionref>account_tender</sectionref>
      <sectionref>homeofficecheck_tender</sectionref>
      <sectionref>coupon_tender</sectionref>
      <sectionref>nonvoided_foreign_currency_tender</sectionref>
      <sectionref>misc_tender</sectionref>
      <sectionref>roomcharge_tender</sectionref>
      <sectionref>caw_custcopy_nonchange_tender</sectionref>
    </section>
    
    <!-- Begin BZ26893 -->
    <section name="cust_signature_for_nonchange_tender">
      <condition method="getSignature.getSignature" comparison="IS_NULL" />
      <!-- <row n="4" /> BZ26893 -->
      <!-- <sectionref>signature_line</sectionref> --> <!-- BZ26893 -->
      <!-- <sectionref>customer_name_for_signature</sectionref> --> <!-- BZ26893 -->
    </section>
    <!-- End BZ26893 -->
    
    <section name="caw_custcopy_nonchange_tender">
        <!--<condition method="getTenderStatusCode" comparison="NOT_EQUAL" value="Refund" /> -->
        <!-- <condition method="getTender.getCustomerSignatureRequired" comparison="TRUE" /> -->
        <sectionref>captured_tender_signature</sectionref>
        <sectionref>custcopy_credit_card_terms</sectionref>
    </section>
  <!-- End BZ23585 -->
  <!-- Begin BZ23263 -->
  <section name="account_tender">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="ACCOUNT" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <condition class="caw.pos.common.rcpt.CawLineTenderTypeARCondition" value="ACCOUNT" />
        <field method="getAccountNumber" loc="5" />
      </row>
      <!-- BZ24171 -->
    <region left_margin="5">
        <!-- <field text="_houseAccountRcptUserName" loc="5" /> -->
        <!-- <sp /> -->
        <!-- <field method="getAccountUserName" /> -->
        <field loc="5">
            <aggregate class="caw.pos.common.rcpt.CawAccountUsernameDocBuilderField" />
        </field>
    </region>
      <!-- BZ24171 -->
    <!--Begin BZ30383 -->
    <row>
        <field text="_accountNumberName" loc="5" />
        <field>
            <aggregate class="caw.pos.common.rcpt.CawAccountNumberDocBuilderField" />
        </field>
    </row>
    <!--End BZ30383 -->
      <row>
        <condition method="getPoNumber" comparison="NOT_NULL" />
        <field text="_houseAccountPONumber" loc="5" />
        <sp />
        <!-- Begin BZ24103 -->
        <field>
                <aggregate class="caw.pos.common.rcpt.CawPONumberLineDocBuilderField" />
        </field>
         <field loc="5">
                <aggregate class="caw.pos.common.rcpt.CawPONumberSecondLineDocBuilderField" />
        </field>
        <!-- End BZ24103 -->
      </row>
    </section>
    <!-- End BZ23263 -->
    
    <!-- Start BZ23542 -->
    <section name="BALANCE_INQUIRY">
      <!-- Target: dtv.pos.tender.voucher.VoucherBalanceInfo -->
      <sectionref>logo</sectionref>
      <row align="C" charsize="X2HW">
        <field text="_BI_rcptHeader" />
      </row>
      <horizontal_rule />
      <row>
        <field text="_str" />
        <field text="_reg" align="L" loc="6" />
        <field text="_csi" align="L" loc="11" />
        <field text="_tkt" align="L" loc="19" />
        <field text="_datetime" align="L" loc="27" /><!-- BZ24191 -->
      </row>
      <row>
        <field>
            <aggregate class="caw.pos.docbuilding.CawGetStoreNumberDocBuilder" />
        </field>
        <field align="L" loc="6" >
            <aggregate class="caw.pos.docbuilding.CawGetRegisterNumberDocBuilder" />
        </field>
        <!-- Begin BZ28915 -->
        <field align="L" loc="11" >
           <aggregate class="caw.pos.common.rcpt.CawGCEmployeeIdDocBuilderField" />
        </field>
        <field align="L" loc="19" >
           <aggregate class="caw.pos.common.rcpt.CawGCTransactionSequenceDocBuilderField" />
        </field>
        <!-- End BZ28915 -->
        <!-- Begin BZ26893 -->
        <field align="L" loc="27"><!-- BZ24191 -->
          <aggregate class="caw.pos.common.rcpt.CawDateTimeDocBuilderField" />
        </field>
        <!-- End BZ26893 -->
      </row>
      <row />
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row />
      <row>
        <field text="_cawBIGiftCardNumber" loc="3" />
        <sp />
        <!-- <field method="getSerialNumber" formatter="VoucherNumber" /> -->
        <field loc="3" ><!-- 26849 -->
          <aggregate class="caw.pos.docbuilding.CawGetSerialNumberDocBuilder" /><!-- BZ25958 -->
        </field>
      </row>
      <row>
        <condition method="getTraceNumber" comparison="NOT_NULL" />
        <field text="_traceNumber" loc="3" />
        <sp />
        <field method="getTraceNumber" />
      </row>
      <row>
        <field text="_cawBIGiftCardBalance" loc="3" />
        <sp />
        <field method="getBalance" formatter="Money" />
      </row>
      <row />
      <row align="C">
        <field text="_cawBIFooter1" />
      </row>
      <row align="C">
        <field text="_cawBIFooter2" />
      </row>
      <row align="C">
        <field text="_cawBIFooter3" />
      </row>
      <row align="C">
        <field text="_cawBIFooter1" />
      </row>
      <sectionref>page_break</sectionref>
    </section>
    <!-- End BZ23542 -->
    
    <!-- Begin BZ23356 -->
    <section name="CawEmvDeclined">
      <sectionref>header_decline</sectionref>
      <sectionref>declined_tenders</sectionref>
      <row /> <!-- BZ26893 -->
      <sectionref>EMVData_Declined_Info</sectionref>
      <row /> <!-- BZ26893 -->
      <sectionref>EMVTag_Declined_Info</sectionref> <!-- BZ23800 -->
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    
    <section name="header_decline">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location_decline</sectionref>
      <horizontal_rule />
      <sectionref>LOCAL.HEADER_TOP</sectionref>
      <sectionref>transaction_header_info</sectionref>
      <sectionref>SALES_PERSON_DECLINED_INFO</sectionref>
      <sectionref>transaction_flight_information</sectionref>
    </section>
    <!--Begin BZ23864 -->
    <section name="transaction_store_location_decline">
        <row />
        <row align="C">
          <field method="getStoreName" />
        </row>
        <row align="C">
          <field method="getAddress" />
        </row>
        <row align="C">
          <field method="getLocation" />
        </row>
    </section>
    <section name="HeaderTop_ShoppingPass">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location_shopping_pass</sectionref>
      <horizontal_rule />
      <!-- BEGIN BZ29292-->
      <sectionref>LOCAL.HEADER_TOP</sectionref>
      <sectionref>transaction_header_information_shopping_pass</sectionref>
      <!-- END BZ29292-->
    </section>
    <section name="transaction_store_location_shopping_pass">
        <row />
        <row align="C">
          <field method="getStoreName" />
        </row>
        <row align="C">
          <field method="getAddress" />
        </row>
        <row align="C">
          <field method="getLocation" />
        </row>
    </section>
    <section name="SALES_PERSON_INFO_SHOPPING_PASS"><!-- BZ24170 -->
        <row>
            <condition method="getOperatorParty.getEmployeeId" comparison="NOT_NULL" />
            <field text="_salesperson" />
            <sp />
            <field method="getOperatorParty.getEmployeeId" />
            </row>
    </section>
    <section name="HeaderTop_GiftCard">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location_giftcard</sectionref>
      <horizontal_rule />
      <sectionref>LOCAL.HEADER_TOP</sectionref>
      <sectionref>transaction_header_info</sectionref>
      <sectionref>SALES_PERSON_INFO</sectionref>
      <sectionref>transaction_flight_information</sectionref>
    </section>
    <section name="transaction_store_location_giftcard">
        <row />
        <row align="C">
          <field method="getStoreName" />
        </row>
        <row align="C">
          <field method="getAddress" />
        </row>
        <row align="C">
          <field method="getLocation" />
        </row>
    </section>
    <!-- End BZ23864 -->
    <!-- Begin BZ24050 -->
    <section name="SALES_PERSON_DECLINED_INFO">
      <condition method="getSalePerson" comparison="NOT_NULL" />
      <row>
        <field text="_salesperson" />
        <sp />
        <field method="getSalePerson" />
      </row>
    </section>
    <!-- End BZ24050 -->
    <section name="declined_tenders">
      <row>
        <field method="getTenderDescription" />
      </row>
      <row>
        <field method="getNumberCard" loc="5" />
      </row>
      <!-- Begin BZ26893 -->
      <row>
        <field text="_authAmout" loc="5" />
        <sp />
        <field method="getAuthAmount" />
      </row>
      <!-- End BZ26893 -->
      <row>
        <field text="_transType" loc="5" />
        <sp />
        <field method="getTransType" />
      </row>
      <row>
        <field text="_entryMethod" loc="5" />
        <sp />
        <field method="getEntryMethod" />
      </row>
      <row>
        <field text="_verification" loc="5" />
        <sp />
        <field method="getVerification" />
      </row>
      <!-- Begin BZ26893 -->
      <row>
        <field text="_authTime" loc="5" />
        <sp />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawAuthTimeDocBuilderField" />
        </field>
      </row>
      <!-- End BZ26893 -->
      <row>
        <field text="_declineReason" loc="5" />
        <sp />
        <field method="getDeclineReason" />
      </row>
    </section>
    <section name="EMVData_Declined_Info">
        <row alignment="LEFT">
            <condition method="getSeqNumber" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvSeqNum</text>
            </field>
           <field method="getSeqNumber" />
        </row>
        <row alignment="LEFT">
            <condition method="getHostResCode" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvHosResCode</text>
            </field>
           <field method="getHostResCode" />
        </row>
        <row alignment="LEFT">
            <condition method="getIsoResCode" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvISOResCode</text>
            </field>
           <field method="getIsoResCode" />
        </row>
        <row alignment="LEFT">
            <condition method="getEmvAID" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvAID</text>
            </field>
           <field method="getEmvAID" />
        </row>
        <row alignment="LEFT">
            <condition method="getEmvAppName" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvAppName</text>
            </field>
           <field method="getEmvAppName" />
        </row>
        <row alignment="LEFT">
            <condition method="getEmvTVR" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvTVR</text>
            </field>
           <field method="getEmvTVR" />
        </row>
        <row alignment="LEFT">
            <condition method="getEmvTSI" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvTSI</text>
            </field>
           <field method="getEmvTSI" />
        </row> 
        <row alignment="LEFT">
            <condition method="getCurrency" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvCurrency</text>
            </field>
           <field method="getCurrency" />
        </row>
        <row alignment="LEFT">
            <condition method="getTraceNumber" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvTraNum</text>
            </field>
           <field method="getTraceNumber" />
        </row> 
        <row alignment="LEFT">
            <condition method="getDeviceId" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvDeviceId</text>
            </field>
           <field method="getDeviceId" />
        </row>
        <row alignment="LEFT">
            <condition method="getMerchId" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvMerchId</text>
            </field>
           <field method="getMerchId" />
        </row> 
        <row alignment="LEFT">
            <condition method="getTerminalNumber" comparison="NOT_NULL" />
            <field alignment="LEFT"  formatter="RCPTTRANSLATER">
              <text dtype="String">_cawEmvTerinalNum</text>
            </field>
           <field method="getTerminalNumber" />
        </row>
     </section>
    <!-- End BZ23356 -->
    
    <!-- Start BZ 23559 -->
    <section name="cawTenderExchangeVerbiage">
      <row /> <!-- BZ26893 -->
      <condition class="dtv.pos.docbuilding.conditions.IsTenderExchangeCondition" />
      <sectionref>caw_return_policy</sectionref>      <!-- BZ33315 -->
    </section>
    
    <section name="verbiageGiftCardRedeem">
      <condition class="dtv.pos.docbuilding.conditions.IncludeTenderTypeCondition" type="VOUCHER" />
      <region>
        <field text="_verbiageRedeemGiftCardExchange" />
      </region>
    </section>
    
    <section name="CUSTOMER_TENDER_EXCHANGE_COPY">
      <sectionref>header</sectionref>
      <sectionref>YouSavedMessage</sectionref>
      <sectionref>YouCouldSavedMessage</sectionref>
      <!-- <sectionref>tenderExchangeLabel</sectionref> --> <!-- BZ28688 -->
      <sectionref>tenders</sectionref>
      <sectionref>footer</sectionref>
      <sectionref>cawTenderExchangeVerbiage</sectionref><!-- BZ23559 -->
      <sectionref>transaction_disclaimers</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
      <sectionref>StoreCreditsIssued</sectionref>
    </section>
    <!-- Start BZ 23559 -->
    
    <section name="CawGiftCardDeclinedReceipt">
      <sectionref>HeaderTop_GiftCard</sectionref> <!-- BZ23864 -->
      <!-- <sectionref>CUST_COPY_HEADER_DB</sectionref> --> <!-- BZ24428 -->
      <sectionref>giftCardDeclinedContent</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    
    <section name="giftCardDeclinedContent">
      <region left_margin="5">
      <!-- Begin BZ26847 -->
        <!-- <field method="getReceiptText" formatter="text" /> -->
        <field >
          <aggregate class="caw.pos.docbuilding.CawGetContentGCDeclineBuilder" /><!-- BZ25958 -->
        </field>
        <!-- End BZ26847 -->
      </region>
    </section>
    
    <!-- Start BZ 23607 -->
    <section name="nonvoided_item">
      <condition class="dtv.pos.docbuilding.conditions.AllowDonationLineItemOnReceipts" />
      <!-- Begin BZ26893 -->
      <row>
      <condition class="caw.pos.common.rcpt.CawItemQuantityCondition" /> <!-- BZ26893 -->
        <field method="getTaxGroupId" style="BOLD" />
        <sp />
        <field method="getItemDescription" style="BOLD"  align="L" />
      </row>
       <sectionref>nonvoided_item_BaseUnitPrice</sectionref> <!-- BZ26893 -->
       
      <!-- BEGIN BZ26270 -->
      <row>
        <field method="getItem.getItemId" />
        <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" />
        <field text="/" align="L"/>
        <field>
          <aggregate class="caw.pos.common.rcpt.CawRcptUpcLineItemBuilderField" />
        </field>
        <field method="getExtendedAmount" formatter="Money" align="R" loc="-3" /> <!-- BZ26893 -->
        <!-- <field method="getBaseExtendedPrice" formatter="Money" align="R" loc="-3" /> --> <!-- BZ26893 -->
      </row>  
      
       <row>
        <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" inverted="true"/>
        <field method="getItem.getItemId" />
        <field method="getExtendedAmount" formatter="Money" align="R" loc="-3" /> <!-- BZ26893 -->
        <!-- <field method="getBaseExtendedPrice" formatter="Money" align="R" loc="-3" /> --> <!-- BZ26893 -->
      </row>  
      <!-- END BZ26270 -->
      <!-- End BZ26893-->
      
      <!-- Begin BZ28201 -->
      <region left_margin="3">
       <condition class="caw.pos.common.rcpt.CawItemPropeptiesOnReceiptCondition" />
        <field >
          <aggregate class="caw.pos.common.rcpt.CawItemPropertiesBuilderField" />
        </field>
      </region>
      <!-- End BZ28201 -->

      <row>
        <condition method="getItem.getDimension1" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="1" />
        </field>
      </row>
      <row>
        <condition method="getItem.getDimension2" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="2" />
        </field>
      </row>
      <row>
        <condition method="getItem.getDimension3" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="3" />
        </field>
      </row>
      <sectionref>item_serial_number</sectionref> <!-- BZ23607 -->
      <sectionref>caw_item_cust_group</sectionref> 
      <sectionref>caw_item_cust_group_NoCustomer</sectionref> <!-- BZ25188 , BZ26893 -->
      <sectionref>LOCAL.NONVOIDED_ITEM</sectionref>
      <sectionref>kit_components</sectionref>
      <!-- <sectionref>item_serial_number</sectionref> --> <!-- BZ23607 -->
      <sectionref>item_inventory_locations</sectionref>
      <sectionref>return_proration</sectionref>
      <sectionref>return_reason_code</sectionref>
      <sectionref>item_discounts</sectionref>
      <sectionref>return_verification</sectionref>
      <sectionref>layaway_info</sectionref>
      <sectionref>SP_ORDER_INFO</sectionref>
      <sectionref>WARRANTY_COVERAGE</sectionref>
      <sectionref>WARRANTY_LINE</sectionref>
      <sectionref>registry_info</sectionref>
      <sectionref>item_comments</sectionref>
      <!-- <row /> --> <!-- BZ26893, BZ28488 -->
    </section>
    
    <!-- Begin BZ26893 -->
    <section name="nonvoided_item_BaseUnitPrice">
      <condition class="caw.pos.common.rcpt.CawItemQuantityCondition" inverted="true" /> <!-- BZ26893 -->
      <row>
       <condition method="getBaseUnitPrice" comparison="GREATER_THAN_ZERO"/>
        <field method="getTaxGroupId" style="BOLD" />
        <sp />
        <field method="getItemDescription" style="BOLD"  align="L" />
        <sp /> 
        <field method="getQuantity" formatter="Quantity" align="L" loc="26"/> 
        <field text="_atSymbol" align="L"/>
        <sp /> 
        <field method="getBaseUnitPrice" formatter="Money" align="L" /> 
      </row>
      <row>
      <condition method="getBaseUnitPrice" comparison="LESS_THAN_ZERO"/>
        <field method="getTaxGroupId" style="BOLD" />
        <sp />
        <field method="getItemDescription" style="BOLD"  align="L" />
        <sp /> 
        <field text="(" align="L" loc="25"/>
        <field method="getQuantity" formatter="Quantity" align="L" loc="26"/> 
        <field text="_atSymbol" align="L"/>
        <sp />
        <field method="getBaseUnitPrice.abs" /> 
        <field text=")" />
      </row>
    </section>
    <!-- End BZ26893 -->
    
    <!-- Begin BZ26893 -->
    <section name="return_verification">
      <condition class="dtv.pos.docbuilding.conditions.ReturnTypeCondition">
        <Parameter name="VALUE" value="VERIFIED" />
        <Parameter name="VALUE2" value="UNVERIFIED" />
      </condition>
      <!-- suppress this section for order cancellations when no original date is known -->
      <condition class="dtv.pos.register.returns.HasOriginalTransactionDateCondition" />
      <row>
        <field text="_caw_org" />
         <sp />
        <condition method="getOriginalRetailLocationId" comparison="NOT_EQUAL" value="0" />
        <field text="_caw_store" />
        <sp />
        <field method="getOriginalRetailLocationId" />
         <sp />
        <condition method="getOriginalTransactionSequence" comparison="NOT_EQUAL" value="0" />
        <field text="_caw_tran" />
        <sp />
        <field method="getOriginalTransactionSequence" />
        <sp />
        <condition method="getOriginalWorkstationId" comparison="NOT_EQUAL" value="0" />
        <field text="_caw_register" />
        <sp />
        <field method="getOriginalWorkstationId" />
        <!-- Begin BZ26893 -->
        <sp />
        <field formatter="DateShort" align="R" loc="-1">
           <aggregate class="dtv.pos.register.returns.OriginalTransactionDateField" />
        </field>
      </row>
      <!-- <row> -->
      <!-- <field text="_caw_date" loc="-11" /> -->
      <!-- <sp /> -->
      <!-- <field formatter="DateShort" align="R" loc="-3"> -->
      <!-- <aggregate class="dtv.pos.register.returns.OriginalTransactionDateField" /> -->
      <!-- </field> -->
      <!-- </row> -->
      <!-- End BZ26893 -->
    </section>
    <!-- End BZ26893 -->
    
    <section name="totals">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <row>
        <condition class="dtv.pos.register.tax.TaxCodeSummaryPrintEnableCondition" inverted="true" />
        <field text="_subtotal" align="R" loc="-15" />
        <field method="getSubtotal" formatter="Money" align="R" loc="-3" />
      </row>
      <!-- LIST EACH TAX ON THE TRANSACTION -->
      <!--
      <iterator method="getLineItemsByTypeCode" method_param="TAX" itemComparator="dtv.pos.register.tax.CompoundGroupTaxComparator">
        <condition method="getVoid" comparison="FALSE" />
        <row>
          <field method="getSaleTaxGroupRule.getDescription" align="R" loc="-15" />
          <field method="getTaxAmount" formatter="Money" align="R" loc="-3" />
        </row>
      </iterator>
      -->
      <!-- LIST TAX AS A TAX TOTAL -->
      <row>
        <condition class="dtv.pos.register.tax.TaxCodeSummaryPrintEnableCondition" inverted="true" />
        <field text="_tax" align="R" loc="-22" />
        <field formatter="Percent" align="R" loc="-15">
          <aggregate class="dtv.pos.register.tax.TaxPercentageBuilderField" />
        </field>
        <field method="getTaxAmount" formatter="Money" align="R" loc="-3" />
      </row>
      <horizontal_rule />
      <row>
        <field style="BOLD" align="R" loc="-15">
          <aggregate class="dtv.pos.common.rcpt.TransactionTotalTextDocBuilderField" />
        </field>
        <field method="getTotal" style="BOLD" formatter="Money" align="R" loc="-3" />
      </row>
      <sectionref>rounding_info</sectionref>
      <sectionref>foreign_currency_separator_line</sectionref>
      <iterator class="dtv.pos.tender.foreigncurrency.ForeignCurrencyTenderIterator">
        <sectionref>foreigncurrency_total</sectionref>
      </iterator>
    </section>
    
    <!-- BEGIN BZ24462 -->
    <section name="item_serial_number">
      <condition class="dtv.pos.docbuilding.conditions.ContainsSerialNumberCondition" />
      <row>
        <condition class="caw.pos.docbuilding.conditions.CawNonPhysicalLineItemTypeCondition" value="VOUCHER" inverted="true" />  <!-- BZ26963 -->
        <!-- <field method="getSerialNumber.trim" loc="5" /> -->
        <field loc="5" >
          <aggregate class="caw.pos.docbuilding.CawGetSerialNumberReloadDocBuilder" /><!-- BZ25958 -->
        </field>
      </row>
      <row>
        <condition class="caw.pos.docbuilding.conditions.CawNonPhysicalLineItemTypeCondition" value="VOUCHER" /> <!-- BZ26963 -->
        <condition class="dtv.pos.docbuilding.conditions.VoucherActivityCondition" authMethod="XPAY_GIFT_CARD_PAYMENTECH" activityCode="ISSUED" />
        <!-- <field method="getSerialNumber.trim" loc="5" /> -->
        <field loc="5" >
          <aggregate class="caw.pos.docbuilding.CawGetSerialNumberReloadDocBuilder" /><!-- BZ25958 -->
        </field>
      </row>
      <row>
        <condition class="caw.pos.docbuilding.conditions.CawNonPhysicalLineItemTypeCondition" value="VOUCHER" /> <!-- BZ26963 -->
        <condition class="dtv.pos.docbuilding.conditions.VoucherActivityCondition" authMethod="XPAY_GIFT_CARD_PAYMENTECH" activityCode="ISSUED" inverted="true" />
        <!-- Begin BZ26847 -->
        <!-- <field method="getSerialNumber.trim" formatter="VoucherNumber" loc="5" /> -->
        <field loc="5" >
          <aggregate class="caw.pos.docbuilding.CawGetSerialNumberReloadDocBuilder" /><!-- BZ25958 -->
        </field>
        <!-- End BZ26847 -->
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" />
       <condition method="getAuthorizationCode" comparison="NOT_NULL" />
        <field text="_authnbr" loc="5" />
        <sp />
        <field method="getAuthorizationCode" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <field text="_rcptVoucherBalance" loc="5" />
        <sp />
        <field method="getUnspentBalanceAmount" formatter="Money" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <field text="_transType" loc="5" />
        <sp />
        <field>
          <aggregate class="caw.pos.docbuilding.CawRcptTransactionTypeDocBuilderField" />
        </field>
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <condition method="getTraceNumber" comparison="NOT_NULL" />
        <field text="_traceNumber" loc="5" />
        <sp />
        <field method="getTraceNumber" />
      </row>
    </section>
    <!-- END BZ24462 -->
    <section name="item_discounts">
      <iterator method="getRetailPriceModifiers">
      <sectionref>item_amount_discount</sectionref> <!-- BZ26893, BZ28106 -->
      <sectionref>item_percent_discount</sectionref> <!-- BZ26893, BZ28106 -->
      <sectionref>competitive_discount_percent</sectionref>
      <sectionref>competitive_discount_amount</sectionref>
      <sectionref>item_deal</sectionref>
      <sectionref>manufac_coupon</sectionref>
      <!-- <sectionref>caw_item_override_price</sectionref> --> <!-- BZ32830 -->
      <sectionref>caw_coupon_reason_code</sectionref><!-- BZ26629 -->
    </iterator>    
    </section>
    <!-- BZ26629 start -->
    <section name="caw_coupon_reason_code">
      <row>
         <!-- Begin BZ26893 -->
        <condition class="caw.pos.docbuilding.conditions.CawDiscountReasonCodeCondition"/>
        <field text= "_caw_cpn" />
        <!-- <aggregate class="caw.pos.common.rcpt.CawDiscountReasonCodeDescriptionBuilderField" /> -->
        <sp />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawDiscountReasonCodeBuilderField" />
        </field>
        <sp />
        <sp />
        <field method="getExtendedAmount.negate" formatter="Money" />
        <!-- End BZ26893 -->
      </row>
    </section>
    <!-- BZ26629 end -->
    <!-- BEGIN BZ32830: comment out -->
    <!-- <section name="caw_item_override_price">
    <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="PRICE_OVERRIDE" />
    <row>
      <field text="_tillItemDiscountRegularPrice"/>
      <field method="getPreviousPrice" formatter="Money" loc="-15" />
    </row>
    <row>
      <field text="_tillItemIDiscountReturnPrice"/>
      <field method="getPriceChangeAmount.negate" formatter="Money" loc="-15" />
    </row>
    </section> -->
    <!-- END BZ32830 -->
    <!-- Begin BZ25188 -->
    <section name="caw_item_cust_group">
    <condition class="caw.pos.common.rcpt.CawCustomerDealCondition" />
    <call impl="caw.pos.docbuilding.CawCustomerGroupLookupCall">
    <!-- Begin BZ26893 -->
    </call>
    <row>
      <field text="_tillItemDiscountRegularPrice"/>
      <field method="getRegularBasePrice" formatter="Money" align="L" loc="22" /> <!-- BZ26893 -->
    </row>
    <!-- End  BZ26893 -->
    </section>
    <section name="caw_item_cust_group_NoCustomer">
    <condition class="caw.pos.common.rcpt.CawNoCustomerDealCondition" />
     <!-- Begin 26893 -->
     <sectionref>caw_item_cust_group_NoCustomer_ReturnPrice</sectionref>
     <sectionref>caw_item_cust_group_Customer_ReturnPrice</sectionref>
     <!-- End BZ26893 -->
    </section>
    
    <!-- Begin BZ26893 -->
    <section name="caw_item_cust_group_NoCustomer_ReturnPrice">
     <condition class="caw.pos.common.rcpt.CawCustomerDealCondition" inverted="true" />
      <row >
       <field text="_tillItemIDiscountReturnPrice"/>
       <field method="getUnitPrice" formatter="Money" align="L" loc="26" /> <!-- BZ26893 -->
      </row>
    </section>
    <!-- End BZ26893 -->
    <!-- Begin BZ26893 -->
    <section name="caw_item_cust_group_Customer_ReturnPrice">
     <condition class="caw.pos.common.rcpt.CawCustomerDealCondition" />
     <row >
       <condition method="getLoyaltyCardObject.getLoyaltyAccounts.getLoyaltyProgramLevelName" comparison="EQUAL" value="Expired" />
      <field text="_tillItemIDiscountReturnPrice"/>
      <field method="getUnitPrice" formatter="Money" align="L" loc="26" /> <!-- BZ26893 -->
     </row>
     <row >
       <condition method="getLoyaltyCardObject.getLoyaltyAccounts.getLoyaltyProgramLevelName" comparison="NOT_EQUAL" value="Expired" />
     </row>
    </section>
    <!-- End BZ26893 -->
    
  <!-- End BZ25188 -->
    <section name="YouSavedMessage">
      <condition class="caw.pos.common.rcpt.CawTotalAmountSavedMsgCondition" />
      <condition class="caw.pos.common.rcpt.CawNotRegularPriceInTransCondition" />
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <!-- BZ26893 -->
      <row align="C">
      <!-- <field text="_totalAmountSaved" /> -->
      <!-- <sp /> -->
      <!-- <field formatter="Money"> -->
      <!-- <aggregate class="caw.pos.common.rcpt.CawTotalAmountSavedDocBuilderField" /> -->
      <!--  </field> -->
        <field text="_caw_totalAmountSaved" />
      </row>
      <row align="C">
      <!-- <condition class="caw.pos.common.rcpt.CawCustomerDealYouSavedCondition" /> -->
      <!-- <field text="_totalMemberSaved" /> -->
        <field text="$"/>
        <field formatter="Money"> 
          <aggregate class="caw.pos.common.rcpt.CawTotalAmountSavedDocBuilderField" /> 
        </field> 
      </row>
      <!-- End BZ26893 -->
      <row align="C">
        <condition class="dtv.pos.docbuilding.conditions.TaxExemptCondition" inverted="true"/><!-- BZ31772 -->
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    <!-- End BZ 23607 -->
    <!-- BEGIN BZ37621 -->
    <section name="CawOrderYouSavedMessage">
      <condition class="caw.pos.common.rcpt.CawOrderTotalAmountSavedMsgCondition" />
      <condition class="caw.pos.common.rcpt.CawOrderNotRegularPriceInTransCondition" />
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <row align="C">
        <field text="_caw_totalAmountSaved" />
      </row>
      <row align="C">
        <field text="$"/>
        <field formatter="Money"> 
          <aggregate class="caw.pos.common.rcpt.CawOrderTotalAmountCouldSavedDocBuilderField" /> 
        </field> 
      </row>
      <row align="C">
        <condition class="dtv.pos.docbuilding.conditions.TaxExemptCondition" inverted="true"/><!-- BZ31772 -->
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    <!--END BZ37621 -->
    <!-- BEGIN BZ37621 -->
    <section name="CawOrderBrokerYouSavedMessage">
      <condition class="caw.pos.common.rcpt.CawOrderTotalAmountCouldSavedMsgCondition" />
      <condition class="caw.pos.common.rcpt.CawOrderNotClubPriceInTransCondition" />
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <!-- Begin BZ26893 -->
      <row align="C">
        <field text="_caw_messagesave" />
      </row>
      <row align="C">
        <field text="_caw_totalAmountCouldSaved" /> <!-- BZ26893 -->
        <!-- <sp /> -->
      <!-- End BZ26893 -->
        <field formatter="Money">
          <aggregate class="caw.pos.common.rcpt.CawOrderTotalAmountCouldSavedDocBuilderField" />
        </field>
      </row>
      <row align="C">
        <condition class="dtv.pos.docbuilding.conditions.TaxExemptCondition" inverted="true"/><!-- BZ31772 -->
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    <!-- END BZ37621 -->
    <!-- BZ23800 -->
    <section name="EMVTag_Declined_Info">
     <condition method="getEmvTag" comparison="NOT_NULL" />
      <region alignment="LEFT">
        <field method="getEmvTag" formatter="text" />
      </region>
     </section>
    <!-- End BZ23800 -->
    
    <!-- Start BZ 23765 -->
    <section name="voucher_tender_details">
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount.abs" formatter="Money" loc="-3" />
      </row>
      <row>
      <!-- Begin BZ26847 -->
        <field loc="5" >
          <aggregate class="caw.pos.docbuilding.CawGetSerialNbrExchangeDocBuilder" /><!-- BZ25958 -->
        </field>
        <!-- End BZ26847 -->
      </row>
      <row>
        <condition method="getAuthorizationCode" comparison="NOT_NULL" />
        <field text="_authnbr" loc="5" />
        <sp />
        <field method="getAuthorizationCode" />
      </row>
      <row>
        <field text="_rcptVoucherBalance" loc="5" />
        <sp />
        <field method="getUnspentBalanceAmount" formatter="Money" />
      </row>
      <row>
        <field text="_transType" loc="5" />
        <sp />
        <field>
          <!-- <aggregate class="caw.pos.common.rcpt.CawRcptTransactionTypeDocBuilderField" />25958 -->
          <aggregate class="caw.pos.docbuilding.CawRcptTransactionTenderTypeDocBuilderField" /><!-- 25958 -->
        </field>
      </row>
      <row>
        <condition method="getTraceNumber" comparison="NOT_NULL" />
        <field text="_traceNumber" loc="5" />
        <sp />
        <field method="getTraceNumber" />
      </row>
    </section>
    <!-- End BZ 23765 -->
    <!-- Begin BZ24041 -->
    <section name="FrankCheck">
      <condition class="dtv.pos.docbuilding.conditions.LineOnPostVoidCondition" />
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
      </row>
       <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field method="getTransactionDate" formatter="DateShort" />
        <sp />
        <field method="getBeginDateTimestamp" formatter="TimeShort" />
      </row>
      <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field>
                <aggregate class="caw.pos.common.rcpt.CawRetailLocationIdDocBuilderField" />
        </field>
        <sp />
        <field method="getWorkstationId"  />
        <sp />
        <field method="getParentTransaction.getOperatorParty.getEmployeeId" />
        <sp />
        <field method="getTransactionSequence" />
        <sp />
        <field text="_starSignal" />
        <field formatter="Money" >
                <aggregate class="caw.pos.common.rcpt.CawFrankCheckAmountDocBuilderField" />
         </field>
        <!-- <field method="getAmount" formatter="Money" /> -->
        <field text="_starSignal"/>
        <sp />
      </row>
      <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_fordeposit" />
      </row>
      <sectionref>DepositBankFrankCheckInfo</sectionref>
    </section>
    <section name="DepositBankFrankCheckInfo">
      <call method="getParentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <row align="C">
          <field systemproperty="HardwareMgr.FrankingPadSpaces" />
          <field method="getDepositBankName" />
        </row>
        <row align="C">
          <field systemproperty="HardwareMgr.FrankingPadSpaces" />
          <field method="getDepositBankAcctNbr" />
        </row>
      </call>
    </section>
    <!-- End BZ24041 -->
    <!-- Begin BZ24028 -->
    <section name="FrankGCRedeem">
      <condition class="dtv.pos.docbuilding.conditions.LineOnPostVoidCondition" />
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
      </row>
       <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field method="getTransactionDate" formatter="DateShort" />
        <sp />
        <field method="getBeginDateTimestamp" formatter="TimeShort" />
      </row>
      <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_storenbr" />
        <sp />
        <field>
                <aggregate class="caw.pos.common.rcpt.CawRetailLocationIdDocBuilderField" />
        </field>
      </row>
      <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_registernbr" />
        <sp />
        <field method="getWorkstationId" />
      </row>
      <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_cashier" />
        <sp />
        <field method="getParentTransaction.getOperatorParty.getEmployeeId" />
      </row>
       <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_msgTransMerc" />
        <sp />
        <field method="getTransactionSequence" />
      </row>
       <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_msgMerchandise" />
        <sp />
        <field method="getAmount" formatter="Money$" />
      </row>
      <row align="C">
      <field systemproperty="HardwareMgr.FrankingPadSpaces" />
      <field text="_msgCoupon" />
      <field method="getSerialNumber"/>
      </row>
    </section>
    <!-- End BZ24028 -->
    <!-- Begin BZ24120 -->
    <section name="till_header">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location</sectionref>
      <sectionref>training</sectionref>
      <horizontal_rule />
      <sectionref>transaction_header_info</sectionref>
      <row />
      <!-- Begin BZ24531 -->
      <row align="C">
        <field style="BOLD" >
          <aggregate class="caw.pos.common.rcpt.CawTransTypeBuilderField" />
        </field>
      </row>
      <!-- End BZ24531 -->
      <row>
        <condition method="getSessionId" comparison="NOT_EQUAL" value="0" /> <!-- counts without a session (store bank?) have a sessionId of 0 - ignore -->
        <field text="_sessionid" />
        <sp />
        <field method="getSessionId" />
      </row>
      <row>
        <condition method="getCashDrawerId" comparison="NOT_NULL" />
        <field text="_cashDrawer" />
        <sp/>
        <field method="getCashDrawerId" />
      </row>
      <horizontal_rule />
      <sectionref>reasoncode_and_comment</sectionref>
    </section>
    <!-- End BZ24120 -->
    
    <!-- Begin BZ24096 -->
    <section name="CAW_SYSTEM_CYCLE">
      <horizontal_rule />
      <sectionref>training</sectionref>
       <row>
        <field text="_str" />
        <field text="_reg" align="L" loc="7" />
        <field text="_csi" align="L" loc="12" />
        <field text="_tkt" align="L" loc="20" />
       <field text="_datetime" align="L" loc="27" /><!-- BZ24191 -->
      </row>
      <row>
        <field method="getRetailLocationId" />
        <field method="getWorkstationId" align="L" loc="7" />
        <field method="getOperatorParty.getEmployeeId" align="L" loc="12" />
        <field method="getTransactionSequence" align="L" loc="20" />
       <field align="L" loc="27"><!-- BZ24191 -->
          <aggregate class="caw.pos.common.rcpt.CawDateTimeDocBuilderField" />
        </field>
      </row>
      <row>
        <condition method="getTransactionTypeCode" comparison="EQUAL" value="WORKSTATION_CLOSE" />
        <field text="_sessionid" />
        <sp />
        <field method ="getSessionId" formatter = "Last4" />
      </row>
      <row>
        <condition method="getTransactionTypeCode" comparison="EQUAL" value="WORKSTATION_COMPLETE_REM_CLOSE" />
        <field text="_sessionid" />
        <sp />
        <field method ="getSessionId" formatter = "Last4" />
      </row>
      <row />
      <row align="C" charsize="X2HW">
        <field text="*******************" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field style="BOLD">
          <aggregate class="dtv.pos.systemcycle.common.SystemCycleReceiptBannerDocBuilderField" />
        </field>
      </row>
      <row align="C" charsize="X2HW">
        <condition method="getTransactionTypeCode" comparison="EQUAL" value="WORKSTATION_COMPLETE_REM_CLOSE" />
        <field text="_register" style="BOLD" />
        <sp />
        <field method="getStringProperty" method_param="remoteWorkstationId" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field text="*******************" style="BOLD" />
      </row>
      <sectionref>training</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    
    <section name="till_summary_header">
      <!-- Target: dtv.pos.till.TillSummaryBean -->
      <row>
        <field text="_str" />
        <field text="_reg" align="L" loc="7" />
        <field text="_csi" align="L" loc="12" />
        <field text="_tkt" align="L" loc="20" />
        <field text="_datetime" align="L" loc="27" /><!-- BZ24133 -->
      </row>
      <row>
        <field method="getRetailLocationId" />
        <field method="getRegisterId" align="L" loc="7" />
        <field method="getAssocId" align="L" loc="12" />
        <field method="getTransactionSequence" align="L" loc="20" />
        <field method="getCurrentTime" formatter="DateShort" loc="27"/><!-- BZ24133 -->
        <sp />
        <field method="getCurrentTime" formatter="TimeShort" />
      </row>
    </section>
    <!-- End BZ24096 -->
    <!-- Begin BZ24107 -->
    <section name="GiftReceiptHeaderTop">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location</sectionref>
      <horizontal_rule />
      <sectionref>LOCAL.GIFT_RECEIPT_HEADER_TOP</sectionref>
      <sectionref>transaction_header_info</sectionref>
      <sectionref>SALES_PERSON_INFO</sectionref>
      <sectionref>transaction_flight_information</sectionref>
    </section>
    <!-- End BZ24107 -->
    
    <section name="transaction_flight_information">
      <sectionref>transaction_flight_arrivals</sectionref>
      <sectionref>transaction_flight_staff_information</sectionref>
      <sectionref>transaction_flight_information_flight</sectionref>
    </section>
    
    <!-- Begin BZ24102 -->
    <section name="CUSTOMER_LOYALTY_ACCOUNTS">
      <condition method="getLoyaltyCards" comparison="NOT_NULL" />
      <row />
      <row style="STRONGUNDERLINE">
        <field text="_loyaltyHistoryRcptLoyaltyAccount" />
      </row>
      <region left_margin="2">
        <field>
          <aggregate class="caw.pos.common.rcpt.CawLoyaltyAccountsDocBuilderField" />
        </field>
      </region>
    </section>
    <!-- End BZ24102 -->
    <!-- Begin BZ24130 -->
    <section name="FrankTravelersCheck">
      <condition class="dtv.pos.docbuilding.conditions.LineOnPostVoidCondition" />
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
      </row>
       <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field method="getTransactionDate" formatter="DateShort" />
        <sp />
        <field method="getBeginDateTimestamp" formatter="TimeShort" />
      </row>
      <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field>
                <aggregate class="caw.pos.common.rcpt.CawRetailLocationIdDocBuilderField" />
        </field>
        <sp />
        <field method="getWorkstationId"  />
        <sp />
        <field method="getParentTransaction.getOperatorParty.getEmployeeId" />
        <sp />
        <field method="getTransactionSequence" />
        <sp />
        <field text="_starSignal" />
        <field formatter="Money" >
                <aggregate class="caw.pos.common.rcpt.CawFrankCheckAmountDocBuilderField" />
         </field>
        <!-- <field method="getAmount" formatter="Money" /> -->
        <field text="_starSignal"/>
        <sp />
      </row>
      <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_fordeposit" />
      </row>
      <sectionref>DepositBankFrankCheckInfo</sectionref>
    </section>
    <!-- End BZ24130 -->
    
     <!-- BEGIN BZ24255 -->
    <section name="item_percent_discount">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="ANY_PERCENT_DISCOUNT" />
      <row>
        <condition class="caw.pos.docbuilding.conditions.CawDiscountReasonCodeCondition" inverted="true"/> <!-- BZ26893 -->
        <field>
               <aggregate class="caw.pos.common.rcpt.CawDiscountDescDocBuilderField" />
        </field>
        <sp />
        <field text="_openBracket" />
        <field method="getPercentForRcpt" formatter="Percent" />
        <field text="_closeBracket" />
        <field method="getExtendedAmount.negate" formatter="Money" /> <!-- BZ26893 -->
      </row>
    </section>
    <section name="competitive_discount_percent">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="PROMPT_COMP_PRICE_PERCENT" />
      <row>
       <field>
              <aggregate class="caw.pos.common.rcpt.CawDiscountDescDocBuilderField" />
        </field>
        <field method="getExtendedAmount.negate" formatter="Money" loc="-6" />
      </row>
      <call method="getParentLine">
        <row>
          <field text="_competitorPrice" />
          <sp />
          <field method="getStringProperty" method_param="COMPETITOR_PRICE" />
        </row>
      </call>
      <row>
        <condition method="getPercent" comparison="GREATER_THAN_ZERO" />
        <field method="getPercent" formatter="Percent" />
        <sp />
        <field text="_competitorDiscount" />
        <sp />
        <field formatter="Money">
          <aggregate class="dtv.pos.common.rcpt.DiscountOnCompetitorPriceDocBuilderField" />
        </field>
      </row>
    </section>

    <section name="competitive_discount_amount">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="PROMPT_COMP_PRICE_AMOUNT" />
      <row>
        <field>
               <aggregate class="caw.pos.common.rcpt.CawDiscountDescDocBuilderField" />
        </field>
        <field method="getExtendedAmount.negate" formatter="Money" loc="-6" />
      </row>
      <call method="getParentLine">
        <row>
          <field text="_competitorPrice" />
          <sp />
          <field method="getStringProperty" method_param="COMPETITOR_PRICE" />
        </row>
      </call>
      <row>
        <condition method="getDiscount.getAmount" comparison="GREATER_THAN_ZERO" />
        <field text="_competitorDiscount" />
        <sp />
        <field method="getDiscount.getAmount" formatter="Money" />
      </row>
    </section>

    <section name="item_amount_discount">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="ANY_AMOUNT_DISCOUNT" />
      <row>
        <condition class="caw.pos.docbuilding.conditions.CawDiscountReasonCodeCondition" inverted="true"/> <!-- BZ26893 -->
        <field>
               <aggregate class="caw.pos.common.rcpt.CawDiscountDescDocBuilderField" />
        </field>
        <field method="getExtendedAmount.negate" formatter="Money" loc="-6" />
      </row>
    </section>
     <!-- END BZ24255 -->
     <!-- Begin BZ24350 -->
     <section name="subTotals">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <row>
        <field text="_subtotal" align="R" loc="-15" />
        <field method="getSubtotal" formatter="Money" align="R" loc="-3" />
      </row>
    </section>
    <!-- BZ26289 start -->    
    <section name="House_Account_Customer">
      <sectionref>header</sectionref>
      <sectionref>COUNTRYPACK.SUSPEND_NONFISCAL</sectionref>
      <sectionref>account_payment</sectionref>
      <sectionref>account_number</sectionref>
      <sectionref>ha_subtotals</sectionref>
      <sectionref>tenders</sectionref>
      <sectionref>change</sectionref>
      <sectionref>YouSavedMessage</sectionref>
      <sectionref>YouCouldSavedMessage</sectionref>
      <sectionref>TaxExemptInfo</sectionref>
      <sectionref>SALE_DISCLAIMER_DB</sectionref>
      <sectionref>DONATION_FOOTER_MESSAGE</sectionref>
      <sectionref>verbiageGiftCardRedeem</sectionref>
      <sectionref>marcus_quote</sectionref> <!-- BZ32067 -->
      <sectionref>footer_cust_copy</sectionref>
      <!-- <sectionref>AUTO_RENEWAL</sectionref> --> <!-- BZ45487 -->
      <sectionref>system_mode</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>LOCAL.CUST_COPY_FOOTER</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <section name="House_Account_Store">
      <sectionref>header</sectionref>
      <sectionref>account_payment</sectionref>
      <sectionref>account_number</sectionref>
      <sectionref>ha_subtotals</sectionref>
      <sectionref>storecopy_tenders</sectionref>
      <sectionref>change</sectionref>
      <sectionref>ha_cust_print_name</sectionref>
      <sectionref>ha_cust_signature</sectionref>
      <sectionref>TaxExemptInfo</sectionref>
      <sectionref>TaxExemptSignature</sectionref>
      <sectionref>account_receivable_terms</sectionref>
      <sectionref>footer</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>STORE_COPY_FOOTER_DB</sectionref>
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    
    <section name="footer">
      <sectionref>soldItemsCount</sectionref>
      <sectionref>returnedItemsCount</sectionref>
      <sectionref>LOCAL.ITEMS_COUNT</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>return_terms</sectionref>
      <sectionref>trans_barcode</sectionref>
    </section>
    
    <section name="STORE_COPY_FOOTER_DB" dbRef="STORE_COPY_FOOTER::DEFAULT::getTransactionDate">
     <!-- <row /> --> <!-- BZ26893 -->
    </section>
   <!-- BEGIN BZ29388 -->
   <!-- BEGIN BZ30085 -->
   <section name="CAW_STORE_COPY_FOOTER_DB" dbRef="STORE_COPY_FOOTER::DEFAULT::getCurrentTransaction.getTransactionDate">
   </section>
   <!-- END BZ30085 -->
    <section name="Caw_Account_Payment_Customer">
      <sectionref>header</sectionref>
      <sectionref>COUNTRYPACK.SUSPEND_NONFISCAL</sectionref>
      <sectionref>gs_account_payment</sectionref>
      <sectionref>gs_account_number</sectionref>
      <sectionref>ha_subtotals</sectionref>
      <sectionref>tenders</sectionref>
      <sectionref>change</sectionref>
      <sectionref>YouSavedMessage</sectionref>
      <sectionref>YouCouldSavedMessage</sectionref>
      <sectionref>TaxExemptInfo</sectionref>
      <sectionref>SALE_DISCLAIMER_DB</sectionref>
      <sectionref>DONATION_FOOTER_MESSAGE</sectionref>
      <sectionref>verbiageGiftCardRedeem</sectionref>
      <sectionref>marcus_quote</sectionref> <!-- BZ32067 -->
      <sectionref>footer_cust_copy</sectionref>
      <!-- <sectionref>AUTO_RENEWAL</sectionref> --> <!-- BZ45487 -->
      <sectionref>system_mode</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>LOCAL.CUST_COPY_FOOTER</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <section name="Caw_Account_Payment_Store">
      <sectionref>header</sectionref>
      <sectionref>gs_account_payment</sectionref>
      <sectionref>gs_account_number</sectionref>
      <sectionref>ha_subtotals</sectionref>
      <sectionref>storecopy_tenders</sectionref>
      <sectionref>change</sectionref>
      <sectionref>ha_cust_print_name</sectionref>
      <sectionref>gs_account_payment_cust_signature</sectionref> <!-- BZ29476 -->
      <sectionref>TaxExemptInfo</sectionref>
      <sectionref>TaxExemptSignature</sectionref>
      <sectionref>account_receivable_terms</sectionref>
      <sectionref>footer</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>STORE_COPY_FOOTER_DB</sectionref>
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <!-- END BZ29388 -->
    <!-- BEGIN BZ29476 -->
    <section name="gs_account_payment_cust_signature">
      <row n="1" />
      <sectionref>gs_account_payment_captured_tender_signature</sectionref>
      <sectionref>signature_line</sectionref>
      <row align="C">
        <field text="_customerSigLabel" style="BOLD" />
      </row>
      <horizontal_rule style="BOLD" />
    </section>

    <section name="gs_account_payment_captured_tender_signature">
      <signature>
       <field >
           <aggregate class="caw.pos.register.ha.rcpt.CawAccountPaymentSignatureBuiderField" />
        </field>
      </signature>
    </section>
    <!-- END BZ29476 -->
    <section name="ha_cust_signature">
      <!-- <row n="6" /> --> <!-- BZ26893 -->
      <row n="1" /> <!-- BZ26893 -->
      <sectionref>signature_line</sectionref>
      <row align="C">
        <field text="_customerSigLabel" style="BOLD" />
      </row>
      <horizontal_rule style="BOLD" />
    </section>
    <section name="ha_subtotals">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <row />
      <row>
        <field text="_subtotal" align="L" loc="1"/>
        <field method="getSubtotal" formatter="Money" align="R" loc="-3" />
      </row>
    </section>
    <section name="ha_cust_print_name">
      <row />
      <row>
        <field text="_haPrint" align="L" />
        <sp />
        <sp />
        <field formatter="String" align="L">
               <aggregate class="caw.pos.register.ha.rcpt.CawRcptHACustomerNameBuilderField" />
        </field>
      </row>
    </section>
    <section name="account_payment">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <row>
        <field text="_accountPayment" align="L" />
        <field method="getSubtotal" formatter="Money" align="R" loc="-3" />
      </row>
    </section>
        
    <section name="account_number">
      <row>
        <field text="_accountNumber" align="L" />
        <field formatter="String" align="R" loc="-4"> <!-- BZ26893 -->
        <!-- <field formatter="String" align="R" loc="-3"> --> <!-- BZ26893 -->
          <aggregate class="caw.pos.register.ha.rcpt.CawRcptHANumberBuilderField" />
        </field>
      </row>
    </section>
    <section name="ha_print_empty_row">
      <condition class="caw.pos.register.ha.rcpt.CawRcptHouseAccountPaymentCondition" />
    </section>
    <!-- BZ26289 end -->
    <!-- BEGIN BZ29388 -->
    <section name="gs_account_payment">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <row>
        <field text="_gsaccountPayment" align="L" />
        <field method="getSubtotal" formatter="Money" align="R" loc="-3" />
      </row>
    </section>
        
    <section name="gs_account_number">
      <row>
        <field text="_gsaccountNumber" align="L" />
        <field formatter="String" align="R" loc="-4">
          <aggregate class="caw.pos.register.ap.rcpt.CawRcptAPNumberBuilderField" />
        </field>
      </row>
    </section>
    <!-- END BZ29388 -->
    <section name="tax_code_summary">
      <condition class="dtv.pos.register.tax.TaxCodeSummaryPrintEnableCondition" />
      <sectionref>tax_code_summary_detail</sectionref>
    </section>
    <section name="tax_code_summary_detail">
      <iterator>
        <impl dtype="Class">caw.pos.common.rcpt.CawTaxTotalIterator</impl>
        <condition method="getVoid" comparison="EQUAL">
          <Parameter name="VALUE">
            <param_value dtype="Boolean">false</param_value>
          </Parameter>
        </condition>
        <condition method="getTaxAmount" comparison="NOT_BLANK" /><!-- BZ 24603 -->
        <row>
          <!-- Begin BZ24599 -->
          <!-- <condition method="getTaxableAmount" comparison="NOT_EQUAL">
            <Parameter name="VALUE">
              <param_value dtype="BigDecimal">0</param_value>
            </Parameter>
          </condition> -->
          <!-- End BZ24599 -->
          <field text="_taxText" align="L" loc="0" />
          <sp />
          <field method="getTaxGroupId" formatter="String" align="L" loc="4" />
          <sp />
          <field method="getTaxableAmount" formatter="Money" align="R" loc="-22" />
          <sp />
          <field text="_atSymbol" align="R" loc="-20" />
          <sp />
          <field method="getTaxPercentage" formatter="Percent" align="R" loc="-12">
            <!-- <aggregate class="caw.pos.common.rcpt.CawTaxPercentageGroupBuilderField" /> -->
          </field>
          <sp />
          <field method="getTaxAmount" formatter="Money" align="R" loc="-3" />
        </row>
      </iterator>
    </section>
    <!-- End BZ24350 -->
    <!-- Begin BZ24564 -->
    <section name="item_deal">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="DEAL" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
      </row>
      <row>
        <field>
            <aggregate class="caw.pos.common.rcpt.CawCouponCodeBuilderField" />
        </field>
        <field method="getExtendedAmount.negate" formatter="Money" loc="-6" />
      </row>
    </section>
    <!-- End BZ24564 -->
    
    <section name="YouCouldSavedMessage">
      <condition class="caw.pos.common.rcpt.CawTotalAmountCouldSavedMsgCondition" />
      <condition class="caw.pos.common.rcpt.CawNotClubPriceInTransCondition"/><!-- BZ31522 -->
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <!-- Begin BZ26893 -->
      <row align="C">
        <field text="_caw_messagesave" />
      </row>
      <row align="C">
        <!-- <field text="_totalAmountCouldSaved" /> --> <!-- BZ26893 -->
        <field text="_caw_totalAmountCouldSaved" /> <!-- BZ26893 -->
        <!-- <sp /> -->
      <!-- End BZ26893 -->
        <field formatter="Money">
          <aggregate class="caw.pos.common.rcpt.CawTotalAmountCouldSavedDocBuilderField" />
        </field>
      </row>
      <row align="C">
        <condition class="dtv.pos.docbuilding.conditions.TaxExemptCondition" inverted="true"/><!-- BZ31772 -->
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    
    <!-- Begin printing receipt of BZ25640 -->
    <section name="CAW_RCPT_PAID_OUT_UFA_SEC_HEADER">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location</sectionref>
      <sectionref>training</sectionref>
      <horizontal_rule />
      <sectionref>transaction_header_info</sectionref>
      <row />
      <!-- Begin BZ24531 -->
      <row align="C">
        <field style="BOLD" >
          <aggregate class="caw.pos.common.rcpt.CawTransTypeBuilderField" />
        </field>
      </row>
      <!-- End BZ24531 -->
      <row>
        <condition method="getSessionId" comparison="NOT_EQUAL" value="0" /> <!-- counts without a session (store bank?) have a sessionId of 0 - ignore -->
        <field text="_sessionid" />
        <sp />
        <field method="getSessionId" />
      </row>
      <row>
        <condition method="getCashDrawerId" comparison="NOT_NULL" />
        <field text="_cashDrawer" />
        <sp/>
        <field method="getCashDrawerId" />
      </row>
      <horizontal_rule style="Strong" />
      <sectionref>reasoncode_and_comment</sectionref>
    </section>
    
    <section name="reasoncode_and_comment" >
      <condition method="getReasonCodeObject" comparison="NOT_NULL" />
      <row align="C">
        <field text="_reason" />
        <sp />
        <field method="getReasonCodeObject.getDescription" />
      </row>
      <sectionref>reasoncode_comment</sectionref>
    </section>
    
    <section name="CAW_RCPT_PAID_OUT_UFA_SEC">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.tsn.ITenderControlTransaction" />
      <sectionref>CAW_RCPT_PAID_OUT_UFA_SEC_HEADER</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row>
        <field text="_tillColon" />
        <sp />
        <field method="getOutboundSession.getTenderRepositoryId" />
      </row>
      <horizontal_rule style="Strong" />
      
      <row>
        <field text="_paidOut" />
      </row>
      <row>
        <field text="_code" />
        <sp />
        <field method="getReasonCode" />
      </row>
      <row>
        <field method="getReasonCodeObject.getDescription" />
      </row>
      <row>
        <field text="_rcptCustomer" />
        <sp />
        <field style="BOLD" >
          <aggregate class="caw.pos.register.ufa.rcpt.CawRcptUFACustomerBuilderField" />
        </field>
      </row>
      <horizontal_rule style="Strong" />
      <row>
        <field text="_rcptModel" />
        <sp />
        <field >
          <aggregate class="caw.pos.register.ufa.rcpt.CawRcptUFAModelBuilderField" />
        </field>
      </row>
      <row>
        <field text="_rcptSerial" />
        <sp />
        <field >
          <aggregate class="caw.pos.register.ufa.rcpt.CawRcptUFASerialBuilderField" />
        </field>
      </row>
      <row>
        <field text="_rcptUpc" />
        <sp />
        <field >
          <aggregate class="caw.pos.register.ufa.rcpt.CawRcptUFAUpcBuilderField" />
        </field>
      </row>
      <row>
        <field text="_rcptItemCode" />
        <sp />
        <field >
          <aggregate class="caw.pos.register.ufa.rcpt.CawRcptUFAItemCodeBuilderField" />
        </field>
      </row>
      <horizontal_rule style="Strong" />
      <row>
        <field text="_paidOutAmount" />
        <field method="getAmount" formatter="Money" loc="-5" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_employeesignature" />
      </row>
      <!-- Begin BZ26893 -->
      <row n="2" /> 
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_caw_managersignature" />
      </row>
      <!-- End BZ26893 -->
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_payeesignature" />
      </row>
      <!-- <horizontal_rule style="Double" /> --> <!-- BZ26893 -->
      <row />
      <sectionref>footer</sectionref>
      <sectionref>transaction_disclaimers</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    
    <section name="PaidIn">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.tsn.ITenderControlTransaction" />
      <sectionref>till_header</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row>
        <field text="_tillColon" />
        <sp />
        <field method="getInboundSession.getTenderRepositoryId" />
      </row>
      <horizontal_rule style="Strong" />
      <row>
        <field text="_paidIn" />
      </row>
      <row>
        <field text="_code" />
        <sp />
        <field method="getReasonCode" />
      </row>
      <row>
        <field method="getReasonCodeObject.getDescription" />
      </row>
      <iterator method="getTransactionNotes">
        <row>
          <field text="_comments" />
        </row>
        <region left_margin="2" right_margin="2">
          <field method="getNote" />
        </region>
      </iterator>
      <horizontal_rule style="Strong" />
      <iterator method="getTransactionLinks">
        <call method="getLinkedTransaction">
          <row>
            <field text="_transRefNum" />
            <field>
              <aggregate class="dtv.hardware.barcode.TranBarcodeDocBuilderField" />
            </field>
          </row>
        </call>
      </iterator>
      <row>
        <field text="_paidInAmount" />
        <field method="getAmount" formatter="Money" loc="-5" />
      </row>
      <row n="2" /> 
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_employeesignature" />
      </row>
      <!-- Begin BZ26893 -->
      <row n="2" /> 
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_caw_managersignature" />
      </row>
      <row n="2" /> 
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_payeesignature" />
      </row>
      <!-- End BZ26893 -->
      <!-- <horizontal_rule style="Double" /> --> <!-- BZ26893 -->
      <row />
      <sectionref>footer</sectionref>
      <sectionref>transaction_disclaimers</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="nonvoided_senditem">
      <row>
        <field method="getItemDescription" style="BOLD" />
      </row>
      <row>
      <!-- BEGIN BZ26270 -->
      <row>
        <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawRcptUpcLineItemBuilderField" />
        </field>
      </row>
      <!-- END BZ26270 -->
        <field method="getItem.getItemId" />
        <field method="getQuantity" formatter="Quantity" loc="14" />
        <field method="getBaseUnitPrice" formatter="Money" loc="-15" />
        <field method="getExtendedAmount" formatter="Money" loc="-3" />
        <field loc="-1">
          <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" />
        </field>
      </row>
      <row>
        <field method="getSerialNumber.trim" />
      </row>
      <sectionref>item_discounts</sectionref>
      <sectionref>item_comments</sectionref>
    </section>

    <section name="AGiftReceipt">
         <call method="getTransaction">
           <sectionref>GiftReceiptHeaderTop</sectionref>
         </call>
         <row />
         <row align="C" charsize="X2HW">
           <field text="_rcptGiftForYou" style="BOLD" />
         </row>
         <!-- Begin BZ26893 -->
         <row style="STRONGUNDERLINE">
           <field text="_item" />
           <!-- <field text="_qty" loc="14" /> -->
           <!-- <field text="_price" loc="-10" /> -->
           <field text="_caw_qty" align="R" loc="29" />
           <field align="R" >
             <aggregate class="caw.pos.common.rcpt.CawItemHeaderBuilderField" /> <!-- BZ28688-->
           </field>
         </row>
         <!-- End BZ26893 -->
         <iterator>
           <sectionref>AGiftReceiptLine</sectionref>
         </iterator>
         <horizontal_rule style="Double" />
         <call method="getTransaction">
           <sectionref>AGiftFooter</sectionref>
         </call>
         <sectionref>GiftReceiptCopyLabel</sectionref>
         <sectionref>training</sectionref>
         <sectionref>page_break</sectionref>
    </section>
    
    <!-- Begin BZ26893 -->
    <section name="cawIsNotSlash">
     <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" inverted="true"/>
       <row>
        <field method="getItemId" />
         <!-- Please see the comments in SkipEncodedPriceCondition for details why this condition is here. -->
        <condition class="dtv.pos.register.giftreceipt.SkipEncodedPriceCondition" inverted="true" />
        <field method="getFinalPrice" formatter="EncodedPrice" align="R" loc="-3" />
      </row>
      
      <row>
        <field method="getItemId" />
         <!-- Please see the comments in SkipEncodedPriceCondition for details why this condition is here. -->
        <condition class="dtv.pos.register.giftreceipt.SkipEncodedPriceCondition" />
        <field text="_na" align="R" loc="-3" />
      </row>
    </section>
    <!-- End BZ26893 -->
    <!-- Begin BZ26893 -->
    <section name="cawIsSlash">
     <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" />
       <row>
        <field method="getItemId" />
         <!-- Please see the comments in SkipEncodedPriceCondition for details why this condition is here. -->
        <condition class="dtv.pos.register.giftreceipt.SkipEncodedPriceCondition" inverted="true" />
        <field text="/" />
        <field>
          <aggregate class="caw.pos.common.rcpt.CawRcptUpcLineItemBuilderField" />
        </field>
        <field method="getFinalPrice" formatter="EncodedPrice" align="R" loc="-3" />
      </row>
      
      <row>
        <field method="getItemId" />
         <!-- Please see the comments in SkipEncodedPriceCondition for details why this condition is here. -->
        <condition class="dtv.pos.register.giftreceipt.SkipEncodedPriceCondition" />
        <field text="/" />
        <field >
          <aggregate class="caw.pos.common.rcpt.CawRcptUpcLineItemBuilderField" />
        </field>
        <field text="_na" align="R" loc="-3" />
      </row>
    </section>
    <!-- End BZ26893 -->
    <section name="AGiftReceiptLine">
      <!-- Begin BZ26893 -->
      <row>
      <condition method="getQuantity" comparison="EQUAL" value="1" /> 
        <field method="getDescription" style="BOLD"  align="L" />
      </row>
      <row>
      <condition method="getQuantity" comparison="NOT_EQUAL" value="1" /> 
        <field method="getDescription" style="BOLD"  align="L" />
        <sp /> 
        <field method="getQuantity" formatter="Quantity" align="L" loc="26"/> 
      </row>
       <sectionref>cawIsSlash</sectionref>
       <sectionref>cawIsNotSlash</sectionref>
       <!-- End BZ26893 -->
      <sectionref>GiftReceiptPriceBarcode</sectionref>
      <row />
    </section>
    
    <section name="AGiftFooter">
      <sectionref>trans_barcode</sectionref>
    </section>
    
    <!--BZ26207 Work order receipt: begin work order session -->
    <section name="WORK_ORDER_ACCOUNT">
      <sectionref>work_order_header</sectionref>
      <sectionref>work_order_title</sectionref>
      <sectionref>WO_CUSTOMER_DETAILS</sectionref>
      <sectionref>WO_LOYALTY_INFO</sectionref>
      <sectionref>WORK_ORDER_NUMBER</sectionref>
      <sectionref>work_order_items</sectionref>
      <sectionref>wo_account_info</sectionref>
      <sectionref>wo_subTotals</sectionref>
      <sectionref>wo_tax</sectionref>
      <sectionref>wo_totals</sectionref>
      <sectionref>wo_tenders</sectionref>
      <sectionref>wo_change</sectionref>
      <call method="getCurrentTransaction">
        <sectionref>YouSavedMessage</sectionref>
        <sectionref>YouCouldSavedMessage</sectionref>
      </call>
      <sectionref>TaxExemptInfo</sectionref>
      <sectionref>SALE_DISCLAIMER_DB_WO</sectionref> <!-- BZ33655 -->
      <sectionref>DONATION_FOOTER_MESSAGE</sectionref>
      <sectionref>verbiageGiftCardRedeem</sectionref>
      <sectionref>marcus_quote_wo</sectionref> <!-- BZ32067, BZ33655 -->
      <sectionref>wo_footer_cust_copy</sectionref>
      <!-- <sectionref>AUTO_RENEWAL</sectionref> --><!-- BZ45487 -->
      <call method="getCurrentTransaction">
        <sectionref>trans_barcode</sectionref>
      </call>
      <sectionref>system_mode</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>LOCAL.CUST_COPY_FOOTER</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    
    <section name="WORK_ORDER_MAIN_STORE">
      <sectionref>work_order_header</sectionref>
      <sectionref>work_order_title</sectionref>
      <sectionref>CAW_STORE_COPY_HEADER_DB</sectionref> <!-- BZ27026-BZ27057-BZ27058, BZ30085-->
      <sectionref>WO_CUSTOMER_DETAILS</sectionref>
      <sectionref>WO_LOYALTY_INFO</sectionref>
      <sectionref>WORK_ORDER_NUMBER</sectionref>
      <sectionref>work_order_items</sectionref>
      <sectionref>wo_account_info</sectionref>
      <sectionref>wo_subTotals</sectionref>
      <sectionref>wo_tax</sectionref>
      <sectionref>wo_totals</sectionref>
      <sectionref>storecopy_wo_tenders</sectionref><!-- BZ-27057 -->
      <sectionref>wo_change</sectionref>
      <sectionref>DONATION_FOOTER_MESSAGE</sectionref>
      <sectionref>wo_footer_cust_copy</sectionref>
      <call method="getCurrentTransaction">
        <sectionref>trans_barcode</sectionref>
      </call>
      <sectionref>system_mode</sectionref>
      <sectionref>CAW_STORE_COPY_FOOTER_DB</sectionref> <!-- BZ27026-BZ27057 , BZ30085 -->
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>WO_CUST_ACCT_SIGNATURE</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <section name="work_order_header">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction">
        <call method="getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
          <sectionref>cust_account_store_location</sectionref>
        </call>
        <sectionref>LOCAL.NON_FISCAL</sectionref>
        <sectionref>transaction_header_info</sectionref>
        <!-- BEGIN BZ30154 -->
        <sectionref>SALES_PERSON_INFO</sectionref>
        <sectionref>transaction_flight_information</sectionref>
        <!-- END BZ30154 -->
      </call>
    </section>

    <section name="work_order_title">
      <row/>
      <row align="C">
      <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED" inverted="true"/>
        <field style="BOLD">
          <aggregate class="caw.pos.common.rcpt.CawWorkOrderTitleBuilderField" />
        </field>
      </row>
      <row align="C">
        <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED"/>
        <field text="_woRefundTrans" style="BOLD"/>
      </row>
      <row align="C">
        <condition class="caw.pos.docbuilding.conditions.CawWorkOrderRefundStatusCondition"/> <!-- BZ27163 -->
        <field>
          <aggregate class="caw.pos.common.rcpt.CawWorkOrderReasonCodeBuilder" />
        </field>
      </row>
      <!-- <row/> --> <!-- BZ28664 -->
    </section>

    <section name="work_order_items">
      <row/>
      <sectionref>wo_item_header</sectionref>
      <sectionref>wo_item_details</sectionref>
    </section>

    <section name="WO_CUSTOMER_DETAILS">
      <condition method="getAccount.getParty" comparison="NOT_NULL" />
      <row>
        <field method="getAccount.getParty" formatter="BasicName" />
      </row>
    </section>

    <section name="WO_LOYALTY_INFO">
      <call method="getCurrentTransaction">
        <sectionref>LOYALTY_INFO_WO</sectionref> <!-- BZ26893, BZ28664-->
      </call>
    </section>
    
    <!-- Begin BZ28664 -->
    <section name="LOYALTY_INFO_WO">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <condition class="caw.pos.common.rcpt.CawMembershipRcptCondition" />
      <iterator method="getLoyaltyCardObject.getLoyaltyAccounts">
        <row>
          <field>
            <aggregate class="caw.pos.common.rcpt.CawMembershipNameDocBuilderField" />
          </field>
           <sp />
          <field method="getAccountId" align="L" loc="14" />
          <sp />
          <field method="getExpirationDate" align="L" loc="28" formatter="DateExpirationShort"/> <!-- BZ27937 -->
           <sp />
          <field>
            <aggregate class="caw.pos.common.rcpt.CawMembershipStatusDocBuilderField" />
          </field>
        </row>
      </iterator>
    </section>
    <!-- End BZ28664 -->

    <section name="WORK_ORDER_NUMBER">
      <row>
        <field text="_cawWorkOrderReceiptAcctId" />
        <sp />
        <field method="getWorkOrderAccount.getCustAccountId" />
      </row>
    </section>

    <!-- Begin BZ26893 copied and corrected -->
    <section name="wo_item_header">
       <call method="getCurrentTransaction"> <!-- BZ28767 -->
         <row style="STRONGUNDERLINE">
          <field text="_item" />
          <field text="_caw_qty" align="R" loc="29" />
          <field align="R" >
            <aggregate class="caw.pos.common.rcpt.CawItemHeaderBuilderField" /> <!-- BZ28107 -->
          </field>
         </row>
       </call>
    </section>
    <!-- End BZ26893 -->

    <section name="wo_item_details">
      <iterator method="getCurrentTransaction.getSaleLineItems">
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.VoidedCustomerAccountDetailLineCondition" />
        <sectionref>nonvoided_item_wo</sectionref>
      </iterator>
    </section>

    <section name="wo_return_reason_code">
      <condition method="getReturn" comparison="EQUAL">
        <Parameter name="VALUE">
          <param_value dtype="Boolean">true</param_value>
        </Parameter>
      </condition>
      <row>
        <field>
          <aggregate class="caw.pos.common.rcpt.CawWorkOrderReasonCodeBuilder" />
        </field>
      </row>
    </section>

    <section name="wo_account_info">
      <!-- Begin BZ26893 -->
      <row>
        <field text="_workOrderReceiptAcctTotal" loc="-14" />
        <field method="getAccount.getAccountTotal" formatter="Money" loc="-3" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED" inverted="true"/>
        <field text="_workOrderReceiptAcctDeposit" loc="-14" />
        <field method="getAccount.getAccountPayments" formatter="Money" loc="-3" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED"/>
        <field text="_workOrderReceiptAcctDeposit" loc="-14" />
        <field method="getCurrentTransaction.getAmountTendered" formatter="Money" loc="-3" /> <!--  BZ27288 changed -->
      </row>
      <row>
        <field text="_workOrderReceiptAcctBalance" loc="-14" />
        <field method="getAccount.getAccountBalance" formatter="Money" loc="-3" />
      </row>
      <!-- End BZ26893 -->
      <horizontal_rule style="Double" />
    </section>

    <section name="wo_subTotals">
      <!-- <row /> --> <!-- BZ28664 -->
      <row>
        <field text="_subtotal" align="R" loc="-15" />
        <field method="getCurrentTransaction.getSubtotal" formatter="Money" align="R" loc="-3" />
      </row>
    </section>

    <section name="wo_tax">
      <!-- <row /> --> <!-- BZ28664 -->
      <iterator>
        <impl dtype="Class">caw.pos.common.rcpt.CawWorkOrderTaxTotalIterator</impl>
        <condition method="getTaxAmount" comparison="NOT_BLANK" />
        <row>
          <field text="_taxText" align="L" loc="0" />
          <sp />
          <field method="getTaxGroupId" formatter="String" align="L" loc="4" />
          <sp />
          <field method="getTaxableAmount" formatter="Money" align="R" loc="-22" />
          <sp />
          <field text="_atSymbol" align="R" loc="-20" />
          <sp />
          <field method="getTaxPercentage" formatter="Percent" align="R" loc="-12" />
          <sp />
          <field method="getTaxAmount" formatter="Money" align="R" loc="-3" />
        </row>
      </iterator>
    </section>

    <section name="wo_totals">
      <!-- <row /> --> <!-- BZ28664 -->
      <call method="getCurrentTransaction">
        <row>
          <field style="BOLD" align="R" loc="-15">
            <aggregate class="dtv.pos.common.rcpt.TransactionTotalTextDocBuilderField" />
          </field>
          <field method="getTotal" style="BOLD" formatter="Money" align="R" loc="-3" />
        </row>
        <sectionref>rounding_info</sectionref>
        <sectionref>foreign_currency_separator_line</sectionref>
        <iterator class="dtv.pos.tender.foreigncurrency.ForeignCurrencyTenderIterator">
          <sectionref>foreigncurrency_total</sectionref>
        </iterator>
      </call>
    </section>

    <section name="wo_tenders">
      <horizontal_rule style="Double" />
      <iterator method="getCurrentTransaction.getTenderLineItems">
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.IncludeTenderStateCondition" value="CHANGE" inverted="true" />
        <condition class="dtv.pos.docbuilding.conditions.IncludeTenderTypeCondition" type="ACCOUNT_CREDIT" inverted="true" />
        <sectionref>nonchange_tender</sectionref>
      </iterator>
      <horizontal_rule style="Double" />
    </section>

    <!-- Begin BZ-27057 -->
    <section name="storecopy_wo_tenders">
      <horizontal_rule style="Double" />
      <iterator method="getCurrentTransaction.getTenderLineItems">
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.IncludeTenderStateCondition" value="CHANGE" inverted="true" />
        <condition class="dtv.pos.docbuilding.conditions.IncludeTenderTypeCondition" type="ACCOUNT_CREDIT" inverted="true" />
        <sectionref>storecopy_nonchange_tender</sectionref>
      </iterator>
      <horizontal_rule style="Double" />
    </section>
    <!-- End BZ-27057 -->
    
    <section name="wo_change">
      <call method="getCurrentTransaction">
        <iterator method="getTenderLineItems">
          <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
          <condition class="dtv.pos.docbuilding.conditions.IncludeTenderStateCondition" value="CHANGE" />
          <condition class="dtv.pos.docbuilding.conditions.IncludeTenderTypeCondition" type="ACCOUNT_CREDIT" inverted="true" />
          <sectionref>nonvoided_change_tender</sectionref>
        </iterator>
        <sectionref>zero_change_tender</sectionref>
      </call>
    </section>

    <section name="WO_CUST_ACCT_ID_BARCODE">
      <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="OPEN"/>
      <barcode symbology="Code 93">
        <field method="getAccount.getCustAccountId" />
      </barcode>
    </section>

    <section name="wo_footer_cust_copy">
    <!-- <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="OPEN" inverted="true"/> --> <!-- BZ28108 -->
      <call method="getCurrentTransaction">
        <sectionref>soldItemsCount</sectionref>
        <sectionref>returnedItemsCount</sectionref>
        <sectionref>LOCAL.ITEMS_COUNT</sectionref>
        <sectionref>system_mode</sectionref>
      </call>
      <sectionref>wo_DepositItemsCount</sectionref> <!-- BZ28108 -->
      <sectionref>wo_RefundItemsCount</sectionref> <!-- BZ28108 -->
    </section>

    <!-- Begin BZ28108 -->
    <section name="wo_DepositItemsCount">
     <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="OPEN"/>
        <call method="getCurrentTransaction">
          <row>
            <field text="_soldItemCount" />
            <sp />
            <field formatter="Quantity">
             <aggregate class="caw.pos.common.rcpt.CawWorkOrderItemsCount" />
            </field>
          </row>
        </call>
    </section>
    
    <section name="wo_RefundItemsCount">
     <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED"/>
        <call method="getCurrentTransaction">
          <row>
            <field text="_returnedItemCount" />
            <sp />
            <field formatter="Quantity">
             <aggregate class="caw.pos.common.rcpt.CawWorkOrderItemsCount" />
            </field>
          </row>
       </call>
    </section>
    <!-- End BZ28108 -->
    
    <section name="WO_CUST_ACCT_SIGNATURE">
      <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED"/>  <!-- BZ27026 -->
      <condition method="getAccount.getParty" comparison="NOT_NULL" />
      <row>
        <field method="getAccount.getParty" formatter="BasicName" />
      </row>
      <call method="getAccount.getParty.getPrimaryLocaleInformation" comparison="NOT_NULL">
        <row>
          <field>
            <aggregate class="caw.pos.common.rcpt.CawWorkOrderRetrieveCustomerInfoDocBuilder" />
          </field>
        </row>
      </call>
      <row n="2"/> <!-- BZ26893 -->
      <horizontal_rule>
        <field text="_woCustomerSign" />
      </horizontal_rule>
      <row n="3"/>
      <horizontal_rule>
        <field text="_woCashierSign" />
      </horizontal_rule>
      <row n="3"/>
      <horizontal_rule>
        <field text="_woMODSign" />
      </horizontal_rule>
    </section>

    <section name="nonvoided_item_wo">
      <condition class="dtv.pos.docbuilding.conditions.AllowDonationLineItemOnReceipts" />
      <!-- Begin BZ26893 -->
      <row>
        <field method="getTaxGroupId" style="BOLD" />
        <sp />
        <field method="getItemDescription" style="BOLD" align="L" />
        <sp /> 
        <field align="L" loc="26">
            <aggregate class="caw.pos.common.rcpt.CawRcptWOLineItemQtyBuilderField" />
        </field>
      </row>
      
      <row>
        <field method="getItem.getItemId" />
         <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" />
         <field text="/" align="L"/>
         <field>
          <aggregate class="caw.pos.common.rcpt.CawRcptUpcLineItemBuilderField" />
         </field>
         <field method="getExtendedAmount" formatter="Money" align="R" loc="-3" /> <!-- BZ26893 , BZ24747 & BZ24745, BZ27256-->
          <field loc="-1"> 
              <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" />
         </field> 
      </row>
      
       <row>
        <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" inverted="true"/>
         <field method="getItem.getItemId" />
         <field method="getExtendedAmount" formatter="Money" align="R" loc="-3" /> <!-- BZ26893 , BZ24747 & BZ24745, BZ27256-->
         <field loc="-1"> 
              <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" /> 
         </field> 
      </row>
       <!-- End BZ26893 -->
      
      <!-- Begin BZ28201 -->
      <region left_margin="3">
       <condition class="caw.pos.common.rcpt.CawItemPropeptiesOnReceiptCondition" />
        <field >
          <aggregate class="caw.pos.common.rcpt.CawItemPropertiesBuilderField" />
        </field>
      </region>
      <!-- End BZ28201 -->
      
      <row>
        <condition method="getItem.getDimension1" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="1" />
        </field>
      </row>
      <row>
        <condition method="getItem.getDimension2" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="2" />
        </field>
      </row>
      <row>
        <condition method="getItem.getDimension3" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="3" />
        </field>
      </row>
      <sectionref>item_serial_number</sectionref> <!-- BZ23607 -->
      <sectionref>caw_item_cust_group</sectionref>
      <sectionref>caw_item_cust_group_NoCustomer</sectionref> <!-- BZ25188 -->
      <sectionref>LOCAL.NONVOIDED_ITEM</sectionref>
      <sectionref>kit_components</sectionref>
      <sectionref>item_inventory_locations</sectionref>
      <sectionref>return_proration</sectionref>
      <sectionref>return_reason_code</sectionref> <!-- BZ27915 -->
      <sectionref>item_discounts</sectionref>
      <sectionref>return_verification</sectionref> <!-- BZ27915 -->
      <sectionref>layaway_info</sectionref>
      <sectionref>SP_ORDER_INFO</sectionref>
      <sectionref>WARRANTY_COVERAGE</sectionref>
      <sectionref>WARRANTY_LINE</sectionref>
      <sectionref>registry_info</sectionref>
      <sectionref>item_comments</sectionref>
      <!-- <row /> --> <!-- BZ26893, BZ28488 -->
    </section>
    <!-- BZ26207 Work order receipt: end work order session -->
    
    <!-- Begin 26978 -->
    <section name="caw_gift_card_active_reload_section">
      <sectionref>caw_gift_card_active_reload_header_section</sectionref>
      <sectionref>caw_gift_card_active_reload_sale_person_section</sectionref>
      <sectionref>caw_gift_card_active_reload_content_section</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <section name="caw_gift_card_active_reload_header_section">
      <sectionref>logo</sectionref>
      <row />
      <row align="C">
        <field method="getStoreName" />
      </row>
      <row align="C">
        <field method="getStoreAddress" />
      </row>
      <row align="C">
        <field method="getStoreLocation" />
      </row>
      <horizontal_rule /> 
      <row>
        <field text="_str" />
        <field text="_reg" align="L" loc="6" />
        <field text="_csi" align="L" loc="11" />
        <field text="_tkt" align="L" loc="19" />
        <field text="_datetime" align="L" loc="27" />
      </row>
      
      <row>
        <field method="getStoreNbr" />
        <field align="L" loc="6" >
            <field method="getRegisterNumber" />
        </field>
        <field method="getTranCashierId" align="L" loc="11" />
        <field method="getTranId" align="L" loc="19" />
        <!-- Begin BZ26893 -->
        <field align="L" loc="27"><!-- BZ24191 -->
          <aggregate class="caw.pos.common.rcpt.CawDateTimeDocBuilderField" />
        </field>
        <!-- End BZ26893 -->
      </row> 
      <row />
    </section>
    <section name="caw_gift_card_active_reload_sale_person_section">
      <!-- Sale person -->
      <row>
        <field text="_salesperson" />
        <sp />
        <field method="getTranCashierId" />
      </row>
      <row />
    </section>
    <section name="caw_gift_card_active_reload_content_section">
      <!-- Begin BZ27182 -->
      <!-- *GIFT CARD RECEIPT* -->
      <row align="C">
        <field text="_cawGiftCardReceipt" style="BOLD"/>
      </row>
       <row />
       <!-- End BZ27182 -->
       <!-- Value Added -->
      <row>
        <!-- Begin BZ27182 -->
        <field method="getValueAddText" loc="3"/>
        <!-- End BZ27182 -->
        <sp />
        <field method="getAmount" formatter="Money"/>
      </row>
      <!-- Card number -->
      <row>
        <field method="getCardNumber" loc="3" />
      </row>
      <!-- Auth # -->
      <row>
        <field text="_cawGiftCardAuth" loc="3"/>
        <sp />
        <field method="getAuthorizationCode" />
      </row>
      <!-- Transaction Type -->
      <row>
        <field text="_cawGiftCardTransactionType" loc="3"/>
        <sp />
        <field method="getTransactionType" />
      </row>
      <!-- Trace Number -->
      <row>
        <field text="_cawGiftCardTraceNumber" loc="3"/>
        <sp />
        <field method="getTraceNumber" />
      </row>
      <!-- New Balance -->
      <row>
        <field text="_cawGiftCardNewBalance" loc="3"/>
        <sp />
        <field method="getBalance" formatter="Money" />
      </row>
    </section>
    <!-- End 26978 -->
    
    <!-- BEGIN BZ29292 -->
    <section name="transaction_header_information_shopping_pass">
        <row />
        <row>
            <field text="_cawShoppingPassStore" align="L"/>
            <field method="getRetailLocationId" align="L"/>
            <field text="_cawShoppingPassRegister" align="L" loc="25"/>
            <field method="getWorkstationId" align="L"/>
        </row>
        <row>
            <field text="_cawShoppingPassDate" align="L"/>
            <field method="getBeginDateTimestamp" align="L" formatter="DateMediumShortYear"/>
            <field text="_cawShoppingPassTime" align="L" loc="25"/>
            <field method="getBeginDateTimestamp" align="L" formatter="InputTimeShort"/>
        </row>
        <row>
            <field text="_cawShoppingPassTicket" align="L"/>
            <field method="getTransactionSequence" align="L"/>
            <field text="_cawShoppingPassCashier" align="L" loc="25"/>
            <field method="getTranCashierId" align="L"/>
        </row>
    </section>
    
    <section name="caw_congratulations_shopping_pass">
        <row />
        <region align="C">
         <field method="getCawGoodSamCongrats" />
        </region>
    </section>
    
    <section name="caw_sale_person_shopping_pass">
        <row>
            <field text="_cawShoppingPassFirstName" align="L"/>
            <field method="getFirstName" align="L" loc="25"/>
        </row>
        <row>
            <field text="_cawShoppingPassLastName" align="L"/>
            <field method="getLastName" align="L" loc="25"/>
        </row>
        <row>
            <field text="_cawShoppingPassCredit" align="L"/>
            <field text="_cawShoppingPassCreditStatus" align="L" loc="25"/>
        </row>
        <row>
            <field text="_cawShoppingPassCreditLimit" align="L"/>
            <!-- BEGIN BZ29619-->
            <field text="$" align="L" loc="25"/>
            <field method="getCreditLimit" align="L" loc="26"/>
            <!-- END BZ29619-->
        </row>
        <sectionref>caw_shopping_pass_temporary_limit</sectionref> <!-- BZ29454 -->
        <sectionref>caw_APR_shopping_pass</sectionref> <!-- BZ29361, BZ29454 -->
        <!-- BEGIN BZ29454 -->
        <row />
        <region>
            <condition method="getCardType" comparison="EQUAL" value="1" /> <!-- BZ29717 -->
            <field method="getCawGoodSamNote1" />
        </region>
        <!-- END BZ29454 -->
    </section>
    
    <!-- BEGIN BZ29361, BZ29454 -->

    <section name="caw_shopping_pass_temporary_limit">
        <condition class="caw.pos.common.rcpt.CawShoppingPassTempLimitCondition" /> 
        <row>
            <field text="_cawShoppingPassTemporaryLimit" align="L"/>
            <!-- BEGIN BZ29619-->
            <field text="$" align="L" loc="25"/>
            <field method="getTempCreditLimit" align="L" loc="26"/>
            <!-- END BZ29619-->
        </row>
    </section>

    <section name="caw_APR_shopping_pass">
            <condition class="caw.pos.common.rcpt.CawShoppingPassAPRCondition" /> 
            <row>
            <field text="_cawShoppingPassPurchaseAPR" align="L"/>
            <!-- BEGIN BZ29619-->
            <field align="L" loc="25">
                <aggregate class="caw.pos.common.rcpt.CawShoppingPassAPRDocBuilderField" />
            </field>
            <!-- END BZ29619-->
        </row>
    </section>
    <!-- END BZ29361, BZ29454 -->

    <section name="caw_summary_shopping_pass"><!-- BZ29361 -->
        <region>
            <field method="getCawGoodSamFooter" />
        </region>
    </section>
    
    <section name="caw_footer_date_shopping_pass">
      <condition method="getCardType" comparison="EQUAL" value="1" /> <!-- BZ29717 -->
      <row align="C">
         <field>
            <aggregate class="caw.pos.common.rcpt.CawShoppingPassDocBuilderField" />
         </field>
      </row>
      <row /> <!-- BZ29717 -->
    </section>
    <!-- END BZ29292 -->

    <!-- BEGIN BZ31772 -->
    <section name="TaxExemptInfo">
      <condition class="dtv.pos.docbuilding.conditions.TaxExemptCondition" />
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <row align="C">
        <field text="_taxExemptInfo" />
      </row>
      <row />
      <sectionref>TaxExemptCustInfo</sectionref>
      <sectionref>TaxExemptionsInfo</sectionref>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    <!-- END BZ31772 -->
    
    <!-- BEGIN BZ33315, BZ33655 -->
    <section name="RCPT_RETURN_POLICY_DB_WO" dbRef="CW_RETURN_POLICY::DEFAULT::getCurrentTransaction.getTransactionDate" />
    <section name="caw_return_policy_wo">
      <sectionref>RCPT_RETURN_POLICY_DB_WO</sectionref>
    </section>
    
     <section name="RCPT_RETURN_POLICY_DB" dbRef="CW_RETURN_POLICY::DEFAULT::getTransactionDate" />
    <section name="caw_return_policy">
      <sectionref>RCPT_RETURN_POLICY_DB</sectionref>
    </section>
    
    <!-- Begin BZ-37876 -->
    <section name="RCPT_RETURN_POLICY_DB_ORDER" dbRef="CW_RETURN_POLICY::DEFAULT::getTransaction.getTransactionDate" />
    <section name="caw_return_policy_order">
      <sectionref>RCPT_RETURN_POLICY_DB_ORDER</sectionref>
    </section>
    
    <section name="CW_MARKET_MESS_DB_ORDER" dbRef="CW_MARKET_MESS::DEFAULT::getTransaction.getTransactionDate" />
    <section name="caw_marketing_mess_order">
      <sectionref>CW_MARKET_MESS_DB_ORDER</sectionref>
    </section>
    <!-- End BZ-37876 -->
    
    <section name="CW_MARKET_MESS_DB" dbRef="CW_MARKET_MESS::DEFAULT::getTransactionDate" />
    <section name="caw_marketing_mess">
      <sectionref>CW_MARKET_MESS_DB</sectionref>
    </section>
    
    <section name="CW_MARKET_MESS_DB_WO" dbRef="CW_MARKET_MESS::DEFAULT::getCurrentTransaction.getTransactionDate" />
    <section name="caw_marketing_mess_wo">
      <sectionref>CW_MARKET_MESS_DB_WO</sectionref>
    </section>
    <!-- END BZ33315, BZ33655 -->
    
    <!-- BEGIN BZ32067, BZ32519 -->
    <section name="MARCUS_QUOTE_DB" dbRef="MARCUS_MESSAGE::DEFAULT::getTransactionDate" /><!-- BZ30085: Update the method get transaction date.-->
    <section name="marcus_quote">
      <row/>
      <sectionref>MARCUS_QUOTE_DB</sectionref>
      <row/>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    <!-- END BZ32519 -->
    
    <!-- Begin BZ-37876 -->
    <section name="MARCUS_QUOTE_DB_ORDER" dbRef="MARCUS_MESSAGE::DEFAULT::getTransaction.getTransactionDate" />
    <section name="marcus_quote_order">
      <row/>
      <sectionref>MARCUS_QUOTE_DB_ORDER</sectionref>
      <row/>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
    </section>
    <!-- End BZ-37876 -->

    <!-- BEGIN BZ33655 -->
     <section name="MARCUS_QUOTE_DB_WO" dbRef="MARCUS_MESSAGE::DEFAULT::getCurrentTransaction.getTransactionDate" /><!-- BZ30085: Update the method get transaction date.-->
     <section name="marcus_quote_wo">
       <row/>
       <sectionref>MARCUS_QUOTE_DB_WO</sectionref>
       <row/>
       <row align="C">
         <field text="********************************************" style="BOLD" />
       </row>
     </section>
    <!-- END BZ32067, BZ33655 -->
    <!-- Begin BZ34116 -->
    <section name="BounceBackCouponIssued">
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <sectionref>training</sectionref>
      <row />
      <row align="C">
        <field text="_rcptTransactionLine" />
      </row>
      <row />
      <row align="C">
        <field text="_rcptBounceBackDateRedeemed" />
      </row>
      <row />
      <row>
        <field text="--------------------------------------------" />
      </row>
      <row />
      <!-- Begin BZ34116 -->
      <row align="C" charsize="X2H">
        <field style="BOLD">
          <aggregate class="caw.pos.document.bounceback.CawBounceBackCouponCodeField" /> 
        </field>
      </row>
      <!-- <row align="C">
        <field method="getDocument.getEffectiveDate" formatter="DayAndMonth" />
        <field text="-" />
        <field method="getDocument.getExpirationDate" formatter="DayAndMonth" />
      </row> -->
      <!-- End BZ34116 -->
      <row n="2" />
      <region align="C">
        <field formatter="Percent">
          <aggregate class="caw.pos.document.bounceback.CawBounceBackDiscountPercentField" />
        </field>
      </region>
      <row />
      <!-- <sectionref>TwentyFiveDollar</sectionref>  -->
      <row align="C">
        <field method="getDocument.getMaxAmount" style="BOLD" formatter="Money" />
      </row>
      <row />
      <region align="C">
        <field formatter="DateShort">
          <aggregate class="dtv.pos.document.bounceback.BounceBackCouponValidDateTextField" />
        </field>
      </region>
      <row />
      <sectionref>BOUNCE_BACK_2_DB</sectionref>
      <row />
      <sectionref>BOUNCE_BACK_3_DB</sectionref>
      <row />
      <sectionref>BOUNCE_BACK_4_DB</sectionref>
      <row />
      <sectionref>BOUNCE_BACK_5_DB</sectionref>
      <row />
      <sectionref>BOUNCE_BACK_6_DB</sectionref>
      <row n="2" />
      <sectionref>training</sectionref>
      <sectionref>bounceback_barcode</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <!-- End BZ34116 -->
    <!-- BEGIN BZ37202 -->
    <section name="ORDER_ACCOUNT">
      <sectionref>logo</sectionref>
      <row />
      <call impl="dtv.pos.order.RetailLocationCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <!--<sectionref>ORDER_HEADER_DB</sectionref> --> <!-- BZ38029 -->
      <sectionref>ORDER_CANCEL</sectionref>
      <sectionref>ORDER_TRANS_HEADER</sectionref>
      <sectionref>CAW_ORDER_TITLE_HEADER</sectionref>
      <sectionref>CAW_ORDER_CUST_MEMBERSHIP</sectionref>
      <sectionref>CAW_ORDER_ID</sectionref>
      <sectionref>CAW_ORDER_LINE_FULFILLMENT</sectionref><!-- BEGIN BZ42307 - Update receipt -->
      <sectionref>CAW_ORDER_ITEM_HEADER</sectionref>
      <sectionref>ORDER_LINES</sectionref>
      <sectionref>ORDER_SHIPPING_FEES</sectionref>
      <sectionref>CUST_ACCT_PAYMENT_HEADER</sectionref>
      <sectionref>CAW_ORDER_PAYMENTS</sectionref><!-- BEGIN BZ42307 - Update receipt -->
      <sectionref>ORDER_SUMMARY</sectionref>
      <!-- BEGIN BZ37621 -->
      <sectionref>CawOrderYouSavedMessage</sectionref>
      <sectionref>CawOrderBrokerYouSavedMessage</sectionref>
      <sectionref>SALE_DISCLAIMER_DB_ORDER</sectionref> <!-- BZ-37876 -->
      <sectionref>DONATION_FOOTER_MESSAGE</sectionref>
	  <!--  BEGIN BZ37884 -->
	  <!--  <sectionref>cawOrderverbiageGiftCardRedeem</sectionref> -->
	  <!--  END BZ37884 -->
      <sectionref>marcus_quote_order</sectionref> <!-- BZ-37876 -->
      <sectionref>caw_footer_cust_copy_order</sectionref> <!-- BZ37954 -->
      <!-- <sectionref>CAW_ORDER_ID_BARCODE</sectionref> --> <!-- BZ37954 -->
      <!-- <sectionref>AUTO_RENEWAL</sectionref> --> <!-- BZ24383, BZ45487 -->
      <sectionref>system_mode</sectionref>
      <!-- END BZ37621 -->
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    
    <!-- BEGIN BZ37954 -->
    <section name="caw_footer_cust_copy_order">
      <sectionref>soldItemsCount</sectionref>
      <!-- <sectionref>caw_returnedItemsCount</sectionref> BZ37884-->
      <sectionref>LOCAL.ITEMS_COUNT</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>caw_trans_barcode_order</sectionref>
    </section>
    <!-- 
    BEGIN37884
    <section name="caw_returnedItemsCount">
      <condition class="caw.pos.docbuilding.conditions.CawCheckCancelOrderTypeCondition" />
      <row>
        <field text="_returnedItemCount" />
        <sp />
        <field formatter="Quantity">
          <aggregate class="dtv.pos.common.rcpt.ReturnedItemsCountDocBuilderField" />
        </field>
      </row>
    </section>
    END37884
    -->
    <section name="caw_trans_barcode_order"> 
      <!-- <condition class="caw.pos.docbuilding.conditions.CawCheckCancelOrderTypeCondition" inverted="true" /> BZ37884-->
      <barcode symbology="Code 93">
        <field>
          <aggregate class="caw.hardware.barcode.CawOrderTranBarcodeDocBuilderField" />
        </field>
      </barcode>
    </section>
    <!--  BEGIN BZ37884
    <section name="CAW_ORDER_ID_BARCODE">
      <condition class="caw.pos.docbuilding.conditions.CawCheckCanCelOrderTypeCondition" />
      <row />
      <barcode symbology="Code 93">
        <field method="getOrder.getOrderId" />
      </barcode>
    </section> 
    END BZ37884
    -->
   
    <!--  BEGIN BZ37884	
    <section name="cawOrderverbiageGiftCardRedeem">
      <condition class="caw.pos.docbuilding.conditions.CawOrderIncludeTenderTypeCondition" type="VOUCHER" />
      <region>
        <field text="_verbiageRedeemGiftCardExchange" />
      </region>
    </section>
    END BZ37884
    -->
    <section name="ORDER_PICK_TICKET">
      <sectionref>logo</sectionref>
      <row />
      <call impl="dtv.pos.order.RetailLocationCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>ORDER_PICK_TICKET_HEADER_DB</sectionref>
      <sectionref>ORDER_PICK_TICKET_HEADER</sectionref>
      <sectionref>CAW_ORDER_TITLE_HEADER</sectionref>
      <sectionref>CAW_ORDER_CUST_MEMBERSHIP</sectionref>
      <sectionref>CAW_ORDER_ID</sectionref>
      <sectionref>CAW_ORDER_ORIGINATING_INFOR</sectionref> <!-- BZ38010 -->
      <sectionref>ORDER_ID_BARCODE</sectionref>
      <row />
      <sectionref>CAW_ORDER_ITEM_HEADER</sectionref>
      <sectionref>ORDER_PICK_TICKET_ITEMS</sectionref>
      <sectionref>ORDER_PICK_TICKET_FOOTER</sectionref>
      <sectionref>ORDER_PICK_TICKET_FOOTER_DB</sectionref>
      <sectionref>PickTicketLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    
    <!-- BEGIN BZ38010 -->  
    <section name="CAW_ORDER_ORIGINATING_INFOR"> 
    <condition method="getOrder" comparison="NOT_NULL" />    
      <row>
        <field text="_originatingStore"></field>
        <field text=" "></field>
        <field method="getOrder.getOrderLocationId"/>
      </row>
      <row>
        <field text="_originatingAssociate"></field>
        <field text=" "></field>
        <field method="getOrder.getCreateUserId"/>
      </row>     
    </section>
    <!-- END BZ38010 -->
    
    <section name="ORDER_MAIN_STORE">
      <sectionref>logo</sectionref>
      <row />
      <call impl="dtv.pos.order.RetailLocationCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>ORDER_CANCEL</sectionref>
      <sectionref>ORDER_TRANS_HEADER</sectionref>
      <sectionref>CAW_ORDER_TITLE_HEADER</sectionref>
      <sectionref>CAW_ORDER_CUST_MEMBERSHIP</sectionref>
      <sectionref>CAW_ORDER_ID</sectionref>
      <sectionref>CAW_ORDER_LINE_FULFILLMENT</sectionref>
      <sectionref>CAW_ORDER_ITEM_HEADER</sectionref>
      <sectionref>ORDER_LINES</sectionref>
      <sectionref>ORDER_SHIPPING_FEES</sectionref>
      <sectionref>CUST_ACCT_PAYMENT_HEADER</sectionref>
      <sectionref>CAW_ORDER_PAYMENTS</sectionref><!-- BEGIN BZ42307 - Update receipt -->
      <sectionref>ORDER_SUMMARY</sectionref>
      <!-- <sectionref>ORDER_TERMS_DB</sectionref> BZ38077-->
      <sectionref>ORDER_SIGNATURE</sectionref>
      <sectionref>ORDER_FOOTER</sectionref>
      <sectionref>ORDER_CANCEL</sectionref>
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <!--BEGIN BZ 37382 -->
    <section name="order_signature_line_sign_in_receipt">
      <condition class="caw.pos.docbuilding.conditions.CawCheckIsSignedTypeCondition" />
      <row align="C">
        <field text="x_______________________________________" style="BOLD" />
      </row>
    </section>
    <section name="ORDER_SIGNATURE">
      <condition class="caw.pos.docbuilding.conditions.CawCheckOrderTypeCondition" /> <!-- BZ37709 -->
      <row n="6" />
      <sectionref>order_signature_line</sectionref>
      <sectionref>order_signature_line_sign_in_receipt</sectionref>
      <row>
        <field method="getOrder.getCustomer" formatter="BasicName" />
      </row>
    </section>
    
    <section name="order_signature_line">
      <signature>
        <field >
          <aggregate class="caw.pos.register.order.rcpt.CawSignatureBuiderOrderBrokerBuilder" />
        </field>
      </signature>
    </section>
    <!--END BZ 37382 -->
    <section name="CAW_ORDER_CUST_MEMBERSHIP">
      <call method="getTransaction">
        <sectionref>CAW_CUSTOMER_INFO</sectionref>
      </call>
    </section>
	<section name="ORDER_TRANS_HEADER">
      <call method="getTransaction">
        <sectionref>transaction_header_info</sectionref>
        <sectionref>order_sales_person_info</sectionref>
      </call>
      <row />
    </section>
    <section name="order_sales_person_info">
      <region >
        <field>
          <aggregate class="caw.pos.common.rcpt.CawTranSalespersonBuilderField" />
        </field>
      </region>
    </section>
    <section name="CAW_ORDER_ID">
      <row><field text="_orderId"></field>
      <field text=" "></field>
      <field method="getOrder.getOrderId"/>
      </row>
    </section>
    <section name="CAW_ORDER_TITLE_HEADER">
      <row/>
      <row align="C">
        <field style="BOLD">
      	  <aggregate class="caw.pos.common.rcpt.CawOrderHeaderBuilderField" />
        </field>
      </row>
      <row />
    </section>
    <section name="CAW_ORDER_ITEM_HEADER">
      <row style="STRONGUNDERLINE">
        <field text="_item" />
        <field text="_caw_qty" align="R" loc="29" />
        <field align="R" >
          <aggregate class="caw.pos.common.rcpt.CawItemHeaderBuilderField" />
        </field>
      </row>
    </section>
    <section name="ORDER_LINES">
      <iterator method="getOrder.getOrderLines">
      	<condition method="getQuantity" comparison="NOT_EQUAL" value="0" />
        <condition method="getVoid" comparison="FALSE" />
        <sectionref>CAW_ORDER_LINE_ITEMS</sectionref>
        <sectionref>ORDER_LINE_DISCOUNTS</sectionref>
        <sectionref>ORDER_LINE_SHIPPING_INFO</sectionref>
        <row />
      </iterator>
    </section>
    <section name="CAW_ORDER_LINE_ITEMS">
    <!-- BEGIN BZ38355 -->
      <row>
        <field style="BOLD">
          <aggregate class="caw.pos.order.CawOrderLineTaxField" />
        </field>
        <sp />
        <field method="getItem.getDescription" style="BOLD" align="L" />
        <sp /> 
        <field align="L" loc="26">
          <aggregate class="caw.pos.common.rcpt.CawRcptOrderLineItemQtyBuilderField" />
        </field>
      </row>
      <sectionref>pickup_item_with_upc</sectionref>
      <sectionref>pickup_item_without_upc</sectionref>
      <sectionref>order_item_unavailable</sectionref><!-- BZ46879 -->
      <!-- END BZ38355 -->
      <region left_margin="3">
        <condition class="caw.pos.common.rcpt.CawItemPropeptiesOnReceiptCondition" />
        <field >
          <aggregate class="caw.pos.common.rcpt.CawItemPropertiesBuilderField" />
        </field>
      </region>
      <row>
        <condition method="getShadowedSaleItem.getItem.getDimension1" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="1" />
        </field>
      </row>
      <row>
        <condition method="getShadowedSaleItem.getItem.getDimension2" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="2" />
        </field>
      </row>
      <row>
        <condition method="getShadowedSaleItem.getItem.getDimension3" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="3" />
        </field>
      </row>
      <row>
        <condition class="caw.pos.common.rcpt.CawOrderCustomerDealCondition" />
        <field text="_tillItemDiscountRegularPrice"/>
        <field method="getShadowedSaleItem.getRegularBasePrice" formatter="Money" align="L" loc="22" /> <!-- BZ37585-->
      </row>
    </section>
    
    <!-- BEGIN BZ38355 -->
    <section name="pickup_item_with_upc">
      <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" />
      <row>         
        <field method="getItem.getItemId" />
        <field text="/" align="L"/>
        <field>
          <aggregate class="caw.pos.common.rcpt.CawRcptUpcLineItemBuilderField" />
        </field>
        <field method="getExtendedPrice" formatter="Money" align="R" loc="-3" />
        <field loc="-1"> 
          <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" />
        </field>
      </row>
    </section>
    
    <section name="pickup_item_without_upc">
      <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" inverted="true" />
      <row>         
        <field method="getItem.getItemId" /> 
        <field method="getExtendedPrice" formatter="Money" align="R" loc="-3" />
        <field loc="-1"> 
          <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" />
        </field>
      </row>
    </section>
    <!-- END BZ38355 -->

    <section name="ORDER_CANCEL">
      <condition class="dtv.pos.order.CancelledOrderCondition" />
      <row align="C">
      <field style="BOLD">
        <aggregate class="caw.pos.common.rcpt.CawOrderHeaderBuilderField" />
      </field>
      </row>
    </section>
    <section name="CAW_CUSTOMER_INFO">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <sectionref>CUSTOMER_DETAILS</sectionref>
      <sectionref>CAW_LOYALTY_INFO</sectionref>
    </section>
    <section name="CAW_LOYALTY_INFO">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <condition class="caw.pos.common.rcpt.CawMembershipRcptCondition" />
      <iterator method="getLoyaltyCardObject.getLoyaltyAccounts">
        <row>
          <field>
            <aggregate class="caw.pos.common.rcpt.CawMembershipNameDocBuilderField" />
          </field>
          <sp />
          <field method="getAccountId" align="L" loc="14" />
          <sp />
          <field method="getExpirationDate" align="L" loc="28" formatter="DateExpirationShort"/>
          <sp />
          <field>
            <aggregate class="caw.pos.common.rcpt.CawMembershipStatusDocBuilderField" />
          </field>
        </row>
      </iterator>
    </section>
    <!-- END BZ37202 -->

    <!-- BEGIN BZ38070 -->
    <section name="ORDER_PICK_TICKET_ITEMS">
      <iterator method="getOrder.getOrderLines">
        <condition method="getVoid" comparison="FALSE" />
        <condition method="getStatusCode" comparison="NOT_EQUAL" value="CANCELLED" />
        <!--<condition method="getStatusCode" comparison="NOT_EQUAL" value="UNFULFILLABLE" />--><!-- BZ46879: Update base on comment #6 -->
        <row>
          <field method="getItem.getDescription" style="BOLD" />
          <!--BEGIN BZ38075, BZ48178 -->
          <field align="L" loc="26">
            <aggregate class="caw.pos.common.rcpt.CawRcptOrderLineItemQtyBuilderField" />
          </field>
          <!--END BZ38075, BZ48178 -->
        </row>
        
        <!-- BEGIN BZ38347 -->
        <sectionref>item_with_upc</sectionref>
        <sectionref>item_without_upc</sectionref>
        <!-- END BZ38347 -->
        
      </iterator>
    </section>
    
    <!-- BEGIN BZ38347 -->
    <section name="item_with_upc">
      <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" />
      <row>         
        <field method="getItemId" />
        <field text="/" align="L"/>
        <field>
          <aggregate class="caw.pos.common.rcpt.CawRcptUpcLineItemBuilderField" />
        </field> 
        <field method="getExtendedPrice" align="R" formatter="MONEY" loc="-3" />
      </row>
    </section>
    
    <section name="item_without_upc">
      <condition class="caw.pos.docbuilding.conditions.CawUpcLineItemOnReceiptCondition" inverted="true" />
      <row>         
        <field method="getItemId" />     
        <field method="getExtendedPrice" align="R" formatter="MONEY" loc="-3" />
      </row>
    </section>
    <!-- END BZ38347 -->
    
    <!-- END BZ38070 -->
	<!-- BEGIN BZ33319 -->
    <section name="defer_financial">
      <condition class="caw.pos.common.rcpt.CawEMVDataCondition" value="DEFER_FINANCIAL" />
      <row />
      <iterator>
        <impl dtype="Class">caw.pos.common.rcpt.CawDeferFinancialDocBuilderIterator</impl>
        <region>
          <condition method="isBoldMsg" comparison="EQUAL">
            <Parameter name="VALUE">
              <param_value dtype="Boolean">true</param_value>
            </Parameter>
          </condition>
          <field style="BOLD" method="getMessage"/>
        </region>
        <region>
          <condition method="isBoldMsg" comparison="EQUAL">
            <Parameter name="VALUE">
              <param_value dtype="Boolean">false</param_value>
            </Parameter>
          </condition>
          <field method="getMessage"/>
        </region>
      </iterator>
    </section>
    <!-- END BZ33319 -->
    <!-- BEGIN BZ46879 -->
    <section name="order_item_unavailable">
      <row>
      	<condition method="getStatusCode" comparison="EQUAL" value="CANCELLED" />
        <field>
           <aggregate class="caw.pos.common.rcpt.CawRcptOrderLineItemUnavailableBuilderField" />
        </field>
      </row>
      <row>
        <condition method="getStatusCode" comparison="EQUAL" value="UNFULFILLABLE" />
        <field>
           <aggregate class="caw.pos.common.rcpt.CawRcptOrderLineItemUnavailableBuilderField" />
        </field>
      </row>
    </section>
    <!-- END BZ46879 -->
    
    <!-- BEGIN BZ42307 - Update receipt -->
    <section name="CAW_ORDER_LINE_FULFILLMENT">    
      <iterator method="getOrder.getOrderLines">    
        <condition method="getVoid" comparison="FALSE" />
        <condition class="caw.pos.docbuilding.conditions.CawPickUpLocationReceiptCondition"/>
        <sectionref>ORDER_LINE_FULFILLMENT</sectionref>        
      </iterator>
    </section>
    
    <section name="CAW_ORDER_PAYMENTS">
      <sectionref>CAW_SEPARATE_REFUND_ORDER_PAYMENTS</sectionref> 
      <sectionref>CAW_SUMMARY_REFUND_ORDER_PAYMENTS</sectionref> 
    </section>
    
    <section name="CAW_SEPARATE_REFUND_ORDER_PAYMENTS">
      <condition class="caw.pos.docbuilding.conditions.CawOrderReceiptSumRefundAmountCondition" inverted="true"/>
      <iterator method="getOrder.getPayments">
        <method dtype="String">getOrder.getPayments</method>
        <condition method="getVoid" comparison="FALSE" />
        <row>
          <field style="BOLD"><aggregate class="dtv.pos.order.OrderPaymentDocField" /></field>
          <field method="getAmount" formatter="MONEY" loc="-3" />
        </row>
      </iterator>
      <row />
    </section>
    
    <section name="CAW_SUMMARY_REFUND_ORDER_PAYMENTS">
      <condition class="caw.pos.docbuilding.conditions.CawOrderReceiptSumRefundAmountCondition" />
      <!-- Start Payment Type: DEPOSIT, PAYMENT -->
      <iterator method="getOrder.getPayments">
        <method dtype="String">getOrder.getPayments</method>
        <condition method="getVoid" comparison="FALSE" />
        <condition method="getTypeCode" comparison="NOT_EQUAL" value="REFUND" />
        <row>
          <field style="BOLD"><aggregate class="dtv.pos.order.OrderPaymentDocField" /></field>
          <field method="getAmount" formatter="MONEY" loc="-3" />
        </row>
      </iterator>
      <!-- End Payment Type: DEPOSIT, PAYMENT -->
      
      <!-- Start Summary Refund Amount - Payment Type: REFUND -->
      <row>
        <method dtype="String">getOrder</method>
        <field text="_dtv.xst.xom.impl.order.PaymentType.REFUND" style="BOLD" />
        <field formatter="Money" loc="-3" >
          <aggregate class="caw.pos.order.CawOrderPaymentBuilderField" />
        </field>
      </row>
      <!-- End Summary Refund Amount - Payment Type: REFUND -->
    </section>
    
    <!-- END BZ42307 - Update receipt -->
    
    <section name="item_details">
      <!-- item iterator -->
      <iterator method="getLineItemsByTypeCodeFiltered">
        <method_param dtype="String">ITEM</method_param>
        <method_param dtype="String">dtv.pos.hardware.rcptbuilding.DefaultRcptLineItemFilter</method_param>
        <!-- The following line is an example of a summary filter, for base we are not going to use a summary filter-->
        <!-- <method_param dtype="String">dtv.pos.hardware.rcptbuilding.SummaryRcptLineItemFilter</method_param> -->
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.VoidedCustomerAccountDetailLineCondition" />
        <condition class="caw.pos.docbuilding.conditions.CawNotLoyaltyFreeTierLineCondition" value="CAW_GSL_FREE_SIGN_UP"/><!-- BZ59418 -->
        <sectionref>nonvoided_item</sectionref>
      </iterator>
    </section>
    
  </sections>
  <!-- End BZ25640 -->
  
  <FrankTenders>
    <!-- Begin BZ23616 -->
    <FrankTender type="CHECK" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.ttr.ICheckTenderLineItem -->
      <enabled dtype="Boolean">true</enabled>
      <printer dtype="String">VALIDATION</printer> <!-- Ref HardwareConfig.xml -->
      <ParameterizedFormattable key="_frankCheckDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getCheckSequenceNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankCheck</sectionref>
    </FrankTender>
    <!-- End BZ23616 -->
    
    <!-- Begin BZ24064 -->
    <FrankTender type="TRAVELERS_CHECK" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.trl.ICheckTenderLineItem -->
      <enabled dtype="Boolean">true</enabled>
      <printer dtype="String">VALIDATION</printer> <!-- Ref HardwareConfig.xml -->
      <ParameterizedFormattable key="_frankTravelersCheckDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getCheckSequenceNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankTravelersCheck</sectionref>
    </FrankTender>
    <!-- End BZ24064 -->
  </FrankTenders>
</ReceiptDefinitions>
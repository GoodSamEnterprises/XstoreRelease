create or replace TRIGGER TRN_TRANS_INSERT
AFTER INSERT
   ON TRN_TRANS
   FOR EACH ROW
BEGIN
  IF (:NEW.TRANS_TYPCODE = 'RETAIL_SALE' OR :NEW.TRANS_TYPCODE = 'TENDER_EXCHANGE' OR :NEW.TRANS_TYPCODE = 'ORDER') AND :NEW.TRANS_STATCODE = 'COMPLETE' THEN
    INSERT INTO CAW_TRN_ORD_SER
     ( TRANS_SEQ,
       RTL_LOC_ID,
       WKSTN_ID,
       BUSINESS_DATE,
       STATUS,
       RESPONSE_CODE,
	     RESPONSE_MESSAGE,
	     RESPONSE_DESC,
       CREATE_DATE
    )
     VALUES
     ( :NEW.TRANS_SEQ,
       :NEW.RTL_LOC_ID,
       :NEW.WKSTN_ID,
       :NEW.BUSINESS_DATE,
       0,
	     null,
	     null,
       null,
       SYSTIMESTAMP
     );
   END IF;
END;
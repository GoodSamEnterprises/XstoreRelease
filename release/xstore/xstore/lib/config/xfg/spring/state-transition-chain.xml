<?xml version="1.0" encoding="UTF-8"?>
<beans profile="grocery"
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:mvc="http://www.springframework.org/schema/mvc"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd" >

  <context:annotation-config/>
  <context:property-placeholder system-properties-mode="FALLBACK" location="" />

  <!-- Extension points -->

  <bean id="TCN_OpenRegister_AfterCompletion" class="com.micros_retail.xfgclient.transition.TransitionChainTN" />

  <bean id="TCN_CloseRegister_AfterCompletion" class="com.micros_retail.xfgclient.transition.TransitionChainTN" />

  <bean id="TCN_StartupRecovery_AfterCompletion" class="com.micros_retail.xfgclient.transition.TransitionChainTN" />

  <bean id="TCN_Login_AfterCompletion" class="com.micros_retail.xfgclient.transition.TransitionChainTN" />

  <bean id="TCN_Logout_AfterCompletion" class="com.micros_retail.xfgclient.transition.TransitionChainTN" />

  <!-- Transition Prototype Configuration -->

  <bean id="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.ReversibleListPromptTransition"
    abstract="true">
    <property name="listInitKeyword" ref="KW_GS_SelectListInit" />
    <property name="listAddKeyword" ref="KW_GS_SelectListAdd" />
    <property name="promptKeyword" ref="KW_SelectList" />
    <property name="promptState" ref="STATE_ChoiceEntry" />
  </bean>

  <bean id="handleMaybeItemLiveSearchTN" class="com.micros_retail.xfgclient.transition.util.RunTransitionTN"
    scope="prototype">
    <property name="chain">
      <bean id="TCN_HandleMaybeItemLiveSearch" class="com.micros_retail.xfgclient.transition.TransitionChain">
        <property name="transitions">
          <list>
            <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
              <property name="keyword" ref="KW_UpdateInput" />
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.search.TriggerLiveSearchTN">
              <property name="enterKey" ref="KEY_Enter" />
              <property name="clearKey" ref="KEY_Delete" />
              <property name="active"
                value="#{T(com.micros_retail.xfgclient.config.ConfigurationMgr).getItemSearchLiveSearchEnabled()}" />
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
              <property name="keyword" ref="KW_GS_ItemSearchListInit" />
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeKeyTN">
              <property name="key">
                <util:constant static-field="com.micros_retail.xfgclient.scope.XfgTransactionScopeKeys.ITEM_SEARCH_RESULT" />
              </property>
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
              <property name="keyword" ref="KW_ShowSearchButtonInItemSearch" />
            </bean>
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="handleMaybeCustomerLiveSearchTN" class="com.micros_retail.xfgclient.transition.util.RunTransitionTN"
    scope="prototype">
    <property name="chain">
      <bean id="TCN_HandleMaybeCustomerLiveSearch" class="com.micros_retail.xfgclient.transition.TransitionChain">
        <property name="transitions">
          <list>
            <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
              <property name="keyword" ref="KW_UpdateInput" />
            </bean>
            <!-- LIVE SEARCH AND MINIMUM INPUT CHARACTERS ARE DEACTIVATED -->
            <!-- 
            <bean class="com.micros_retail.xfgclient.transition.search.TriggerLiveSearchTN" >
              <property name="enterKey" ref="KEY_Enter" />
              <property name="clearKey" ref="KEY_Delete" />
              <property name="active" value="#{T(com.micros_retail.xfgclient.config.ConfigurationMgr).getCustomerSearchLiveSearchEnabled()}" />
            </bean>
             -->
            <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
              <property name="keyword" ref="KW_GS_CustomerSearchListInit" />
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeKeyTN">
              <property name="key">
                <util:constant
                  static-field="com.micros_retail.xfgclient.scope.XfgTransactionScopeKeys.CUSTOMER_SEARCH_RESULT" />
              </property>
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeKeyTN">
              <property name="key">
                <util:constant
                  static-field="com.micros_retail.xfgclient.scope.XfgTransactionScopeKeys.CUSTOMER_SEARCH_RESULT_LIST" />
              </property>
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
              <property name="keyword" ref="KW_ShowSearchButtonInCustomerSearch" />
            </bean>
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="updateTransactionTN" class="com.micros_retail.xfgclient.transition.util.RunTransitionTN"
    scope="prototype">
    <property name="signals" value="TransactionModified" />
    <property name="chain">
      <bean id="TCN_UpdateTransaction" class="com.micros_retail.xfgclient.transition.TransitionChain">
        <property name="transitions">
          <list>
            <bean class="com.micros_retail.xfgclient.transition.trans.RunTransactionCalculatorsTN" />
            <bean class="com.micros_retail.xfgclient.transition.trans.UpdateTransDisplayTN" />
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="printReceiptsWithPrinterSelectionTN" class="com.micros_retail.xfgclient.transition.util.RunTransitionTN"
    scope="prototype">
    <property name="chain">
      <bean id="TCN_PrintReceiptsWithPrinterSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
        <property name="transitions">
          <list>
            <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.hardware.printing.PrintRcptsTN">
              <property name="showSelection" value="true" />
              <property name="promptParameters" value="_xfgclient.PrintRcptsTN.title" />
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.hardware.printing.WaitForRcptPrintTN">
              <property name="pageBreakPrompt">
                <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
                  <property name="parameters" value="_printerTearReceiptMessage" />
                </bean>
              </property>
              <property name="printerErrorPrompt">
                <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
                  <property name="state" ref="STATE_Choice3Entry" />
                  <property name="keyword" ref="KW_Choice3Entry" />
                </bean>
              </property>
            </bean>
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="printReceiptsNoPrinterSelectionTN" class="com.micros_retail.xfgclient.transition.util.RunTransitionTN"
    scope="prototype">
    <property name="chain">
      <bean id="TCN_PrintReceiptsNoPrinterSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
        <property name="transitions">
          <list>
            <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.hardware.printing.PrintRcptsTN">
              <property name="showSelection" value="false" />
              <property name="promptParameters" value="_xfgclient.PrintRcptsTN.title" />
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.hardware.printing.WaitForRcptPrintTN">
              <property name="pageBreakPrompt">
                <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
                  <property name="parameters" value="_printerTearReceiptMessage" />
                </bean>
              </property>
              <property name="printerErrorPrompt">
                <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
                  <property name="state" ref="STATE_Choice3Entry" />
                  <property name="keyword" ref="KW_Choice3Entry" />
                </bean>
              </property>
            </bean>
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="transactionCancelTN" class="com.micros_retail.xfgclient.transition.trans.RunTransitionIfTransactionUnsaved"
    scope="prototype">
    <property name="signals" value="TransactionCancelled" />
    <property name="chain">
      <bean id="TCN_TransactionCancel" class="com.micros_retail.xfgclient.transition.TransitionChain">
        <property name="transitions">
          <list>
            <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
              <property name="promptParameters" value="_xfgclient.reasoncode.transactioncancel.title" />
              <property name="codeType" value="TRANSACTION_CANCEL" />
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
              <property name="promptState" ref="STATE_ReasonCodeComments" />
              <property name="promptParameters">
                <array>
                  <value>_cancelTransTitle</value>
                  <value>_cancelTransactionCommentMessage</value>
                </array>
              </property>
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.tenderauth.VoidTransactionAuthTN">
              <property name="chain" ref="TCN_VoidAuthorizations" />
            </bean>
            <bean class="com.micros_retail.xfgclient.transition.customer.award.VoidAwardsIfInTransactionTN">
              <property name="chain" ref="TCN_VoidAwardDiscount" />
              <property name="showError" value="false" />
            </bean>
            <ref bean="cancelTransactionWorkers" />
            <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
            <ref bean="cancelTransactionPreparePrintWorkers" />
            <ref bean="printReceiptsWithPrinterSelectionTN" />
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="automaticTransactionCancelTN" class="com.micros_retail.xfgclient.transition.trans.RunTransitionIfTransactionUnsaved"
    scope="prototype">
    <property name="signals" value="TransactionCancelled" />
    <property name="chain">
      <bean id="TCN_AutomaticTransactionCancel" class="com.micros_retail.xfgclient.transition.TransitionChain">
        <property name="transitions">
          <list>
            <bean class="com.micros_retail.xfgclient.transition.reasoncode.SetConfiguredReasonCodeTN">
              <property name="configType" value="AUTOMATIC_TRANSACTION_CANCEL" />
              <property name="category" value="TRANSACTION_CANCEL" />
              <!-- <property name="comment" value="" /> -->
            </bean>
            <ref bean="cancelTransactionWorkers" />
            <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
            <ref bean="cancelTransactionPreparePrintWorkers" />
            <ref bean="printReceiptsNoPrinterSelectionTN" />
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <!-- Transition Chain Configuration -->

  <bean id="TCN_Empty" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list />
    </property>
  </bean>

  <bean id="TCN_Succeed" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.AlwaysSucceedTransition" />
    </property>
  </bean>

  <bean id="TCN_Fail" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.AlwaysFailTransition" />
    </property>
  </bean>

  <bean id="TCN_BringUIToFront" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_BringToFront" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_DepartmentLookupButtonPressed" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeStateTN">
          <property name="promptState" ref="STATE_DepartmentLookup" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_QuickPickButtonPressed" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeStateTN">
          <property name="promptState" ref="STATE_QuickPick" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ItemSelectionButtonPressed" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeStateTN">
          <property name="promptState" ref="STATE_ItemSelection" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterStartup" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <!-- BE AWARE THAT NO GSERVER IS AVAILABLE HERE -->
        <bean class="com.micros_retail.xfgclient.transition.auth.InitStationStateTN" />
        <bean class="com.micros_retail.xfgclient.transition.debug.InvokeConfiguredBeanViewersTN">
          <property name="enabled" value="${xfgclient.startup.logconfigs}" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.startup.HardwareStartupTN" />
        <!-- GSERVER AVAILABILITY STARTS HERE -->
        <bean class="com.micros_retail.xfgclient.transition.startup.DataSourceAvailableCheckTN" />
        <ref bean="xfgStartupWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.debug.LogVersionInformationTN" />
        <bean class="com.micros_retail.xfgclient.transition.startup.InitDatabaseDependendBeansTN" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.startup.PreFlightCheckTN">
          <property name="promptKeyword" ref="KW_SelectListNoCancel" />
          <property name="promptParameters" value="_xfgclient.pfc.header" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.startup.RecoverFromCrashTN">
          <property name="recoveryChain" ref="TCN_StartupRecovery" />
        </bean>
        <!-- If in crash recovery, the chain ends HERE -->
        <ref bean="printReceiptsNoPrinterSelectionTN" /> <!-- there could still be receipts in persistent storage - print them -->
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearPersistentScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.InitPersistentScopeTN" />
        <ref bean="checkForOrphanedTransWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.startup.SetInitialRegisterStateTN">
          <property name="closedState" ref="STATE_RegisterClosed" />
          <property name="loggedOutState" ref="STATE_LoggedOut" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.RunAutoPlayerTN">
          <property name="player" ref="autoPlayer" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_StartupRecovery" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.startup.RecoverStateTN" />
        <bean class="com.micros_retail.xfgclient.transition.startup.RecoverLoginTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_GS_ActivateRegisterStatusColor" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.SetOutputContextLocaleTN">
          <property name="outputContexts">
            <list>
              <ref bean="OC_Operator" />
              <ref bean="OC_Keyboard" />
            </list>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_SetTimeFormat" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.startup.RecoverTransactionTN">
          <property name="clearKeyword" ref="KW_TransactionInit" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.SetCustomerOutputContextLocaleTN">
          <property name="outputContexts" ref="OC_Customer" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_GS_UPD_Status" />
        </bean>
        <ref bean="updateTransactionTN" />
        <ref bean="checkForOrphanedTransWorkers" />
        <ref bean="TCN_StartupRecovery_AfterCompletion" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterResetPre" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <ref bean="automaticTransactionCancelTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.register.RunChainTillAccountabilityTN">
          <property name="chain" ref="TCN_TillAccountabilityRemoveTill" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.auth.LogoutUserTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.ResetOutputContextLocaleTN">
          <property name="outputContexts">
            <list>
              <ref bean="OC_Operator" />
              <ref bean="OC_Customer" />
              <ref bean="OC_Store" />
              <ref bean="OC_Keyboard" />
            </list>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_SetTimeFormat" />
        </bean>
        <ref bean="TCN_Logout_AfterCompletion" />
      </list>
    </property>
  </bean>

  <bean id="TCN_PasteData" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.input.PasteDataToInputBufferTN" />
    </property>
  </bean>

  <bean id="TCN_SelectListSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.SelectListSelectionTN" />
    </property>
  </bean>

  <bean id="TCN_ListItemSelect" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.input.ListItemSelectionTN">
        <property name="keyword" ref="KW_LineItemDisplay" />
        <property name="inventoryAdjustmentItemKeyword" ref="KW_InventoryAdjustmentItemDisplay" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_ListTillCountSelect" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.input.ListTillCountSelectionTN" />
    </property>
  </bean>

  <bean id="TCN_ListTillCountEntrySelect" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.input.ListTillCountEntrySelectionTN" />
    </property>
  </bean>

  <bean id="TCN_ListTenderSelect" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.input.ListTenderSelectionTN">
        <property name="keyword" ref="KW_TenderLineDisplay" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_PostSelectedTenderLine" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.tender.PostSelectedTenderLineEventTN" />
    </property>
  </bean>

  <bean id="TCN_PostSelectedLineItem" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.lineitem.CopySelectedToCurrentLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.PostLineItemEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_FindAndPostLineItem" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.CopyBarcodePropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.LookupItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.LookupLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetActiveLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_LineItemDisplay" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.lineitem.PostLineItemEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_PostItemOfSeletedLineItem" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.lineitem.CopySelectedToCurrentLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.PostItemEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ViewItemSearch" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureItemSearchTN">
          <property name="promptState" ref="STATE_ItemSearch" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PostItemAsInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SearchItemDoSearch" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeKeyTN">
          <property name="key">
            <util:constant static-field="com.micros_retail.xfgclient.scope.XfgTransactionScopeKeys.ITEM_SEARCH_RESULT" />
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.SearchItemTN">
          <property name="listInitKeyword" ref="KW_GS_ItemSearchListInit" />
          <property name="listAddKeyword" ref="KW_GS_ItemSearchListAdd" />
          <property name="outputContext" ref="OC_Store" />
          <property name="listSelectKeyword" ref="KW_GS_ItemSearchListSelectFirst" />
          <property name="openBusyScreenInSearchKeyword" ref="KW_GS_OpenBusyScreen" />
          <property name="disableKeyboardFlag" value="false" />
          <property name="selectButtonKeyword" ref="KW_ShowSelectButtonInItemSearch" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_SearchItemKeyInput" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.HandleKeyPressTN" />
        <ref bean="handleMaybeItemLiveSearchTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SearchItemListSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.search.SearchItemListSelectionTN" />
    </property>
  </bean>

  <bean id="TCN_SearchItemPasteData" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.PasteDataToInputBufferTN" />
        <ref bean="handleMaybeItemLiveSearchTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SearchItemCapture" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.search.PostItemSearchResultEventTN" />
    </property>
  </bean>

  <bean id="TCN_SetCustomerInput" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.LookupCustomerByCustomerIdTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ViewCustomerSearch" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_InitCustomerSearch" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureCustomerSearchTN">
          <property name="promptState" ref="STATE_CustomerSearch" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CopyCustomerToTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.PostCustomerAsInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_HouseAccountCustomerSearch" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeKeyTN">
          <property name="key">
            <util:constant static-field="com.micros_retail.xfgclient.scope.XfgTransactionScopeKeys.CUSTOMER_SEARCH_RESULT" />
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeKeyTN">
          <property name="key">
            <util:constant
              static-field="com.micros_retail.xfgclient.scope.XfgTransactionScopeKeys.CUSTOMER_SEARCH_RESULT_LIST" />
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_InitCustomerSearch" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureCustomerSearchTN">
          <property name="promptState" ref="STATE_CustomerSearch" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ViewCustomerInformation" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.customer.SetViewedCustomerTN" />
        <bean class="com.micros_retail.xfgclient.transition.search.ShowCustomerInformationTN">
          <property name="promptState" ref="STATE_CustomerInformation" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CopyCustomerToTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.PostCustomerAsInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_CloseCustomerInformation" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_CloseCustomerInformation" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_CloseCustomerSearch" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeKeyTN">
        <property name="key">
          <util:constant static-field="com.micros_retail.xfgclient.scope.XfgTransactionScopeKeys.CUSTOMER_SEARCH_RESULT" />
        </property>
      </bean>
    </property>
  </bean>

  <bean id="TCN_SearchCustomerDoSearch" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeKeyTN">
          <property name="key">
            <util:constant static-field="com.micros_retail.xfgclient.scope.XfgTransactionScopeKeys.CUSTOMER_SEARCH_RESULT" />
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.customer.SearchCustomerTN">
          <property name="listInitKeyword" ref="KW_GS_CustomerSearchListInit" />
          <property name="listAddKeyword" ref="KW_GS_CustomerSearchListAdd" />
          <property name="listSelectKeyword" ref="KW_GS_CustomerSearchListSelectFirst" />
          <property name="openBusyScreenInSearchKeyword" ref="KW_GS_OpenBusyScreen" />
          <property name="disableKeyboardFlag" value="false" />
          <property name="selectButtonKeyword" ref="KW_ShowSelectButtonInCustomerSearch" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_SearchCustomerKeyInput" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.HandleKeyPressTN" />
        <ref bean="handleMaybeCustomerLiveSearchTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SearchCustomerListSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.search.SearchCustomerListSelectionTN" />
    </property>
  </bean>

  <bean id="TCN_SearchCustomerPasteData" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.PasteDataToInputBufferTN" />
        <ref bean="handleMaybeCustomerLiveSearchTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SearchCustomerCapture" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.search.PostCustomerSearchResultEventTN" />
    </property>
  </bean>

  <bean id="TCN_AddCustomerToTransaction" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.LookupCustomerTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.AddCustomerToTransactionTN">
          <property name="chain" ref="TCN_ApplyCustomerTaxExemption" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.customer.loyalty.PromptLoyaltyCardTN">
          <property name="promptParameters" value="_xfgclient.key.loyaltyinquirycards.label" />
          <property name="promptKeyword" ref="KW_SelectListLoyaltyAccountSelection" />
          <property name="listAddKeyword" ref="KW_GS_SelectListAdd" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.SetCustomerOutputContextLocaleTN">
          <property name="outputContexts" ref="OC_Customer" />
        </bean>
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_AddCustomerByCustIdToTransaction" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.LookupCustomerByCustomerIdTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.AddCustomerToTransactionTN">
          <property name="chain" ref="TCN_ApplyCustomerTaxExemption" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.SetCustomerOutputContextLocaleTN">
          <property name="outputContexts" ref="OC_Customer" />
        </bean>
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RemoveCustomerFromTransaction" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <ref bean="removeCustomerFromTransactionRules" />
        <bean class="com.micros_retail.xfgclient.transition.customer.award.VoidAwardsIfInTransactionTN">
          <property name="chain" ref="TCN_VoidDiscount" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.customer.RemoveCustomerFromTransactionTN" />
        <ref bean="TCN_RemoveTaxExemption" />
        <bean class="com.micros_retail.xfgclient.transition.util.ResetOutputContextLocaleTN">
          <property name="outputContexts" ref="OC_Customer" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.UpdateUITN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_UtilReturnAndRepeatEvent" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.ReturnAndRepeatEventTN" />
    </property>
  </bean>

  <bean id="TCN_PollCashDrawer" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.PollDrawerStateTN" />
    </property>
  </bean>

  <bean id="TCN_KeyInput" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.HandleKeyPressTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_UpdateInput" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_OperatorPause" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.auth.OperatorPauseTN">
          <property name="promptState" ref="STATE_OperatorPause" />
        </bean>
        <ref bean="TCN_ClearCheckForUpdatesTimerEvent" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ExecuteCode" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.code.ExecuteCodeTransitionTN">
          <property name="promptState" ref="STATE_CodeEntry" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_CodeViewCodes" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.code.ViewCodeTransitionsTN" />
        <bean class="com.micros_retail.xfgclient.transition.code.ExecuteCodeTransitionTN">
          <property name="promptState" ref="STATE_CodeEntry" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ChangePassword" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.password.SelectEmployeeForPasswordChangeTN" />
        <bean class="com.micros_retail.xfgclient.transition.password.PromptNewPasswordTN">
          <property name="breakPoint" value="true" />
          <property name="promptKeyword" ref="KW_StringEntry" />
          <property name="promptParameters" value="_xfgclient.odis.passwordnew" />
        </bean>
        <ref bean="newPasswordForExistingEmployeeRules" />
        <bean class="com.micros_retail.xfgclient.transition.password.PromptConfirmPasswordTN">
          <property name="breakPoint" value="true" />
          <property name="promptKeyword" ref="KW_StringEntry" />
          <property name="promptParameters" value="_xfgclient.odis.passwordconfirm" />
        </bean>
        <ref bean="passwordConfirmRules" />
        <bean class="com.micros_retail.xfgclient.transition.password.StoreNewPasswordTN" />
        <ref bean="createPasswordStorageFileWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.util.PromptNotificationTN">
          <property name="promptParameters" value="_passwordChanged" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_Login" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.auth.SaveUserNameTN" />
        <bean class="com.micros_retail.xfgclient.transition.auth.SavePasswordTN" />
        <bean class="com.micros_retail.xfgclient.transition.auth.LoginUserTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.SetOutputContextLocaleTN">
          <property name="outputContexts">
            <list>
              <ref bean="OC_Operator" />
              <ref bean="OC_Keyboard" />
            </list>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.password.ForcePasswordChangeAtLoginTN">
          <property name="promptConfig">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="parameters" value="_passExpired" />
            </bean>
          </property>
          <property name="chain" ref="TCN_ChangePassword" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.register.CheckRegisterStateTN">
          <property name="registerClosedState" ref="STATE_RegisterClosed" />
          <property name="validations" ref="loginUserRules" />
        </bean>
        <ref bean="isNotInUpdateRequiredPeriodValidations" />
        <bean class="com.micros_retail.xfgclient.transition.util.ShowBusyScreenTN">
          <property name="openBusyScreenKeyword" ref="KW_GS_OpenBusyScreenWindow" />
          <property name="disableKeyboardFlag" value="true" />
          <property name="promptParameters" value="_xfgclient.busy.message.login" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.statejournal.SynchStateJournalTN">
          <property name="silentChange" value="true" />
        </bean>
        <ref bean="TCN_ValidateLogin" />
        <bean class="com.micros_retail.xfgclient.transition.register.RunChainTillAccountabilityTN">
          <property name="chain" ref="TCN_TillAccountabilityAttachTill" />
        </bean>
        <ref bean="TCN_PreTransTillValidation" />
        <!-- the call to KW_SetTimeFormat can't be rolled back - place it here where the chain can't fail any more -->
        <!-- ideally this should go directly after SetOutputContextLocaleTN -->
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_SetTimeFormat" />
        </bean>
        <ref bean="TCN_Login_AfterCompletion" />
        <ref bean="TCN_ClearCheckForUpdatesTimerEvent" />
      </list>
    </property>
  </bean>

  <bean id="TCN_LoginOpenRegister" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.auth.SaveUserNameTN" />
        <bean class="com.micros_retail.xfgclient.transition.auth.SavePasswordTN" />
        <bean class="com.micros_retail.xfgclient.transition.auth.LoginUserTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.SetOutputContextLocaleTN">
          <property name="outputContexts">
            <list>
              <ref bean="OC_Operator" />
              <ref bean="OC_Keyboard" />
            </list>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.password.ForcePasswordChangeAtLoginTN">
          <property name="promptConfig">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="parameters" value="_passExpired" />
            </bean>
          </property>
          <property name="chain" ref="TCN_ChangePassword" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.ShowBusyScreenTN">
          <property name="openBusyScreenKeyword" ref="KW_GS_OpenBusyScreenWindow" />
          <property name="disableKeyboardFlag" value="true" />
          <property name="promptParameters" value="_xfgclient.busy.message.login" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.statejournal.SynchStateJournalTN">
          <property name="silentChange" value="true" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.register.RunChainOpenRegisterTN">
          <property name="chain" ref="TCN_OpenRegister" />
          <property name="loggedOutState" ref="STATE_LoggedOut" />
        </bean>
        <ref bean="TCN_ValidateLogin" />
        <bean class="com.micros_retail.xfgclient.transition.register.RunChainTillAccountabilityTN">
          <property name="chain" ref="TCN_TillAccountabilityAttachTill" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.LogoutUserAtRollbackIfFailureTN">
          <property name="chain" ref="TCN_Logout" />
          <property name="loggedOutState" ref="STATE_LoggedOut" />
        </bean>
        <ref bean="TCN_PreTransTillValidation" />
        <!-- the call to KW_SetTimeFormat can't be rolled back - place it here where the chain can't fail any more -->
        <!-- ideally this should go directly after SetOutputContextLocaleTN -->
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_SetTimeFormat" />
        </bean>
        <ref bean="TCN_Login_AfterCompletion" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ValidateLogin" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <ref bean="saveSystemTimeWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptStoreCloseExpiredMessageTN">
          <property name="promptState" ref="STATE_Notification" />
          <property name="lockRegister" value="true" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ReopenRegister" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.register.RunChainOpenRegisterTN">
          <property name="chain" ref="TCN_OpenRegister" />
          <property name="loggedOutState" ref="STATE_LoggedOut" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.register.RunChainTillAccountabilityTN">
          <property name="chain" ref="TCN_TillAccountabilityAttachTill" />
        </bean>
        <ref bean="TCN_PreTransTillValidation" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ViewStoreMessages" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.storemessages.DisplayStoreMessagesTN">
          <property name="promptParameters" value="_xfgclient.key.storemessage.label" />
          <property name="listAddKeyword" ref="KW_GS_StoreMessageListAdd" />
          <property name="browserPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_Notification" />
              <property name="keyword" ref="KW_ShowBrowser" />
              <property name="parameters" value="_xfgclient.browser.header" />
            </bean>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.UpdateUITN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_InterpretKeyboardInput" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.SetInputMethodTN">
          <property name="deviceUse" value="KEYBOARD" />
          <property name="hardwareFamilyType" value="KEYBOARD" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.IfNoInputRepeatLastLineItemTN">
          <property name="validations" ref="saleItemRepeatLastLineItemRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.IfNoInputRepeatLastInvAdjustmentItemTN">
          <property name="validations" ref="invAdjustmentItemRepeatLastInvItemRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.InterpretInputTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.SendInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_InterpretScannerInput" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyScanDataToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.SetInputMethodTN">
          <property name="deviceUse" value="Scanner" />
          <property name="hardwareFamilyType" value="Scanner" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.InterpretInputTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.SendInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_InvalidKey" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.error.ShowInvalidKeyErrorTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.ClearInputTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_InvalidInputError" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.PromptErrorTN">
        <property name="promptParameters" value="_xfgclient.error.common.invalidinput" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_Logout" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.ShowBusyScreenTN">
          <property name="openBusyScreenKeyword" ref="KW_GS_OpenBusyScreen" />
          <property name="disableKeyboardFlag" value="true" />
          <property name="promptParameters" value="" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.register.RunChainTillAccountabilityTN">
          <property name="chain" ref="TCN_TillAccountabilityRemoveTill" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.auth.LogoutUserTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.RemoveCustomerFromTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.ResetOutputContextLocaleTN">
          <property name="outputContexts">
            <list>
              <ref bean="OC_Operator" />
              <ref bean="OC_Keyboard" />
              <ref bean="OC_Customer" />
            </list>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_SetTimeFormat" />
        </bean>
        <ref bean="TCN_Logout_AfterCompletion" />
        <ref bean="unregisterWorkstationActiveWorkers" />
      </list>
    </property>
  </bean>

  <bean id="TCN_StartRecorder" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.PromptNotificationTN">
          <property name="promptParameters" value="_xfgclient.notification.ResetStation.message" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.EnableRecorderTN">
          <property name="recorder" ref="recorder" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.ResetStationV2TN">
          <property name="preResetChain" ref="TCN_RegisterResetPre" />
          <property name="startState" ref="STATE_LoggedOut" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_StopRecorder" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.DisableRecorderTN">
          <property name="recorder" ref="recorder" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.SaveRecorderDataTN">
          <property name="recorder" ref="recorder" />
          <property name="promptKeyword" ref="KW_StringEntry" />
          <property name="promptContext" ref="CTX_RecorderFile" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.PromptNotificationTN">
          <property name="promptParameters" value="_xfgclient.notification.ResetStation.message" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.ResetStationV2TN">
          <property name="preResetChain" ref="TCN_RegisterResetPre" />
          <property name="startState" ref="STATE_LoggedOut" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_AbortRecorder" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.DisableRecorderTN">
          <property name="recorder" ref="recorder" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.PromptErrorTN">
          <property name="promptParameters" value="_xfgclient.error.UnknownEventRecorded.message" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.ResetStationV2TN">
          <property name="preResetChain" ref="TCN_RegisterResetPre" />
          <property name="startState" ref="STATE_LoggedOut" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_StartReplay" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.LoadPlayerDataTN">
          <property name="player" ref="player" />
          <property name="promptKeyword" ref="KW_StringEntry" />
          <property name="promptContext" ref="CTX_RecorderFile" />
          <property name="numberOfLoopsPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="context" ref="CTX_RecorderFile" />
              <property name="parameters" value="_xfgclient.capturenumberofloops" />
              <property name="default" value="1" />
            </bean>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.StartPlayerTN">
          <property name="player" ref="player" />
          <property name="delayPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="context" ref="CTX_IntegerEntry" />
              <property name="default" value="0" />
            </bean>
          </property>
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_PauseReplay" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.PausePlayerTN">
          <property name="player" ref="player" />
        </bean>
        <ref bean="TCN_ResultsSummary" />
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.ResumePlayerTN">
          <property name="player" ref="player" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ActivateSingleStepReplay" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.xfgunit.ActivatePlayerSingleStepTN">
          <property name="player" ref="player" />
        </bean>
    </property>
  </bean>

  <bean id="TCN_DeactivateSingleStepReplay" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.xfgunit.DeactivatePlayerSingleStepTN">
          <property name="player" ref="player" />
        </bean>
    </property>
  </bean>

  <bean id="TCN_StopReplay" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.StopPlayerTN">
          <property name="player" ref="player" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.ResetStationV2TN">
          <property name="preResetChain" ref="TCN_RegisterResetPre" />
          <property name="startState" ref="STATE_LoggedOut" />
          <property name="postResetChain" ref="TCN_ResultsSummary" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_StopAutoReplay" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.StopPlayerTN">
          <property name="player" ref="autoPlayer" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.SaveTestResultsTN">
          <property name="player" ref="autoPlayer" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.startup.ForceShutdownV2TN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_StopReplayAfterError" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.StopPlayerTN">
          <property name="player" ref="player" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.PromptErrorSummaryTN">
          <property name="player" ref="player" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ResetReplay" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.ResetStationV2TN">
          <property name="preResetChain" ref="TCN_RegisterResetPre" />
          <property name="startState" ref="STATE_LoggedOut" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ResetAutoReplay" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.AutoPlayerResetStationV2TN">
          <property name="player" ref="autoPlayer" />
          <property name="preResetChain" ref="TCN_RegisterResetPre" />
          <property name="startState" ref="STATE_LoggedOut" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ResultsSummary" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.SaveTestResultsTN">
          <property name="player" ref="player" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.xfgunit.PromptResultsSummaryTN">
          <property name="breakPoint" value="true" />
          <property name="player" ref="player" />
          <property name="listInitKeyword" ref="KW_GS_PlayerResultsListInit" />
          <property name="listAddKeyword" ref="KW_GS_PlayerResultsListAdd" />
          <property name="promptKeyword" ref="KW_OpenPlayerResultsList" />
          <property name="promptState" ref="STATE_PlayerResultsChoiceEntry" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.xfgunit.PromptTestSuiteSummaryTN">
          <property name="breakPoint" value="true" />
          <property name="player" ref="player" />
          <property name="listInitKeyword" ref="KW_GS_PlayerResultsListInit" />
          <property name="listAddKeyword" ref="KW_GS_PlayerResultsListAdd" />
          <property name="promptKeyword" ref="KW_OpenPlayerResultsList" />
          <property name="promptState" ref="STATE_PlayerResultsChoiceEntry" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.PromptTestSummaryTN">
          <property name="player" ref="player" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleItemSale" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedQuantityOnRollbackTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedPriceOnRollbackTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN">
          <property name="onRollbackOnly" value="true" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.CopyBarcodePropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.CheckForGS1RestrictionsTN" />
        <bean class="com.micros_retail.xfgclient.transition.property.PreSalePopulateTransactionPromptPropertyTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.LookUpItemNotOnFileTN">
          <property name="privilege" ref="PRV_ItemNotOnFile" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.SetActiveItemTN" />
        <ref bean="itemAvailableForSaleRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForCashierAgeVerificationTN">
          <property name="saleItemType" value="SALE" />
        </bean>
        <ref bean="saleBarcodePropertyRules" />
        <ref bean="saleItemPricePreselectionRules" />
        <ref bean="saleItemQuantityPreselectionRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.price.PromptForPriceChangeReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.pricechange.title" />
          <property name="codeType" value="PRICE_CHANGE" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.PromptForItemDescriptionTN">
          <property name="promptState" ref="STATE_AlphanumericStringEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntryNotOnFile" />
          <property name="promptParameters" value="_xfgclient.itemdescription" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForCustomerAgeVerificationTN">
          <property name="privilege" ref="PRV_AgeVerification" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForOrApplySelectedQuantitiyTN">
          <property name="promptContext" ref="CTX_QuantityEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.capturequantity" />
        </bean>
        <ref bean="saleItemQuantityRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForOrApplySelectedPriceTN">
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureprice" />
          <property name="validations" ref="itemPriceRules" />
        </bean>
        <ref bean="saleItemPriceRules" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.scale.WeighItemTN">
          <property name="errorChoicePrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="keyword" ref="KW_ScaleError" />
            </bean>
          </property>
          <property name="validations" ref="saleItemWeightRules" />
          <property name="saleItemType" value="SALE" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForWeightTN">
          <property name="validations" ref="saleItemWeightRules" />
          <property name="promptContext" ref="CTX_QuantityEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureweight" />
        </bean>
        <ref bean="saleItemWeightRules" />
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isNonPhysicalItemVoucher" />
          <property name="chain" ref="TCN_SaleGiftCard" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForSerialNumberTN">
          <property name="promptState" ref="STATE_SerialNumberEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureserialnumber" />
          <property name="validations" ref="serialNumberSaleRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.property.PopulateItemPromptPropertyTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.CreateSaleLineItemTN" />
        <ref bean="itemAvailabilityRules" />

        <!-- DO NOT FAIL CHAIN AFTER THIS LINE -->
        <ref bean="TCN_NotifyTransactionInSale" />
        <bean class="com.micros_retail.xfgclient.transition.sale.EnsureTransactionTN" />
        <ref bean="saleItemAddWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.tax.CalculateSaleItemTaxTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddInventoryLocationModifierTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddItemToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.attacheditems.AttachedItemsIteratingTN">
          <property name="chain" ref="TCN_SaleAttachedItem" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isNonPhysicalItemVoucher" />
          <property name="chain" ref="TCN_AuthorizeGiftCard" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetActiveLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.UpdateUITN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ProcessInventoryAdjustment" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedQuantityOnRollbackTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.CopyBarcodePropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.LookupItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.EnsureInventoryAdjustmentTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.MatchOrCreateDocLineTN" />
        <ref bean="invAdjustItemRules" />
        <ref bean="invAdjItemQuantityPreselectionRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForWeightTN">
          <property name="validations" ref="saleItemWeightRules" />
          <property name="promptContext" ref="CTX_QuantityEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntryForInventoryAdjustment" />
          <property name="promptParameters" value="_xfgclient.captureweight" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForSerialNumberTN">
          <property name="promptState" ref="STATE_SerialNumberEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntryForInventoryAdjustment" />
          <property name="promptParameters" value="_xfgclient.captureserialnumber" />
          <property name="validations" ref="serialNumberSaleRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.inventory.ProcessAdjustmentDocLineTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.SetLastAddedInvAdjustmentItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.UpdateInventoryAdjustmentDisplayTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_CompleteInventoryAdjustment" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="InventoryOperationsComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.inventory.CopyInventoryAdjustmentDataToStorageTN" />
        <ref bean="saveInvAdjustWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <ref bean="TCN_StoreCloseGrace" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterWorkstationActive" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <ref bean="registerWorkstationActiveWorkers" />
    </property>
  </bean>

  <bean id="TCN_ClearCheckForUpdatesTimerEvent" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.scope.ClearApplicationScopeKeyTN">
        <property name="key">
          <util:constant static-field="com.micros_retail.xfgclient.scope.XfgApplicationScopeKeys.CHECK_UPDATE_TIMER_EVENT" />
        </property>
      </bean>
    </property>
  </bean>

  <bean id="TCN_CheckForUpdates" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.update.CopyCheckForUpdatesTimerEventTN" />
        <bean class="com.micros_retail.xfgclient.transition.update.UpdateAvailableGraceTN">
          <property name="displayUpdateWarningsChain" ref="TCN_DisplayUpdateWarnings" />
          <property name="logoutChain" ref="TCN_Logout" />
          <property name="loggedOutState" ref="STATE_LoggedOut" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.update.LogoutUserIfGracePeriodExpiredTN">
          <property name="logoutChain" ref="TCN_Logout" />
          <property name="loggedOutState" ref="STATE_LoggedOut" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_DisplayUpdateWarnings" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.update.UpdateWarningTN">
        <property name="updateChain" ref="TCN_RunUpdates" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_RunUpdates" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.ipc.SendIpcMessageTN">
        <property name="service" value="xstore" />
        <property name="method" value="DO_INVASIVE_UPDATES" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SaleAttachedItem" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.item.LookUpItemNotOnFileTN">
          <property name="privilege" ref="PRV_ItemNotOnFile" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.SetActiveItemTN" />
        <ref bean="itemAvailableForSaleRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForCashierAgeVerificationTN">
          <property name="saleItemType" value="SALE" />
        </bean>
        <ref bean="saleItemPricePreselectionRules" />
        <ref bean="saleItemQuantityPreselectionRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.price.PromptForPriceChangeReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.pricechange.title" />
          <property name="codeType" value="PRICE_CHANGE" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.PromptForItemDescriptionTN">
          <property name="promptState" ref="STATE_AlphanumericStringEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntryNotOnFile" />
          <property name="promptParameters" value="_xfgclient.itemdescription" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForCustomerAgeVerificationTN">
          <property name="privilege" ref="PRV_AgeVerification" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForOrApplySelectedQuantitiyTN">
          <property name="promptContext" ref="CTX_QuantityEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.capturequantity" />
        </bean>
        <ref bean="saleItemQuantityRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForOrApplySelectedPriceTN">
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureprice" />
          <property name="validations" ref="itemPriceRules" />
        </bean>
        <ref bean="saleItemPriceRules" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.scale.WeighItemTN">
          <property name="errorChoicePrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="keyword" ref="KW_ScaleError" />
            </bean>
          </property>
          <property name="validations" ref="saleItemWeightRules" />
          <property name="saleItemType" value="SALE" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForWeightTN">
          <property name="validations" ref="saleItemWeightRules" />
          <property name="promptContext" ref="CTX_QuantityEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureweight" />
        </bean>
        <ref bean="saleItemWeightRules" />
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isNonPhysicalItemVoucher" />
          <property name="chain" ref="TCN_SaleGiftCard" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForSerialNumberTN">
          <property name="promptState" ref="STATE_SerialNumberEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureserialnumber" />
          <property name="validations" ref="serialNumberSaleRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.property.PopulateItemPromptPropertyTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.CreateSaleLineItemTN" />
        <ref bean="itemAvailabilityRules" />

        <!-- DO NOT FAIL CHAIN AFTER THIS LINE -->
        <ref bean="saleItemAddWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.tax.CalculateSaleItemTaxTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddInventoryLocationModifierTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddItemToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.attacheditems.AttachedItemsIteratingTN">
          <property name="chain" ref="TCN_SaleAttachedItem" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isNonPhysicalItemVoucher" />
          <property name="chain" ref="TCN_AuthorizeGiftCard" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_VerifyTransactionForReturn" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageIfAvailableTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.VerifiedReturnSearchTransactionTN">
          <property name="transDatePrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_DateEntry" />
              <property name="context" ref="CTX_DateEntry" />
              <property name="keyword" ref="KW_VerifiedReturn" />
            </bean>
          </property>
          <property name="registerNrPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_BigDecimalEntry" />
              <property name="context" ref="CTX_IntegerEntry" />
              <property name="keyword" ref="KW_VerifiedReturn" />
            </bean>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.VerifyReturnTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.CopyExistingCustomerToStorageTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_CancelReturnMode" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
    </property>
  </bean>

  <bean id="TCN_VerifiedOrUnverifiedReturn" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.returns.VerifiedOrUnverifiedReturnTN">
        <property name="verifiedChain" ref="TCN_VerifiedReturn" />
        <property name="unverifiedChain" ref="TCN_UnverifiedReturn" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_VerifiedReturn" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedQuantityOnRollbackTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN">
          <property name="onRollbackOnly" value="true" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.CopyBarcodePropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.property.PreSalePopulateTransactionPromptPropertyTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.LookupItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.SetActiveItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.ValidateReturnVerficationItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.HandleValidReturnLineItemTN" />
        <ref bean="allowItemVerifiedReturnRules" />
        <ref bean="verifiedReturnItemQuantityRules" />
        <ref bean="itemAvailableForReturnRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForCashierAgeVerificationTN">
          <property name="saleItemType" value="RETURN" />
        </bean>
        <ref bean="returnItemRules" />
        <ref bean="saleBarcodePropertyRules" />
        <ref bean="saleItemPricePreselectionRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.return.title" />
          <property name="codeType" value="RETURN" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_addCommentMessage</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.PromptForItemDescriptionTN">
          <property name="promptState" ref="STATE_AlphanumericStringEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.itemdescription" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.ApplySelectedQuantityTN" />
        <bean
          class="com.micros_retail.xfgclient.transition.returns.verification.PromptForLowestPriceVerifiedReturnTN">
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureprice" />
        </bean>
        <ref bean="saleItemPriceRules" />
        <ref bean="allowVerifiedReturnInputQtyRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForWeightTN">
          <property name="validations" ref="saleItemWeightRules" />
          <property name="promptContext" ref="CTX_QuantityEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureweight" />
        </bean>
        <ref bean="saleItemWeightRules" />
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isNonPhysicalItemVoucher" />
          <property name="chain" ref="TCN_ReturnGiftCard" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.CheckEnteredWeightForItemsTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForSerialNumberTN">
          <property name="promptState" ref="STATE_SerialNumberEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureserialnumber" />
          <property name="validations" ref="serialNumberSaleRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.CheckEnteredSerialNumberForItems" />
        <bean class="com.micros_retail.xfgclient.transition.property.PopulateItemPromptPropertyTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.CreateReturnSaleLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.UpdateVerifiedReturnLineTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.UpdateVerifiedReturnTaxTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.UpdateReturnPriceModsTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.verification.CompleteReturnVerificationTN" />

        <!-- DO NOT FAIL CHAIN AFTER THIS LINE -->
        <ref bean="TCN_NotifyTransactionInSale" />
        <bean class="com.micros_retail.xfgclient.transition.sale.EnsureTransactionTN" />
        <ref bean="saleItemAddWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.tax.CalculateSaleItemTaxTN" />
        <bean class="com.micros_retail.xfgclient.transition.tax.CalculateReturnItemTaxTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.AddInventoryLocationModifierTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddItemToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.attacheditems.AttachedItemsIteratingTN">
          <property name="chain" ref="TCN_AttachedItemReturn" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isNonPhysicalItemVoucher" />
          <property name="chain" ref="TCN_AuthorizeGiftCard" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetActiveLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.UpdateUITN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_UnverifiedReturn" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedQuantityOnRollbackTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN">
          <property name="onRollbackOnly" value="true" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.CopyBarcodePropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.property.PreSalePopulateTransactionPromptPropertyTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.LookupItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.SetActiveItemTN" />
        <ref bean="itemAvailableForReturnRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForCashierAgeVerificationTN">
          <property name="saleItemType" value="RETURN" />
        </bean>
        <ref bean="returnItemRules" />
        <ref bean="saleBarcodePropertyRules" />
        <ref bean="saleItemPricePreselectionRules" />
        <ref bean="saleItemQuantityPreselectionRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.return.title" />
          <property name="codeType" value="RETURN" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_addCommentMessage</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.PromptForItemDescriptionTN">
          <property name="promptState" ref="STATE_AlphanumericStringEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.itemdescription" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForOrApplySelectedQuantitiyTN">
          <property name="promptContext" ref="CTX_QuantityEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.capturequantity" />
        </bean>
        <ref bean="saleItemQuantityRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForLowestPriceReturnTN">
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureprice" />
          <property name="validations" ref="itemPriceRules" />
        </bean>
        <ref bean="saleItemPriceRules" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.scale.WeighItemTN">
          <property name="errorChoicePrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="keyword" ref="KW_ScaleError" />
            </bean>
          </property>
          <property name="validations" ref="saleItemWeightRules" />
          <property name="saleItemType" value="RETURN" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForWeightTN">
          <property name="validations" ref="saleItemWeightRules" />
          <property name="promptContext" ref="CTX_QuantityEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureweight" />
        </bean>
        <ref bean="saleItemWeightRules" />
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isNonPhysicalItemVoucher" />
          <property name="chain" ref="TCN_ReturnGiftCard" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForSerialNumberTN">
          <property name="promptState" ref="STATE_SerialNumberEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureserialnumber" />
          <property name="validations" ref="serialNumberSaleRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.returns.SetBlindReturnTN" />
        <bean class="com.micros_retail.xfgclient.transition.property.PopulateItemPromptPropertyTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.CreateReturnSaleLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.CompleteUnverifiedBlindReturnTN" />

        <!-- DO NOT FAIL CHAIN AFTER THIS LINE -->
        <ref bean="TCN_NotifyTransactionInSale" />
        <bean class="com.micros_retail.xfgclient.transition.sale.EnsureTransactionTN" />
        <ref bean="saleItemAddWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.tax.CalculateSaleItemTaxTN" />
        <bean class="com.micros_retail.xfgclient.transition.tax.CalculateReturnItemTaxTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.AddInventoryLocationModifierTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddItemToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.attacheditems.AttachedItemsIteratingTN">
          <property name="chain" ref="TCN_AttachedItemReturn" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isNonPhysicalItemVoucher" />
          <property name="chain" ref="TCN_AuthorizeGiftCard" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetActiveLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.UpdateUITN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_AttachedItemReturn" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.item.LookupItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.SetActiveItemTN" />
        <ref bean="itemAvailableForReturnRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForCashierAgeVerificationTN">
          <property name="saleItemType" value="RETURN" />
        </bean>
        <ref bean="returnItemRules" />
        <ref bean="saleItemPricePreselectionRules" />
        <ref bean="saleItemQuantityPreselectionRules" />
        <bean class="com.micros_retail.xfgclient.transition.reasoncode.CopyReturnReasonCodeFromParentTN">
          <property name="codeType" value="RETURN" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.PromptForItemDescriptionTN">
          <property name="promptState" ref="STATE_AlphanumericStringEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.itemdescription" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForOrApplySelectedQuantitiyTN">
          <property name="promptContext" ref="CTX_QuantityEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.capturequantity" />
        </bean>
        <ref bean="saleItemQuantityRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForLowestPriceReturnTN">
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureprice" />
          <property name="validations" ref="itemPriceRules" />
        </bean>
        <ref bean="saleItemPriceRules" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.scale.WeighItemTN">
          <property name="errorChoicePrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="keyword" ref="KW_ScaleError" />
            </bean>
          </property>
          <property name="validations" ref="saleItemWeightRules" />
          <property name="saleItemType" value="RETURN" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForWeightTN">
          <property name="validations" ref="saleItemWeightRules" />
          <property name="promptContext" ref="CTX_QuantityEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureweight" />
        </bean>
        <ref bean="saleItemWeightRules" />
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForSerialNumberTN">
          <property name="promptState" ref="STATE_SerialNumberEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureserialnumber" />
          <property name="validations" ref="serialNumberSaleRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.returns.SetBlindReturnTN" />
        <bean class="com.micros_retail.xfgclient.transition.property.PopulateItemPromptPropertyTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.CreateReturnSaleLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.CompleteUnverifiedBlindReturnTN" />

        <!-- DO NOT FAIL CHAIN AFTER THIS LINE -->
        <ref bean="saleItemAddWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.tax.CalculateSaleItemTaxTN" />
        <bean class="com.micros_retail.xfgclient.transition.tax.CalculateReturnItemTaxTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.AddInventoryLocationModifierTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddItemToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.attacheditems.AttachedItemsIteratingTN">
          <property name="chain" ref="TCN_AttachedItemReturn" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_BottleReturn" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedQuantityOnRollbackTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN">
          <property name="onRollbackOnly" value="true" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.CopyBarcodePropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.property.PreSalePopulateTransactionPromptPropertyTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.LookupItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.SetActiveItemTN" />
        <ref bean="saleBarcodePropertyRules" />
        <ref bean="saleItemPricePreselectionRules" />
        <ref bean="saleItemPriceRules" />
        <bean class="com.micros_retail.xfgclient.transition.sale.PromptForItemDescriptionTN">
          <property name="promptState" ref="STATE_AlphanumericStringEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.itemdescription" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.PromptForSerialNumberTN">
          <property name="promptState" ref="STATE_SerialNumberEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.captureserialnumber" />
          <property name="validations" ref="serialNumberSaleRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.returns.SetBlindReturnTN" />
        <bean class="com.micros_retail.xfgclient.transition.property.PopulateItemPromptPropertyTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.CreateReturnSaleLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.returns.CompleteUnverifiedBlindReturnTN" />

        <!-- DO NOT FAIL CHAIN AFTER THIS LINE -->
        <ref bean="TCN_NotifyTransactionInSale" />
        <bean class="com.micros_retail.xfgclient.transition.sale.EnsureTransactionTN" />
        <ref bean="saleItemAddWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.tax.CalculateSaleItemTaxTN" />
        <bean class="com.micros_retail.xfgclient.transition.tax.CalculateReturnItemTaxTN" />
        <!-- in case bottle returs are inventoried this transition needs a reasoncode in chainstorage -->
        <bean class="com.micros_retail.xfgclient.transition.returns.AddInventoryLocationModifierTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddItemToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetActiveLineItemTN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ApplyCustomerTaxExemption" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <ref bean="TCN_RemoveTaxExemption" />
        <bean class="com.micros_retail.xfgclient.transition.tax.PromptApplyTransTaxExemptionTN" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.tax.PromptTransTaxExemptionTN">
          <property name="promptParameters" value="_selectTaxExemptionPromptTitle" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.tax.PromptTaxExemptReasonTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.taxexemption.title" />
          <property name="codeType" value="TAX_EXEMPT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tax.SetReasonCodeToTaxExemptionTN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RemoveTaxExemption" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.tax.RemoveTaxExemptionFromTransactionTN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_BottleReturnDisallowed" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.PromptErrorTN">
          <property name="promptParameters" value="_xfgclient.error.ReturnItemAllowedVDN.denied" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleClearPreselected" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedQuantityTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedPriceTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleClearPreselectedAndReturn" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedQuantityTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedPriceTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.ReturnAndRepeatEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleTransactionCancel" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionCancelled" />
    <property name="transitions">
      <list>
        <ref bean="transactionCancelTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.ResetOutputContextLocaleTN">
          <property name="outputContexts" ref="OC_Customer" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="loggedInState" ref="STATE_LoggedIn" />
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.hardware.camera.DisplayCameraTN">
          <property name="promptState" ref="STATE_Notification" />
          <property name="promptKeyword" ref="KW_ShowCamera" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_TenderAddGiftCard" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.SetVoucherActivityCodeTN">
          <property name="voucherActivityCodeType" value="INQUIRE_BALANCE" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.PromptForGiftCardNumberTN">
          <property name="promptState" ref="STATE_GiftCardEntry" />
          <property name="promptKeyword" ref="KW_GiftCard" />
          <property name="promptParameters">
            <array>
              <value>_xfgclient.odis.giftcard</value>
              <value>_xfgclient.odis.captureGiftcardNumber</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.CopyGiftCardPropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.PromptForGiftCardPinTN">
          <property name="promptState" ref="STATE_BigDecimalEntry" />
          <property name="promptKeyword" ref="KW_GiftCard" />
          <property name="promptParameters">
            <array>
              <value>_xfgclient.odis.giftcardbalanceinquery</value>
              <value>_xfgclient.odis.capturepin</value>
            </array>
          </property>
        </bean>
        <ref bean="voucherNumberRules" />
        <bean class="com.micros_retail.xfgclient.transition.tenderauth.giftcard.AuthorizeGiftCardTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.PromptForGiftCardAccountingTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.SetTenderVoucherActivityCodeTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.CopyGiftCardPropertiesToStorageTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_TenderAddCoupon" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.tender.coupon.PromptCouponTN">
          <property name="promptState" ref="STATE_CouponEntry" />
          <property name="promptKeyword" ref="KW_Coupon" />
          <property name="validations" ref="couponIdRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.coupon.AddCouponTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_TenderAddPost" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.trans.CheckTransCompleteAndSendKey">
          <property name="transCompleteKey" ref="KEY_CompleteTransaction" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleTenderAdd" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.CopyInputTenderToStorageTN" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.tender.PromptForForeignTendersTN">
          <property name="promptParameters" value="_xfgclient.key.availabletenders.label" />
          <property name="availabilityCode" value="SALE" />
          <property name="amountPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_MoneyEntry" />
              <property name="keyword" ref="KW_ForeignAmountEntry" />
            </bean>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.CreateTenderLineItemTN">
          <property name="validations" ref="tenderAmountRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isTenderVoucherType" />
          <property name="chain" ref="TCN_TenderAddGiftCard" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isTenderCouponType" />
          <property name="chain" ref="TCN_TenderAddCoupon" />
        </bean>
        <!-- TODO: IMPLEMENT PromptCustAsscRequiredForTenderTN FOR CUSTOMER TENDER HANDLING -->
        <!-- <bean class="com.micros_retail.xfgclient.transition.tender.PromptCustAsscRequiredForTenderTN" /> -->
        <!-- TODO: IMPLEMENT PromptIdentityVerificationTN -->
        <!-- <bean class="com.micros_retail.xfgclient.transition.tender.check.PromptIdentityVerificationTN" /> -->
        <ref bean="addTenderIfOpenAmountisZeroRules" />
        <ref bean="returnSplitTenderRules" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddTenderToTransactionTN" />
        <!-- DO NOT REVERSE CHAIN AFTER THIS LINE -->
        <bean class="com.micros_retail.xfgclient.transition.tender.DisplayOpenForeignCurrencyTenderAmountTN">
          <property name="keyword" ref="KW_OpenForeignCurrencyAmount" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tenderauth.AuthorizeTenderTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.UpdateVoucherTN" />
        <bean class="com.micros_retail.xfgclient.transition.tenderauth.TrainingAuthorizeTenderTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.SetActiveTenderLineTN" />
        <ref bean="updateTransactionTN" />
        <!-- Post the rest of the chain as event - will save transaction & state to disk! -->
        <bean class="com.micros_retail.xfgclient.transition.util.PostRunChainEventTN">
          <property name="chain" ref="TCN_TenderAddPost" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_TenderHouseAccount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.tax.RemoveTaxExemptionOnRollbackTN">
          <property name="chain" ref="TCN_RemoveTaxExemption" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.CopyInputTenderToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.CreateTenderLineItemTN">
          <property name="validations" ref="tenderAmountRules" />
        </bean>
        <ref bean="houseAccountAvailableRules" />
        <bean class="com.micros_retail.xfgclient.transition.customer.CopyCustomerToChainStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.PromptNoHouseAccountCustAssignedTN">
          <property name="chain" ref="TCN_HouseAccountCustomerSearch" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.PromptHouseAccountNumberTN">
          <property name="validations" ref="houseAccountNumberRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.SetAvailableARAcctForCurrentCustTN" />
        <ref bean="houseAccountTenderRules" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.PromptARUserInfoTN">
          <property name="validations" ref="houseAccountUserNameRules" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.houseaccount.PromptAREligibleUsersTN">
          <property name="promptParameters" value="_xfgclient.key.houseaccountcustomer.label" />
          <property name="listAddKeyword" ref="KW_GS_HouseAccountListAdd" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CopyCustomerToTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.AddCustomerToTransactionTN">
          <property name="chain" ref="TCN_ApplyCustomerTaxExemption" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.PromptForHouseAccountTenderAmountTN">
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_TenderHouseAmountEntry" />
          <property name="validations" ref="tenderAmountRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.UpdateARTenderAcctNumberTN" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.PromptARPONumberTN">
          <property name="validations" ref="houseAccountPoNumberRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.AddTenderToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.SetActiveTenderLineTN" />
        <ref bean="updateTransactionTN" />
        <!-- Post the rest of the chain as event - will save transaction & state to disk! -->
        <bean class="com.micros_retail.xfgclient.transition.util.PostRunChainEventTN">
          <property name="chain" ref="TCN_TenderAddPost" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_HouseAccountPayment" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.customer.CopyCustomerToChainStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.PromptNoHouseAccountCustAssignedTN">
          <property name="chain" ref="TCN_HouseAccountCustomerSearch" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.PromptHouseAccountNumberTN">
          <property name="validations" ref="houseAccountNumberRules" />
        </bean>
        <bean
          class="com.micros_retail.xfgclient.transition.houseaccount.payment.ValidateCustAsscRequiredForARPaymentTN" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.SetAvailableARAcctForCurrentCustTN" />
        <ref bean="houseAccountPaymentRules" />
        <ref bean="houseAccountBalanceRules" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.PromptARUserInfoTN">
          <property name="validations" ref="houseAccountUserNameRules" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.houseaccount.PromptAREligibleUsersTN">
          <property name="promptParameters" value="_xfgclient.key.houseaccountcustomer.label" />
          <property name="listAddKeyword" ref="KW_GS_HouseAccountListAdd" />
        </bean>
        <bean
          class="com.micros_retail.xfgclient.transition.houseaccount.payment.PromptAccountReceivablePaymentAmtTN">
          <property name="promptContext" ref="CTX_MoneyEntry" />
          <property name="promptKeyword" ref="KW_StringEntry" />
          <property name="promptParameters" value="_xfgclient.houseaccount.payment.amount" />
          <property name="validations" ref="houseAccountPaymentAmountRules" />
        </bean>
        <bean
          class="com.micros_retail.xfgclient.transition.houseaccount.payment.ProcessAccountReceivablePaymentAmtTN" />
        <bean
          class="com.micros_retail.xfgclient.transition.houseaccount.payment.CreateAccountReceivablePaymentItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.payment.RouteItemCommissionAssociationTN" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.payment.PromptARPaymentStatementDateTN">
          <property name="promptState" ref="STATE_DateEntry" />
          <property name="promptKeyword" ref="KW_StringEntry" />
          <property name="promptParameters" value="_xfgclient.houseaccount.payment.date" />
          <property name="validations" ref="houseAccountStatementDateRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.payment.PromptARPaymentInvoiceNumberTN">
          <property name="promptState" ref="STATE_StringEntry" />
          <property name="promptKeyword" ref="KW_StringEntry" />
          <property name="promptParameters" value="_xfgclient.houseaccount.payment.invoice" />
          <property name="validations" ref="houseAccountInvoiceNumberRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.payment.PromptARAcctOpenInvoicesTN" />
        <ref bean="TCN_NotifyTransactionInSale" />
        <bean class="com.micros_retail.xfgclient.transition.sale.EnsureTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.search.CopyCustomerToTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.AddCustomerToTransactionTN">
          <property name="chain" ref="TCN_ApplyCustomerTaxExemption" />
        </bean>
        <ref bean="xfgCreateModifiersFromDefaultWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddInventoryLocationModifierTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddItemToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.payment.CreateCustAcctModifierTN" />
        <ref bean="addPriceChangeModifierToLineItemWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.payment.SetHouseAccountInvoiceDataTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetActiveLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetLastSoldLineItemTN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_HouseAccountReversal" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.customer.CopyCustomerToChainStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.PromptNoHouseAccountCustAssignedTN">
          <property name="chain" ref="TCN_HouseAccountCustomerSearch" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.PromptHouseAccountNumberTN">
          <property name="validations" ref="houseAccountNumberRules" />
        </bean>
        <bean
          class="com.micros_retail.xfgclient.transition.houseaccount.payment.ValidateCustAsscRequiredForARPaymentTN" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.SetAvailableARAcctForCurrentCustTN" />
        <ref bean="houseAccountPaymentRules" />
        <bean parent="listPromptTemplateTN"
          class="com.micros_retail.xfgclient.transition.houseaccount.reversal.PromptArPaymentsMadeTN">
          <property name="promptParameters" value="_houseaccountpayment" />
        </bean>
        <bean
          class="com.micros_retail.xfgclient.transition.houseaccount.reversal.ProcessAccountReceivablePaymentReversalTN" />
        <bean
          class="com.micros_retail.xfgclient.transition.houseaccount.reversal.CreateAccountReceivablePaymentReversalItemTN" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN"> <!-- will only run if SetConfiguredReasonCodeTN does not set a reason code -->
          <property name="promptParameters" value="_xfgclient.reasoncode.houseaccountreversal.title" />
          <property name="codeType" value="PAYMENT_REVERSAL" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <ref bean="TCN_NotifyTransactionInSale" />
        <bean class="com.micros_retail.xfgclient.transition.sale.EnsureTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.search.CopyCustomerToTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.AddCustomerToTransactionTN">
          <property name="chain" ref="TCN_ApplyCustomerTaxExemption" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.returns.AddInventoryLocationModifierTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.AddItemToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.houseaccount.payment.CreateCustAcctModifierTN" />
        <ref bean="addPriceChangeModifierToLineItemWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetActiveLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetLastSoldLineItemTN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_CompleteTransaction" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.trans.CheckTransCompleteAndPromptForRcptDeliveryMethodTN">
          <property name="transactionCompletePrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig" />
          </property>
          <property name="emailReceiptsPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_Choice3Entry" />
            </bean>
          </property>
          <property name="printReceiptsPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_Choice3Entry" />
            </bean>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.customer.email.PromptForAndSetCustomerEmailAddressTN">
          <property name="promptState" ref="STATE_AlphanumericStringEntry" />
          <property name="promptContext" ref="CTX_EmailAddressEntry" />
          <property name="promptKeyword" ref="KW_StringEntry" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.customer.email.UpdateCustomerEmailAddressTN" />
        <bean class="com.micros_retail.xfgclient.transition.property.PostTenderPopulateTransactionPromptPropertyTN" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.tender.change.PromptSelectChangeTenderTN" >
          <property name="promptParameters" value="_tenderAsChange" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.change.SelectChangeTenderTN">
          <property name="isLocalCurrencyChangeTender" ref="isLocalCurrencyChangeTender" />
          <property name="isIssuedVoucherChangeTender" ref="isIssuedVoucherChangeTender" />
          <property name="localCurrencyChangeTenderChain" ref="TCN_LocalCurrencyChangeTender" />
          <property name="issueVoucherChangeTenderChain" ref="TCN_IssueVoucherChangeTender" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.document.IssueDocumentTN">
          <!-- TODO: IMPLEMET issueDocumentVoucherChain HERE FOR VOUCHER HANDLING -->
          <!-- <property name="issueDocumentVoucherChain" ref="TCN_IssueDocumentVoucherChain" /> -->
          <property name="issueDocumentChain" ref="TCN_IssueDocument" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.voucher.PromptCreditVoucherTN" />
        <ref bean="updateTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.DisplayChangeDueTN">
          <property name="keyword" ref="KW_DisplayChangeDue" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerForSaleTN">
          <property name="delayMs" value="1000" />
        </bean>

        <bean class="com.micros_retail.xfgclient.customer.loyalty.CalculateProformaLoyaltyPointsTN" />
        <ref bean="saleCompleteCustomerAccountWorkers" />
        <bean class="com.micros_retail.xfgclient.customer.loyalty.UpdateLoyaltyPointsBalanceTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.account.AddCustomerAccountRcptSourcesTN" />
        <ref bean="saleTransactionPreparePrintWorkers" />
        <ref bean="printReceiptsWithPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseEmulationTN">
          <property name="promptContext" ref="CTX_WaitForDelete" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.creditcard.PromptSignRcptMsgTN">
          <property name="signatureRequiredPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="parameters" value="_promptmsg434" />
            </bean>
          </property>
          <property name="signatureNotRequiredPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="parameters" value="_promptmsg435" />
            </bean>
          </property>
        </bean>
        <bean parent="saleTransactionCompleteWorkers">
          <property name="signals" value="TransactionComplete" />
        </bean>
        <ref bean="saleTransactionFinishWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.util.ResetOutputContextLocaleTN">
          <property name="outputContexts" ref="OC_Customer" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="loggedInState" ref="STATE_LoggedIn" />
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMaxValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMinValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.camera.DisplayCameraTN">
          <property name="promptState" ref="STATE_Notification" />
          <property name="promptKeyword" ref="KW_ShowCamera" />
        </bean>
        <ref bean="TCN_StoreCloseGrace" />
        <ref bean="TCN_ClearCheckForUpdatesTimerEvent" />
      </list>
    </property>
  </bean>

  <bean id="TCN_LocalCurrencyChangeTender" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.sale.CreateChangeTenderLineItemTN" />
    </property>
  </bean>

  <bean id="TCN_IssueVoucherChangeTender" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.tender.voucher.ClearPreviousVoucherTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.voucher.GatherVoucherTenderInformationTN">
          <property name="tenderStatus" value="CHANGE" />
          <property name="voucherActivityCodeType" value="ISSUED" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.voucher.PromptVoucherNumberTN">
          <property name="lineItemType" value="TENDER" />
          <property name="validations" ref="voucherNumberTenderRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.voucher.CreateVoucherTenderLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.change.UpdateChangeTenderAmountTN" />
        <!-- TODO: IMPLEMENT PromptGiftCardCidTN AND MERGE IT WITH THE TCN_TenderAddGiftCard TENDER CHAIN -->
        <!-- <bean class="com.micros_retail.xfgclient.transition.tender.cid.PromptGiftCardCidTN" /> -->
        <bean class="com.micros_retail.xfgclient.transition.sale.AddTenderToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.rounding.UpdateTransactionRoundedAmountTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_IssueDocument" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.document.CreateDocumentLineItemTN" />
    </property>
  </bean>

  <bean id="TCN_SaleItemVoidLast" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SelectLastLineItemTN" />
        <ref bean="saleItemVoidRules" />
        <bean class="com.micros_retail.xfgclient.transition.input.ClearInputTN" />
        <bean class="com.micros_retail.xfgclient.transition.reasoncode.SetConfiguredReasonCodeTN">
          <property name="configType" value="VOID_LAST" />
          <property name="category" value="VOID_LINE_ITEM" />
          <!-- <property name="comment" value="" /> -->
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN"> <!-- will only run if SetConfiguredReasonCodeTN does not set a reason code -->
          <property name="promptParameters" value="_xfgclient.reasoncode.voidlineitem.title" />
          <property name="codeType" value="VOID_LINE_ITEM" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <ref bean="TCN_VoidAuthorizations" />
        <!-- DO NOT FAIL CHAIN AFTER THIS LINE -->
        <bean
          class="com.micros_retail.xfgclient.transition.returns.verification.RevertVerifyReturnTransactionChangesTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.award.VoidAwardsIfInTransactionTN">
          <property name="chain" ref="TCN_VoidDiscount" />
        </bean>
        <ref bean="TCN_NotifyTransactionInSale" />
        <ref bean="completeVoidLineItemWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetActiveLineItemTN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_InventoryAdjustmentItemVoidLast" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.inventory.ClearLastAddedInvAdjustmentItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.CopyLastInvAdjustmentItemToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.VoidInventoryAdjustmentItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.UpdateInventoryAdjustmentDisplayTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleItemVoidLine" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.CaptureLineItemTN">
          <property name="promptState" ref="STATE_LineItemEntry" />
          <property name="pluKey" ref="KEY_PLU" />
          <property name="promptParameters" value="_xfgclient.odis.voidline.title" />
        </bean>
        <ref bean="saleItemVoidRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.voidlineitem.title" />
          <property name="codeType" value="VOID_LINE_ITEM" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <ref bean="TCN_VoidAuthorizations" />
        <!-- DO NOT FAIL CHAIN AFTER THIS LINE -->
        <bean
          class="com.micros_retail.xfgclient.transition.returns.verification.RevertVerifyReturnTransactionChangesTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.award.VoidAwardsIfInTransactionTN">
          <property name="chain" ref="TCN_VoidDiscount" />
        </bean>
        <ref bean="TCN_NotifyTransactionInSale" />
        <ref bean="completeVoidLineItemWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetActiveLineItemTN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_InventoryAdjustmentVoidLine" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.inventory.ClearLastAddedInvAdjustmentItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.CaptureLineItemTN">
          <property name="promptState" ref="STATE_LineItemEntry" />
          <property name="promptContext" ref="CTX_InvAdjustmentItemEntry" />
          <property name="pluKey" ref="KEY_PLU" />
          <property name="promptParameters" value="_xfgclient.odis.voidline.title" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.inventory.VoidInventoryAdjustmentItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.UpdateInventoryAdjustmentDisplayTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_InventoryAdjustmentVoidSelectedLine" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.inventory.ClearLastAddedInvAdjustmentItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.CopySelectedToCurrentLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.VoidInventoryAdjustmentItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.UpdateInventoryAdjustmentDisplayTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_InventoryAdjustment" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleItemVoidSelectedLine" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.CopySelectedToCurrentLineItemTN" />
        <ref bean="saleItemVoidRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.voidlineitem.title" />
          <property name="codeType" value="VOID_LINE_ITEM" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <ref bean="TCN_VoidAuthorizations" />
        <!-- DO NOT FAIL CHAIN AFTER THIS LINE -->
        <bean
          class="com.micros_retail.xfgclient.transition.returns.verification.RevertVerifyReturnTransactionChangesTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.award.VoidAwardsIfInTransactionTN">
          <property name="chain" ref="TCN_VoidDiscount" />
        </bean>
        <ref bean="TCN_NotifyTransactionInSale" />
        <ref bean="completeVoidLineItemWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SetActiveLineItemTN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_TenderVoidLine" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <!-- If this chain succeeds it MUST complete or else the result state is wrong. DO NOT USE SUCCESS_EXIT IN 
      HERE -->
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.ClearInputTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.CaptureTenderLineTN">
          <property name="promptState" ref="STATE_TenderLineEntry" />
        </bean>
        <ref bean="tenderVoidLineRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.voidtenderline.title" />
          <property name="codeType" value="PAYMENT_REVERSAL" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_menutext46</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tenderauth.VoidTenderAuthorizationTN" />
        <bean class="com.micros_retail.xfgclient.transition.tenderauth.TrainingVoidTenderAuthorizationTN" />
        <!-- print including error handling - we need to save transaction asap and should not display any prompts -->
        <!-- BUT: if printjob takes too long without calling WaitForRcptPrintTN the transaction receipts may be 
          processed by -->
        <!-- this job before printer selection, which must be avoided -->
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <ref bean="completeVoidTenderLineWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.tender.SetActiveTenderLineTN" />
        <ref bean="updateTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.SetSuccessStateNullIfNonvoidedTendersTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_TenderVoidLast" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <!-- If this chain succeeds it MUST complete or else the result state is wrong. DO NOT USE SUCCESS_EXIT IN 
      HERE -->
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.tender.SelectLastTenderLineTN" />
        <ref bean="tenderVoidLineRules" />
        <bean class="com.micros_retail.xfgclient.transition.input.ClearInputTN" />
        <bean class="com.micros_retail.xfgclient.transition.reasoncode.SetConfiguredReasonCodeTN">
          <!-- TODO: read that from configuration -->
          <property name="configType" value="IMMEDIATE_PAYMENT_REVERSAL" />
          <property name="category" value="PAYMENT_REVERSAL" />
          <!-- <property name="comment" value="" /> -->
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN"> <!-- will only run if SetConfiguredReasonCodeTN does not set a reason code -->
          <property name="promptParameters" value="_xfgclient.reasoncode.voidtenderline.title" />
          <property name="codeType" value="PAYMENT_REVERSAL" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_menutext46</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tenderauth.VoidTenderAuthorizationTN" />
        <bean class="com.micros_retail.xfgclient.transition.tenderauth.TrainingVoidTenderAuthorizationTN" />
        <!-- print including error handling - we need to save transaction asap and should not display any prompts -->
        <!-- BUT: if printjob takes too long without calling WaitForRcptPrintTN the transaction receipts may be 
          processed by -->
        <!-- this job before printer selection, which must be avoided -->
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <ref bean="completeVoidTenderLineWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.tender.SetActiveTenderLineTN" />
        <ref bean="updateTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.SetSuccessStateNullIfNonvoidedTendersTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_VoidAuthorizations" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.tenderauth.VoidAuthorizationTN" />
    </property>
  </bean>

  <bean id="TCN_SellNonMerchMenu" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean parent="listPromptTemplateTN"
          class="com.micros_retail.xfgclient.transition.sellnonmerch.PromptForSellNonMerchCategoriesTN">
          <property name="promptParameters" value="_xfgclient.sellnonmerch.title" />
          <property name="menu" ref="MNU_Sell_Non_Merch_Items" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.menu.RunMenuTransitionChainTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SellNonMerchItem" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.validation.ValidatePrivilegeTN">
          <property name="privilege" ref="PRV_SellNonPhysical" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.sellnonmerch.PromptForSellNonMerchItemsTN">
          <property name="promptParameters" value="_xfgclient.sellNonMerch.addNonMerchItem" />
          <property name="breakPoint" value="true" />
        </bean>
        <ref bean="sellingIdGroupRules" />
        <bean class="com.micros_retail.xfgclient.transition.input.CaptureItemTN">
          <property name="promptState" ref="STATE_ItemEntry" />
          <property name="pluKey" ref="KEY_PLU" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.RepostInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SellNonMerchGiftCard" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.validation.ValidatePrivilegeTN">
          <property name="privilege" ref="PRV_SellGiftCard" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.SetVoucherActivityCodeTN">
          <property name="voucherActivityCodeType" value="ISSUED" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.sellnonmerch.PromptSelectVoucherItemTN">
          <property name="promptParameters" value="_xfgclient.sellNonMerch.addGiftCard" />
          <property name="breakPoint" value="true" />
          <property name="voucherItemCategory" value="GIFT_CARD" />
        </bean>
        <ref bean="voucherTypeItemRules" />
        <bean class="com.micros_retail.xfgclient.transition.input.CaptureItemTN">
          <property name="promptState" ref="STATE_ItemEntry" />
          <property name="pluKey" ref="KEY_PLU" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.RepostInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SellNonMerchGiftCertificate" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.validation.ValidatePrivilegeTN">
          <property name="privilege" ref="PRV_SellGiftCertficate" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.SetVoucherActivityCodeTN">
          <property name="voucherActivityCodeType" value="ISSUED" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.sellnonmerch.PromptSelectVoucherItemTN">
          <property name="promptParameters" value="_xfgclient.sellNonMerch.addGiftCertificate" />
          <property name="breakPoint" value="true" />
          <property name="voucherItemCategory" value="GIFT_CERTIFICATE" />
        </bean>
        <ref bean="voucherTypeItemRules" />
        <bean class="com.micros_retail.xfgclient.transition.input.CaptureItemTN">
          <property name="promptState" ref="STATE_ItemEntry" />
          <property name="pluKey" ref="KEY_PLU" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.RepostInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ReturnNonMerchMenu" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean parent="listPromptTemplateTN"
          class="com.micros_retail.xfgclient.transition.sellnonmerch.PromptForSellNonMerchCategoriesTN">
          <property name="promptParameters" value="_xfgclient.returnnonmerch.title" />
          <property name="menu" ref="MNU_Return_Non_Merch_Items" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.menu.RunMenuTransitionChainTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ReturnNonMerchItem" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.validation.ValidatePrivilegeTN">
          <property name="privilege" ref="PRV_ReturnWithNonReturnItem" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.sellnonmerch.PromptForReturnNonMerchItemsTN">
          <property name="promptParameters" value="_xfgclient.sellNonMerch.addNonMerchItem" />
          <property name="breakPoint" value="true" />
        </bean>
        <ref bean="sellingIdGroupRules" />
        <bean class="com.micros_retail.xfgclient.transition.input.CaptureItemTN">
          <property name="promptState" ref="STATE_ItemEntry" />
          <property name="pluKey" ref="KEY_PLU" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.RepostInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ReturnNonMerchGiftCard" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.validation.ValidatePrivilegeTN">
          <property name="privilege" ref="PRV_ReturnGiftCard" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.SetVoucherActivityCodeTN">
          <property name="voucherActivityCodeType" value="CASHOUT" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.sellnonmerch.PromptSelectVoucherItemTN">
          <property name="promptParameters" value="_xfgclient.sellNonMerch.addGiftCard" />
          <property name="breakPoint" value="true" />
          <property name="voucherItemCategory" value="GIFT_CARD" />
        </bean>
        <ref bean="sellingIdGroupRules" />
        <bean class="com.micros_retail.xfgclient.transition.input.CaptureItemTN">
          <property name="promptState" ref="STATE_ItemEntry" />
          <property name="pluKey" ref="KEY_PLU" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.RepostInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ReturnNonMerchGiftCertificate" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.validation.ValidatePrivilegeTN">
          <property name="privilege" ref="PRV_ReturnGiftCertficate" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.SetVoucherActivityCodeTN">
          <property name="voucherActivityCodeType" value="CASHOUT" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.sellnonmerch.PromptSelectVoucherItemTN">
          <property name="promptParameters" value="_xfgclient.sellNonMerch.addGiftCertificate" />
          <property name="breakPoint" value="true" />
          <property name="voucherItemCategory" value="GIFT_CERTIFICATE" />
        </bean>
        <ref bean="sellingIdGroupRules" />
        <bean class="com.micros_retail.xfgclient.transition.input.CaptureItemTN">
          <property name="promptState" ref="STATE_ItemEntry" />
          <property name="pluKey" ref="KEY_PLU" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.RepostInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleTransactionDiscount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <!-- SN 160602: that doesn't work with the decimal input formatter -->
        <!-- <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" /> -->
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SelectLastLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountApplicationMethodsTN">
          <property name="discountApplicationMethods" value="TRANSACTION" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountTypesTN">
          <property name="discountTypes" value="DISCOUNT" />
        </bean>
        <ref bean="TCN_HandleDiscounts" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleVoidTransactionDiscount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountApplicationMethodsTN">
          <property name="discountApplicationMethods" value="TRANSACTION" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountTypesTN">
          <property name="discountTypes">
            <array>
              <value>AWARD</value>
              <value>DISCOUNT</value>
            </array>
          </property>
        </bean>
        <ref bean="TCN_VoidDiscount" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleLastItemDiscount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SelectLastLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountApplicationMethodsTN">
          <property name="discountApplicationMethods" value="LINE_ITEM" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountTypesTN">
          <property name="discountTypes" value="DISCOUNT" />
        </bean>
        <ref bean="TCN_HandleDiscounts" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleVoidItemDiscount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountApplicationMethodsTN">
          <property name="discountApplicationMethods" value="LINE_ITEM" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountTypesTN">
          <property name="discountTypes" value="DISCOUNT" />
        </bean>
        <ref bean="TCN_VoidDiscount" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleDiscount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.lineitem.SelectLastLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountApplicationMethodsTN">
          <property name="discountApplicationMethods">
            <array>
              <value>LINE_ITEM</value>
              <value>TRANSACTION</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountTypesTN">
          <property name="discountTypes" value="DISCOUNT" />
        </bean>
        <ref bean="TCN_ApplyDiscount" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleVoidDiscount" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountApplicationMethodsTN">
          <property name="discountApplicationMethods">
            <array>
              <value>LINE_ITEM</value>
              <value>TRANSACTION</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.discount.SetAllowedDiscountTypesTN">
          <property name="discountTypes">
            <array>
              <value>AWARD</value>
              <value>DISCOUNT</value>
            </array>
          </property>
        </bean>
        <ref bean="TCN_VoidDiscount" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ApplyDiscount" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.discount.PromptForDiscountTypeTN">
          <property name="promptParameters" value="_xfgclient.discounttype.title" />
          <property name="menu" ref="MNU_Discount_Type_Selection" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.menu.RunMenuTransitionChainTN">
          <property name="chain" ref="TCN_HandleDiscounts" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_HandleDiscounts" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.discount.PromptForDiscountTN">
          <property name="promptParameters" value="_xfgclient.discount.title" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.discount.PopulateDiscountTN" />
        <ref bean="discountRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.discount.title" />
          <property name="codeType" value="DISCOUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <ref bean="TCN_AddDiscountToTransaction" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RedeemAwardDiscount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.customer.award.SetupAwardDiscountTN" />
        <ref bean="transactionDiscountRules" />
        <bean class="com.micros_retail.xfgclient.transition.customer.award.PromptAwardCardScanTN">
          <property name="promptState" ref="STATE_GiftCardEntry" />
          <property name="promptKeyword" ref="KW_GiftCard" />
          <property name="validations" ref="loyaltyCardMatchRules" />
          <property name="promptParameters">
            <array>
              <value>_xfgclient.awards</value>
              <value>_xfgclient.PromptAwardCardScanTN.prompt</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.customer.award.PromptForAwardAmountTN">
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_AwardAmountEntry" />
          <property name="validations" ref="redeemAwardAmountRules" />
          <property name="redemptionMode" value="STORED_VALUE" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.customer.award.PromptRedeemAwardCouponsTN">
          <property name="promptParameters" value="_xfgclient.key.awardredemption.label" />
          <property name="promptKeyword" ref="KW_SelectListAwardRedemption" />
          <property name="redemptionMode" value="COUPON" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.customer.award.RedeemAwardCouponsTN" />
        <ref bean="TCN_AddDiscountToTransaction" />
      </list>
    </property>
  </bean>

  <bean id="TCN_AddDiscountToTransaction" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.discount.SetDiscountPropertiesTN" />
        <bean class="com.micros_retail.xfgclient.transition.discount.ValidateDiscountCompatibilityTN" />
        <bean class="com.micros_retail.xfgclient.transition.discount.AddDiscountLineItemToTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.discount.AddDiscountPriceModifiersTN" />
        <bean class="com.micros_retail.xfgclient.transition.discount.UpdateLineItemAsscModPriceUponDiscountTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.award.SetAwardTransactionIdOnDiscountTN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_VoidDiscount" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.discount.PromptForVoidDiscountTN">
          <property name="promptParameters" value="_xfgclient.discount.void.title" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.customer.award.VoidAwardsIfInTransactionTN">
          <property name="chain" ref="TCN_VoidAwardDiscount" />
          <property name="showError" value="false" />
        </bean>
        <ref bean="voidDiscountWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.discount.UpdateLineItemAsscModPriceUponDiscountTN" />
        <ref bean="updateTransactionTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_VoidAwardDiscount" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.customer.award.VoidAwardsFromDiscountTN" />
    </property>
  </bean>

  <bean id="TCN_SaleTransactionTotal" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="signals" value="TransactionModified" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.property.PreTenderPopulateTransactionPromptPropertyTN" />
        <ref bean="TCN_NotifyTransactionInTotal" />
        <ref bean="updateTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.PrintTransactionTotalTN">
          <property name="keyword" ref="KW_GS_ListTransactionTotal" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_NotifyTransactionInSale" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionTN">
        <property name="chain">
          <!-- Signal for promac -->
          <bean id="TCN_NotifyTransactionSaleSub" class="com.micros_retail.xfgclient.transition.TransitionChain">
            <property name="signals" value="TransactionInSale" />
            <property name="transitions">
              <list>
                <bean class="com.micros_retail.xfgclient.transition.trans.SetTransactionStateTN">
                  <property name="newState" value="BEFORE_TOTAL" />
                </bean>
                <ref bean="updateTransactionTN" />
              </list>
            </property>
          </bean>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="TCN_NotifyTransactionInTotal" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionTN">
        <property name="chain">
          <!-- Signal for promac -->
          <bean id="TCN_NotifyTransactionTotalSub" class="com.micros_retail.xfgclient.transition.TransitionChain">
            <property name="signals" value="TransactionInTotal" />
            <property name="transitions">
              <list>
                <bean class="com.micros_retail.xfgclient.transition.trans.SetTransactionStateTN">
                  <property name="newState" value="AFTER_TOTAL" />
                </bean>
                <ref bean="updateTransactionTN" />
              </list>
            </property>
          </bean>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="TCN_SuspendFromTransactionTotal" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="signals" value="TransactionModified" />
    <property name="transitions">
      <list>
        <ref bean="TCN_SaleTransactionTotal" />
        <ref bean="TCN_SuspendTransaction" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ForceShutdown" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.DisplayKeywordTN">
          <property name="keyword" ref="KW_ApplicationExit" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.register.RunChainTillAccountabilityTN">
          <property name="chain" ref="TCN_TillAccountabilityRemoveTill" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.startup.ForceShutdownV2TN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ForceShutdownAutomaticCancel" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.xfgunit.ResetStationV2TN">
          <property name="preResetChain" ref="TCN_RegisterResetPre" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.startup.ForceShutdownV2TN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_HWFailureShutdown" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.startup.ForceShutdownV2TN">
        <property name="exitCode" value="50" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SalePriceEnquiry" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.CaptureItemTN">
          <property name="promptState" ref="STATE_ItemEntry" />
          <property name="pluKey" ref="KEY_PLU" />
          <property name="promptParameters" value="_xfgclient.odis.priceenquiry.title" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.item.CopyBarcodePropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.LookupItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.item.SetActiveItemTN" />
        <ref bean="saleItemPricePreselectionRules" />
        <ref bean="saleItemQuantityPreselectionRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.item.DisplayItemPriceTN">
          <property name="keywordLoggedIn" ref="KW_NoSelectListCustLargeButtonsNoScroll" />
          <property name="keywordLoggedOut" ref="KW_NoSelectListNoCancelNoScroll" />
          <property name="promptState" ref="STATE_PriceEnquiry" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.RepostInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ClockInOut" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionAndRollbackChainTN">
          <property name="chainTransition" ref="TCN_ClockInOutLogin" />
          <property name="chainRollback" ref="TCN_ClockInOutLogout" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.validation.ValidatePrivilegeTN">
          <property name="privilege" ref="PRV_ClockInOut" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.clockinout.PrepareClockInOutTN">
          <property name="chain" ref="TCN_ClockInOutTransAndPrint" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.workcode.PromptForWorkCodeTN">
          <property name="promptParameters" value="_xfgclient.workcode.title" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.clockinout.PrepareClockInOutTN">
          <property name="chain" ref="TCN_ClockInOutTransAndPrint" />
        </bean>
        <ref bean="TCN_ClockInOutLogout" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ClockInOutTransAndPrint" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.clockinout.ValidateDurationTN">
          <property name="privilege" ref="PRV_ClockInOutTimeClockDuration" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.clockinout.DoClockInOutTransactionTN" />
        <ref bean="persistTransAndObjWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <bean class="com.micros_retail.xfgclient.transition.clockinout.BuildValidateClockOutReceiptTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsWithPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.clockinout.PersistTimecardLogTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ClockInOutLogin" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.CaptureTextInputTN">
          <property name="promptState" ref="STATE_UserAuthEntry" />
          <property name="promptKeyword" ref="KW_ClockInOut" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.auth.SaveUserNameTN" />
        <bean class="com.micros_retail.xfgclient.transition.auth.SavePasswordTN" />
        <bean class="com.micros_retail.xfgclient.transition.auth.LoginUserTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.SetOutputContextLocaleTN">
          <property name="outputContexts">
            <list>
              <ref bean="OC_Operator" />
              <ref bean="OC_Keyboard" />
            </list>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.password.ForcePasswordChangeAtLoginTN">
          <property name="promptConfig">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="parameters" value="_passExpired" />
            </bean>
          </property>
          <property name="chain" ref="TCN_ChangePassword" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.ShowBusyScreenTN">
          <property name="openBusyScreenKeyword" ref="KW_GS_OpenBusyScreenWindow" />
          <property name="disableKeyboardFlag" value="true" />
          <property name="promptParameters" value="_xfgclient.busy.message.login" />
        </bean>
        <!-- the call to KW_SetTimeFormat can't be rolled back - place it here where the chain can't fail any more -->
        <!-- ideally this should go directly after SetOutputContextLocaleTN -->
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_SetTimeFormat" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ClockInOutLogout" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.ShowBusyScreenTN">
          <property name="openBusyScreenKeyword" ref="KW_GS_OpenBusyScreen" />
          <property name="disableKeyboardFlag" value="true" />
          <property name="promptParameters" value="" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.auth.LogoutUserTN" />
        <bean class="com.micros_retail.xfgclient.transition.customer.RemoveCustomerFromTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.ResetOutputContextLocaleTN">
          <property name="outputContexts">
            <list>
              <ref bean="OC_Operator" />
              <ref bean="OC_Keyboard" />
              <ref bean="OC_Customer" />
            </list>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_SetTimeFormat" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ChangeItem" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedQuantityOnRollbackTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearSelectedPriceOnRollbackTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearLastSoldLineItemTN">
          <property name="onRollbackOnly" value="true" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.inventory.CopyClickedToCurrentInvAdjustmentLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="isInventoryAdjustmentLineItemNotNull" />
          <property name="chain" ref="TCN_ChangeInventoryAdjustmentLineItemQuantity" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.lineitem.CopyClickedToCurrentLineItemTN" />
        <ref bean="saleItemPricePreselectionRules" />
        <ref bean="saleItemQuantityPreselectionRules" />
        <ref bean="changeItemAllowedRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.changeitem.title" />
          <property name="codeType" value="CHANGE_ITEM" />
        </bean>
        <ref bean="TCN_SaleItemVoidLine" />
        <bean class="com.micros_retail.xfgclient.transition.input.SetChangeItemDataTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.SaleOrReturnItemTN">
          <property name="saleChain" ref="TCN_SaleItemSale" />
          <property name="returnChain" ref="TCN_VerifiedOrUnverifiedReturn" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ChangeInventoryAdjustmentLineItemQuantity" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <ref bean="invAdjItemQuantityPreselectionRules" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.SetInventoryItemQuantityTN" />
        <bean class="com.micros_retail.xfgclient.transition.inventory.UpdateInventoryAdjustmentDisplayTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_PostVoid" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.postvoid.PostVoidSearchTransactionTN">
          <property name="transSeqPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_TransactionEntry" />
              <property name="context" ref="CTX_TransactionEntry" />
              <property name="keyword" ref="KW_PostVoid" />
            </bean>
          </property>
          <property name="transDatePrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_DateEntry" />
              <property name="context" ref="CTX_DateEntry" />
              <property name="keyword" ref="KW_PostVoid" />
            </bean>
          </property>
          <property name="registerNrPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_BigDecimalEntry" />
              <property name="context" ref="CTX_IntegerEntry" />
              <property name="keyword" ref="KW_PostVoid" />
            </bean>
          </property>
          <property name="amountPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_MoneyEntry" />
              <property name="keyword" ref="KW_PostVoid" />
            </bean>
          </property>
        </bean>
        <!-- TODO: CHECK validations postVoidRules CHECK FOR CUSTOMER ACCOUNTS, PromptExtendedTransactionOp, ValidateCustAcctTransForVoidOp 
          PostVoidCustomerAccountsOp -->
        <ref bean="postVoidRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.postvoid.title" />
          <property name="codeType" value="POST_VOID" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_addComment</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tenderauth.VoidTransactionAuthTN">
          <property name="chain" ref="TCN_VoidAuthorizations" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.postvoid.CreatePostVoidTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.postvoid.PostVoidTenderIteratingTN">
          <property name="chain">
            <bean id="TCN_TenderPostVoid" class="com.micros_retail.xfgclient.transition.TransitionChain">
              <property name="transitions">
                <list>
                  <bean class="com.micros_retail.xfgclient.transition.tenderauth.PostvoidTenderAuthorizationTN" />
                  <bean
                    class="com.micros_retail.xfgclient.transition.tenderauth.TrainingPostvoidTenderAuthorizationTN" />
                </list>
              </property>
            </bean>
          </property>
        </bean>
        <!-- TODO: implement the follow operations: POST_VOID_SOLD_VOUCHER, POST_VOID_INV_UPDATE,
          POST_VOID_WARRANTY_ACTIVITY PRE_POST_VOID_STORED_VALUE, PRE_POST_VOID_AR_PAYMENT -->
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="hasIssuedVouchers" />
          <property name="chain" ref="TCN_PostVoidIssuedVoucher" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="hasIssuedBounceBackCoupons" />
          <property name="chain" ref="TCN_PostVoidBounceBackCoupon" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.postvoid.VoidPosTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.postvoid.EjBuildReturnedItemJournalTN">
          <property name="negateQty" value="true" />
        </bean>
        <!-- TODO: VoidAwardsFromPostVoid, VoidLoyaltyPurchase, VoidAuthorizeCoupons, PostVoidChargeAcctHistory -->
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerForPostVoidTN">
          <property name="delayMs" value="1000" />
        </bean>
        <ref bean="persistPostVoidWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsWithPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <ref bean="populateFlashSalesTablesOnPostVoidWorkers" />
        <ref bean="updateSAFQueueForPostVoidsWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMaxValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMinValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="loggedInState" ref="STATE_LoggedIn" />
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_PostVoidBounceBackCoupon" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.postvoid.PostVoidBounceBackCouponTN" />
    </property>
  </bean>

  <bean id="TCN_PostVoidIssuedVoucher" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.postvoid.PostVoidIssuedVouchersTN" />
    </property>
  </bean>

  <bean id="TCN_ManualGS1Entry" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.gs1.CaptureManualGS1TN">
          <property name="aiPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_ManualGS1Entry" />
            </bean>
          </property>
          <property name="valuePrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_ManualGS1Entry" />
            </bean>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.SetInputMethodTN">
          <property name="deviceUse" value="KEYBOARD" />
          <property name="hardwareFamilyType" value="KEYBOARD" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.input.InterpretInputTN" />
        <bean class="com.micros_retail.xfgclient.transition.input.SendInputEventTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_CashTransfer" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN" >
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.PromptForSafeBagIdTN" >
          <property name="promptState" ref="STATE_SafeBagIdEntry" />
          <property name="typeCode" value="CashTransfer" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.tender.PromptForAvailableTendersTN">
          <property name="promptParameters" value="_xfgclient.key.availabletenders.label" />
          <property name="availabilityCode" value="TILL_COUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.SetSelectedTenderTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.CaptureTillAmountTN" >
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_CashTransferEntry" />
          <property name="promptParameters" value="_cashTransferAmountMessage" />
          <property name="breakPoint" value="true" />
        </bean>
        <ref bean="cashTransferTenderRules" />
        <bean class="com.micros_retail.xfgclient.transition.till.PutTillAmountIntoScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.cashtransfer.CreateCashTransferTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.CreateTillCountModelTN" />
        <ref bean="processCashTransferCountWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTillCountRefDataRcptSourceTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMaxValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMinValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_CashPickup" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN" >
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.PromptForSafeBagIdTN" >
          <property name="promptState" ref="STATE_SafeBagIdEntry" />
          <property name="typeCode" value="CashPickup" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.tender.PromptForAvailableTendersTN">
          <property name="promptParameters" value="_xfgclient.key.availabletenders.label" />
          <property name="availabilityCode" value="TILL_COUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.SetSelectedTenderTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.CaptureTillAmountTN" >
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_CashPickup" />
          <property name="promptParameters" value="_promptmsg185" />
          <property name="breakPoint" value="true" />
        </bean>
        <ref bean="cashPickupTenderRules" />
        <bean class="com.micros_retail.xfgclient.transition.till.PutTillAmountIntoScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.cashpickup.CreateCashPickupTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.CreateTillCountModelTN" />
        <ref bean="createCashPickupObjectsWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTillCountRefDataRcptSourceTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMaxValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMinValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_PaidIn" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN">
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.paidin.CapturePaidOutTransBarCodeTN">
          <property name="promptState" ref="STATE_TransactionEntry" />
          <property name="promptKeyword" ref="KW_ReceiptBarcode" />
          <property name="validations" ref="paidOutTransactionRules" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.paidin.title" />
          <property name="codeType" value="PAID_IN" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_paidInTitle</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.CaptureTillAmountTN">
          <property name="promptState" ref="STATE_FixedDecimalEntry" />
          <property name="promptKeyword" ref="KW_PaidIn" />
          <property name="breakPoint" value="true" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.tender.PromptForAvailableTendersTN">
          <property name="promptParameters" value="_xfgclient.key.availabletenders.label" />
          <property name="availabilityCode" value="TILL_COUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.SetSelectedTenderTN" />
        <ref bean="paidInPaidOutRules" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN">
          <property name="delayMs" value="1000" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.paidin.CreatePaidInTransactionTN" />
        <ref bean="persistTransAndObjWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <ref bean="populateFlashSalesTablesWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMaxValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMinValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_PaidOut" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN">
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.paidout.title" />
          <property name="codeType" value="PAID_OUT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_paidOutTitle</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.CaptureTillAmountTN">
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_PaidOut" />
          <property name="breakPoint" value="true" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.SelectLocalCurrencyTenderTN" />
        <ref bean="paidInPaidOutRules" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN">
          <property name="delayMs" value="1000" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.paidout.CreatePaidOutTransactionTN" />
        <ref bean="persistTransAndObjWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <ref bean="populateFlashSalesTablesWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMaxValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.NotifyTenderMinValueInTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_SuspendTransaction" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <ref bean="suspendTransactionRules" />
        <ref bean="completeSuspendTransWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="entireChainSuspendedTransWorkers" />
        <ref bean="printReceiptsWithPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.ResetOutputContextLocaleTN">
          <property name="outputContexts" ref="OC_Customer" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="loggedInState" ref="STATE_LoggedIn" />
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ResumeTransaction" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionResumed" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.CopyInputEventToStorageIfAvailableTN" />
        <bean class="com.micros_retail.xfgclient.transition.resume.LookupTransactionTN" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.resume.PromptSuspendedTransTN">
          <property name="promptParameters" value="_xfgclient.key.resumetransaction.label" />
          <property name="promptKeyword" ref="KW_SelectListResumeTransaction" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.resume.CreateResumeTransTN" />
        <ref bean="entireChainResumeTransWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.resume.backtosale.VoidDonationLineItemTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.SetCustomerOutputContextLocaleTN">
          <property name="outputContexts" ref="OC_Customer" />
        </bean>
        <ref bean="TCN_NotifyTransactionInTotal" />
        <ref bean="updateTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.PrintTransactionTotalTN">
          <property name="keyword" ref="KW_GS_ListTransactionTotal" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.resume.SetResumeTransStateTN">
          <property name="saleState" ref="STATE_SaleInTotal" />
          <property name="returnState" ref="STATE_ReturnInTotal" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_CancelSuspendedTrans" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="signals" value="TransactionCancelled" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.resume.CreateResumeTransTN" />
        <ref bean="entireChainResumeTransWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.resume.backtosale.VoidDonationLineItemTN" />
        <ref bean="completeCancelTransWorkers" />
        <ref bean="persistTransAndObjWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.ClearRcptsTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ScaleZeroSet" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.hardware.scale.ZeroSetScaleTN" />
    </property>
  </bean>

  <bean id="TCN_ScaleClear" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.hardware.scale.ClearScaleTN" />
    </property>
  </bean>

  <bean id="TCN_ScaleRemoteTare" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.hardware.scale.RemoteTareSetScaleTN" />
    </property>
  </bean>

  <bean id="TCN_GenerateHeapDump" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.heapdump.TriggerHeapDumpGenerationTN" >
        <property name="path" value="tmp" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_ScaleInfo" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.hardware.scale.DisplayScaleInfoTN">
        <property name="promptKeyword" ref="KW_ScaleInfo" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_WeightOutScaleCaptureWeight" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.hardware.scale.WeighOutScaleCaptureWeightTN" />
    </property>
  </bean>

  <bean id="TCN_CloseRegister" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.register.PromptForCloseRegisterTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.ShowBusyScreenTN">
          <property name="openBusyScreenKeyword" ref="KW_GS_OpenBusyScreen" />
          <property name="disableKeyboardFlag" value="true" />
          <property name="promptParameters" value="" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.register.RunChainTillAccountabilityTN">
          <property name="chain" ref="TCN_TillAccountabilityRemoveTill" />
        </bean>
        <ref bean="closeWorkstationRules" />
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="rollingCloseRunCondition" />
          <property name="chain" ref="TCN_RegisterCloseNoCount" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="nonRollingCloseRunCondition" />
          <property name="chain" ref="TCN_RegisterCloseWithCount" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.register.CreateCloseWorkstationTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_SetTimeFormat" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.ipc.SendIpcMessageTN">
          <property name="service" value="xstore" />
          <property name="method" value="CLOSE_WORKSTATION" />
        </bean>
        <ref bean="registerCloserWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptToReopenRegisterTN">
          <property name="chain" ref="TCN_ReopenRegister" />
          <property name="loggedInState" ref="STATE_LoggedIn" />
          <property name="loggedOutState" ref="STATE_LoggedOut" />
          <property name="registerClosedState" ref="STATE_RegisterClosed" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.auth.LogoutUserTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.ResetOutputContextLocaleTN">
          <property name="outputContexts">
            <list>
              <ref bean="OC_Operator" />
              <ref bean="OC_Keyboard" />
            </list>
          </property>
        </bean>
        <ref bean="TCN_Logout_AfterCompletion" />
        <ref bean="TCN_CloseRegister_AfterCompletion" />
      </list>
    </property>
  </bean>

  <bean id="TCN_CloseRegisterAtLoggedOutState" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.register.PromptForCloseRegisterTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.ShowBusyScreenTN">
          <property name="openBusyScreenKeyword" ref="KW_GS_OpenBusyScreen" />
          <property name="disableKeyboardFlag" value="true" />
          <property name="promptParameters" value="" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.CaptureTextInputTN">
          <property name="promptState" ref="STATE_UserAuthEntry" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.auth.SaveUserNameTN" />
        <bean class="com.micros_retail.xfgclient.transition.auth.SavePasswordTN" />
        <bean class="com.micros_retail.xfgclient.transition.auth.LoginUserTN" />
        <ref bean="closeWorkstationRules" />
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="rollingCloseRunCondition" />
          <property name="chain" ref="TCN_RegisterCloseNoCount" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="nonRollingCloseRunCondition" />
          <property name="chain" ref="TCN_RegisterCloseWithCount" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.register.CreateCloseWorkstationTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_SetTimeFormat" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.ipc.SendIpcMessageTN">
          <property name="service" value="xstore" />
          <property name="method" value="CLOSE_WORKSTATION" />
        </bean>
        <ref bean="registerCloserWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptToReopenRegisterTN">
          <property name="chain" ref="TCN_ReopenRegister" />
          <property name="loggedInState" ref="STATE_LoggedIn" />
          <property name="loggedOutState" ref="STATE_LoggedOut" />
          <property name="registerClosedState" ref="STATE_RegisterClosed" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.auth.LogoutUserTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.ResetOutputContextLocaleTN">
          <property name="outputContexts">
            <list>
              <ref bean="OC_Operator" />
              <ref bean="OC_Keyboard" />
            </list>
          </property>
        </bean>
        <ref bean="TCN_CloseRegister_AfterCompletion" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterCloseNoCount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="rollingCloseEmptyDrawerRunCondition" />
          <property name="chain" ref="TCN_RollingCloseRegisterEmptyDrawer" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="rollingCloseRegisterCloseCarryOverBalanceRunCondition" />
          <property name="chain" ref="TCN_RollingCloseRegisterCarryOverBalance" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_RollingCloseRegisterEmptyDrawer" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN">
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerForEndCountTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptRollingCloseEmptyTheDrawerTN">
          <property name="promptState" ref="STATE_IgnoreDrawerOpenedNotification" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.DetachTillAndEndSessionTN" />
        <ref bean="persistTransAndObjWorkers" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RollingCloseRegisterCarryOverBalance" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN">
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerForEndCountTN" />
        <bean
          class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptRollingCloseRemoveNonCashTendersTN">
          <property name="promptState" ref="STATE_IgnoreDrawerOpenedNotification" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptRollingClosingPickupAmountsTN">
          <property name="chain" ref="TCN_RegisterModeFloatPickup" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.UpdateLastClosingBalanceTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.DetachTillAndEndSessionTN" />
        <ref bean="persistTransAndObjWorkers" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterModeFloatPickup" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptRollingClosingPickupAmtTN">
        <property name="promptState" ref="STATE_MoneyEntry" />
        <property name="promptKeyword" ref="KW_RollingClosePickupFloatEntry" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_RegisterCloseWithCount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.RunCloseTillCountTN">
          <property name="closingCountChain" ref="TCN_RegisterModeClosingCount" />
          <property name="quickCountChain" ref="TCN_RegisterModeQuickClosingCount" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterModeClosingCount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN">
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.TillCountTN">
          <property name="promptState" ref="STATE_TillCount" />
          <property name="promptKeyword" ref="KW_TillCount" />
          <property name="keyword" ref="KW_TransactionInit" />
          <property name="breakPoint" value="true" />
        </bean>
        <bean parent="listPromptTemplateTN"
          class="com.micros_retail.xfgclient.transition.till.PromptForTillCountDiscrepancyReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.tillcountdiscrepancy.title" />
          <property name="codeType" value="TILL_COUNT_DISCREPANCY" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_tillCountDiscrepancyCommentTitle</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.ClosingDepositAmountsTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.CreateTillEndCountObjectsTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTillCountRefDataRcptSourceTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="persistTransAndObjWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.till.RemoveDrawerFromCurrentWkstnTN" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterModeQuickClosingCount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN">
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.CreateTillAutoEndCountTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.RemoveDrawerFromCurrentWkstnTN" />
        <ref bean="persistTransAndObjWorkers" />
      </list>
    </property>
  </bean>

  <bean id="TCN_HandleRollingCloseTimerEvent" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.CopyRollingCloseTimerEventTN" />
    </property>
  </bean>

  <bean id="TCN_ShowStoreCloseMessage" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <ref bean="TCN_StoreCloseWarning" />
        <ref bean="TCN_StoreCloseGrace" />
        <ref bean="TCN_StoreCloseExpired" />
      </list>
    </property>
  </bean>

  <bean id="TCN_StoreCloseWarning" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.CopyRollingCloseTimerEventTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptStoreCloseWarningMessageTN">
          <property name="promptState" ref="STATE_Notification" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_StoreCloseGrace" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.CopyRollingCloseTimerEventTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptStoreCloseGraceMessageTN">
          <property name="promptState" ref="STATE_Notification" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_StoreCloseExpired" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.CopyRollingCloseTimerEventTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptStoreCloseExpiredMessageTN">
          <property name="promptState" ref="STATE_Notification" />
          <property name="lockRegister" value="false" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.LogoutUserIfStoreCloseExpiredTN">
          <property name="chain" ref="TCN_Logout" />
          <property name="loggedOutState" ref="STATE_LoggedOut" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_OpenRegister" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <ref bean="openWorkstationRules" />
        <ref bean="saveSystemTimeWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptRegisterOpenBusinessDateTN">
          <property name="promptKeyword" ref="KW_CustomYesNoEntry" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="rollingCloseCountAtRegisterOpenRunCondition" />
          <property name="chain" ref="TCN_RegisterModeCountTill" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="rollingCloseNoCountAtRegisterOpenRunCondition" />
          <property name="chain" ref="TCN_RegisterModeNoCount" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.RunTransitionIfTN">
          <property name="condition" ref="rollingCloseFirstRegisterToOpenCondition" />
          <property name="chain" ref="TCN_RollingCloseFirstWorkstationToOpen" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.register.CreateOpenWorkstationTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.ClearRcptsTN" />
        <bean class="com.micros_retail.xfgclient.transition.ipc.SendIpcMessageTN">
          <property name="service" value="xstore" />
          <property name="method" value="OPEN_WORKSTATION" />
        </bean>
        <ref bean="TCN_OpenRegister_AfterCompletion" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RollingCloseFirstWorkstationToOpen" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.resume.PromptCancelSuspendedTransTN">
          <property name="promptParameters" value="_xfgclient.key.cancelsuspendtransaction.label" />
          <property name="promptKeyword" ref="KW_SelectListResumeTransaction" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.resume.CancelAllSuspendTransTN">
          <property name="chain" ref="TCN_CancelSuspendedTrans" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterModeCountTill" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.till.RunOpenTillCountTN">
        <property name="startingCountChain" ref="TCN_RegisterModeStartingCount" />
        <property name="quickCountChain" ref="TCN_RegisterModeQuickStartingCount" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_RegisterModeNoCount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.RunRegisterModeIssueAttachTillTN">
          <property name="chain" ref="TCN_RegisterModeIssueAttachTill" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.GetCurrentSessionTN" />
        <bean
          class="com.micros_retail.xfgclient.transition.till.rollingclose.PromptRollingCloseInsertPreDefinedFloatTN">
          <property name="promptKeyword" ref="KW_CustomYesNoEntry" />
          <property name="chain" ref="TCN_RollingCloseChangeFloat" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.AutoCreateRollingCloseBeginCountTN" />
        <ref bean="createTillStartCountObjectsWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="persistTransAndObjWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.ClearRcptsTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RollingCloseChangeFloat" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_promptChangeFloatListTitle" />
          <property name="codeType" value="CHANGE_FLOAT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_promptChangeFloatListTitle</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.RollingCloseChangeFloatTN">
          <property name="promptState" ref="STATE_TillCount" />
          <property name="promptKeyword" ref="KW_ChangeFloat" />
          <property name="keyword" ref="KW_TransactionInit" />
          <property name="breakPoint" value="true" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.rollingclose.RollingCloseSaveChangeFloatTN" />
        <ref bean="completeTransactionWorkers" />
        <ref bean="persistTransAndObjWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterModeIssueAttachTill" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.GetRegisterModeIssueTillInfoTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.IssueTillTN" />
        <ref bean="persistTransAndObjWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.till.SetCashDrawerForTill" />
        <bean class="com.micros_retail.xfgclient.transition.till.AttachTillTN" />
        <ref bean="persistTransAndObjWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterModeStartingCount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.RunRegisterModeIssueAttachTillTN">
          <property name="chain" ref="TCN_RegisterModeIssueAttachTill" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.GetCurrentSessionTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.RunTillCountRegisterModeTN">
          <property name="chain" ref="TCN_BeginTillCount" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_RegisterModeQuickStartingCount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.RunRegisterModeIssueAttachTillTN">
          <property name="chain" ref="TCN_RegisterModeIssueAttachTill" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.GetCurrentSessionTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.RegisterQuickTillCountTN" />
        <ref bean="createTillStartCountObjectsWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="persistTransAndObjWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.ClearRcptsTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_TillAccountabilityAttachTill" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.CheckIfTillAttachedToRegisterTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.SetCurrentSessionTN" />
        <ref bean="preIssueTillRules" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.till.PromptForAvailableTillsTN">
          <property name="promptParameters" value="_xfgclient.till.selection.title" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.GetTillAccountabilityIssueTillInfoTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.IssueTillTN">
          <property name="validations" ref="issueTillRules" />
        </bean>
        <ref bean="persistTransAndObjWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.CreateIssuedStartingCashTransactionTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="persistTransAndObjWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <ref bean="tillAvailableToAttachRules" />
        <bean class="com.micros_retail.xfgclient.transition.till.SetCashDrawerForTill" />
        <bean class="com.micros_retail.xfgclient.transition.till.EnsureTillBeginCountedTN">
          <property name="chain" ref="TCN_BeginTillCount" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.ClearRcptsTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.AttachTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="persistTransAndObjWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_TillAccountabilityRemoveTill" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.SetCurrentSessionTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.CheckSessionStatusTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.ValidateTillActionTN" />
        <ref bean="tillAvailableToRemoveRules" />
        <bean class="com.micros_retail.xfgclient.transition.till.RemoveTillTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN" />
        <ref bean="persistTransAndObjWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_BeginTillCount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.BeginTillCountTN">
          <property name="promptState" ref="STATE_TillCount" />
          <property name="promptKeyword" ref="KW_StartCount" />
          <property name="keyword" ref="KW_TransactionInit" />
          <property name="breakPoint" value="true" />
        </bean>
        <bean parent="listPromptTemplateTN"
          class="com.micros_retail.xfgclient.transition.till.PromptForTillCountDiscrepancyReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.tillcountdiscrepancy.title" />
          <property name="codeType" value="TILL_COUNT_DISCREPANCY" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_tillCountDiscrepancyCommentTitle</value>
              <value>_promptmsg198</value>
            </array>
          </property>
        </bean>
        <ref bean="createTillStartCountObjectsWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTillCountRefDataRcptSourceTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="persistTransAndObjWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_TillCountEntry" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.till.SetCurrentSessionTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.PromptTotalCountTN">
          <property name="denominationCountState" ref="STATE_DenominationCountEntry" />
          <property name="totalsCountState" ref="STATE_TotalsCountEntry" />
          <property name="totalsAmountState" ref="STATE_TotalsAmountEntry" />
          <property name="unitCountState" ref="STATE_UnitCountEntry" />
          <property name="listInitKeyword" ref="KW_GS_ClearTransactionList" />
          <property name="denominationCountKeyword" ref="KW_DenominationCount" />
          <property name="totalsCountKeyword" ref="KW_TotalsCount" />
          <property name="totalsAmountKeyword" ref="KW_TotalsAmount" />
          <property name="unitCountKeyword" ref="KW_UnitCount" />
          <property name="breakPoint" value="true" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ShowTillCountSummary" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.till.ShowTillCountSummaryTN">
        <property name="listInitKeyword" ref="KW_GS_ClearTransactionList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_TenderCount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.PromptForTenderCountTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_TenderAmount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="TransactionComplete" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.input.MoveInputToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.PromptForTenderAmountTN">
          <property name="totalsCountState" ref="STATE_TotalsCountEntry" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_VoidUnitCount" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.till.VoidUnitCountTN" />
    </property>
  </bean>

  <bean id="TCN_ClearTillCountEntries" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.till.ClearTillCountEntriesTN">
        <property name="listInitKeyword" ref="KW_GS_ClearTransactionList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_TillAudit" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN">
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.AuditTillCountTN">
          <property name="promptState" ref="STATE_TillCount" />
          <property name="promptKeyword" ref="KW_TillCount" />
          <property name="keyword" ref="KW_TransactionInit" />
          <property name="breakPoint" value="true" />
          <property name="tenderAvailability" value="TILL_COUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.CreateTillAuditObjectsTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTillCountRefDataRcptSourceTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="persistTransAndObjWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.rcpt.ClearRcptsTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_NoSale" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.assistance.ReinitializeSessionManagerTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.ValidateEmployeeTillAttachedTN" />
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN">
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.nosale.CreateNoSaleTransactionTN" />
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.key.nosale.label" />
          <property name="codeType" value="NO_SALE" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_noSaleTitle</value>
              <value>_promptmsg7</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.nosale.SetNoSaleReasonCodeTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.OpenDrawerTN" />
        <ref bean="completeNoSaleTransWorkers" />
        <ref bean="persistTransAndObjWorkers" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.hardware.cashdrawer.WaitForDrawerCloseTN">
          <property name="promptState" ref="STATE_WaitForDrawerClose" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.rcpt.ClearRcptsTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_PreTransTillValidation" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.assistance.ReinitializeSessionManagerTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.ValidateRegisterBeginCountedTN">
          <property name="startingCountChain" ref="TCN_RegisterModeStartingCount" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.till.ValidateEmployeeTillAttachedTN" />
        <bean class="com.micros_retail.xfgclient.transition.till.ValidateUseOtherTillTN">
          <property name="validations" ref="useOtherTillRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.session.CheckCurrentSessionStatusTN">
          <property name="countStatus" value="BEGINCOUNT" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ShowXEnvironment" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.ipc.PromptEnvironmentNotEnabledTN" />
        <bean class="com.micros_retail.xfgclient.transition.ipc.SendIpcMessageTN">
          <property name="service" value="xstore" />
          <property name="method" value="bring-ui-to-front" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_CloseVirtualKeyboard" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.hardware.virtualkeyboard.CloseVirtualKeyboardTN" />
    </property>
  </bean>

  <bean id="TCN_UpdateEnvironmentMessage" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.ipc.UpdateEnvironmentMessageTN">
          <property name="keyword" ref="KW_ShowEnvironmentMessage" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.timer.StartTimerTN">
          <property name="timer" ref="clearXenvironmentMessageTimer" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ClearEnvironmentMessage" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ClearEnvironmentMessage" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_ShowCurrencyRates" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.tender.foreigncurrency.maint.PromptRateFormTN">
        <property name="promptKeyword" ref="KW_SelectListNoCancel" />
        <property name="promptParameters" value="_xfgclient.key.showcurrencyrates.label" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_InventoryAdjustment" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean parent="listPromptTemplateTN" class="com.micros_retail.xfgclient.transition.reasoncode.PromptForReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.reasoncode.inventoryadjustment.title" />
          <property name="codeType" value="INVENTORY_ADJUSTMENT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.search.CaptureReasonCodeCommentsTN">
          <property name="promptState" ref="STATE_ReasonCodeComments" />
          <property name="promptParameters">
            <array>
              <value>_invAdjust_menuOption</value>
              <value>_inventoryAdjustmentReasonPrompt</value>
            </array>
          </property>
        </bean>
        <bean parent="listPromptTemplateTN"
          class="com.micros_retail.xfgclient.transition.inventory.PromptForInventoryLocationReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.key.inventoryadjustment.location.label" />
          <property name="listAddKeyword" ref="KW_GS_SelectListAdd" />
        </bean>
        <bean parent="listPromptTemplateTN"
          class="com.micros_retail.xfgclient.transition.inventory.PromptForInventoryBucketReasonCodeTN">
          <property name="promptParameters" value="_xfgclient.key.inventoryadjustment.bucket.label" />
          <property name="listAddKeyword" ref="KW_GS_SelectListAdd" />
        </bean>
        <bean
          class="com.micros_retail.xfgclient.transition.inventory.CopyInventoryAdjustmentDataToTransactionScopeTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_CancelInventoryAdjustment" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.inventory.PromptForCancelInventoryAdjustmentTN" />
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ReprintLastReceipt" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.trans.CopyLastTransactionToStorageTN" />
        <ref bean="TCN_ReprintReceiptTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ReprintReceipt" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.trans.SearchTransactionTN">
          <property name="transSeqPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_TransactionEntry" />
              <property name="context" ref="CTX_TransactionEntry" />
              <property name="keyword" ref="KW_ReprintReceipt" />
            </bean>
          </property>
          <property name="registerNrPrompt">
            <bean class="com.micros_retail.xfgclient.statemachine.PromptConfig">
              <property name="state" ref="STATE_BigDecimalEntry" />
              <property name="context" ref="CTX_IntegerEntry" />
              <property name="keyword" ref="KW_ReprintReceipt" />
            </bean>
          </property>
        </bean>
        <ref bean="TCN_ReprintReceiptTN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_ReprintReceiptTN" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <ref bean="receiptReprintRules" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.CopyReceiptsToReceiptStackTN" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_StartTrainingMode" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="ApplicationModeChanged" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.training.CreateTrainingModeTransactionTN">
          <property name="transactionType" value="TRAINING_MODE_ENTRY" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.training.EnterTrainingModeTN" />
        <bean class="com.micros_retail.xfgclient.transition.assistance.ReinitializeSessionManagerTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_GS_ShowTrainingMode" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.statejournal.SynchStateJournalTN">
          <property name="silentChange" value="true" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.ClearRcptsTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.UpdateUITN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_StopTrainingMode" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="signals" value="ApplicationModeChanged" />
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.training.ExitTrainingModeTN" />
        <bean class="com.micros_retail.xfgclient.transition.assistance.ReinitializeSessionManagerTN" />
        <bean class="com.micros_retail.xfgclient.transition.training.CreateTrainingModeTransactionTN">
          <property name="transactionType" value="TRAINING_MODE_EXIT" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
          <property name="keyword" ref="KW_GS_HideTrainingMode" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.rcpt.AddTransactionRcptSourceTN" />
        <ref bean="emailSaveRcptsWorkers" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.statejournal.SynchStateJournalTN">
          <property name="silentChange" value="true" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.scope.ClearTransactionScopeTN" />
        <bean class="com.micros_retail.xfgclient.transition.rcpt.ClearRcptsTN" />
        <bean class="com.micros_retail.xfgclient.transition.util.UpdateUITN" />
      </list>
    </property>
  </bean>

  <bean id="TCN_SaleGiftCard" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.SetVoucherActivityCodeTN">
          <property name="voucherActivityCodeType" value="ISSUED" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.PromptForGiftCardNumberTN">
          <property name="promptState" ref="STATE_GiftCardEntry" />
          <property name="promptKeyword" ref="KW_GiftCard" />
          <property name="promptParameters">
            <array>
              <value>_xfgclient.odis.item</value>
              <value>_xfgclient.odis.captureGiftcardNumber</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.CopyGiftCardPropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.HandleVoucherTN">
          <property name="lineItemType" value="ITEM" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.PromptForGiftCardAmountTN">
          <property name="promptState" ref="STATE_MoneyEntry" />
          <property name="promptKeyword" ref="KW_ItemPropertyEntry" />
          <property name="promptParameters" value="_xfgclient.odis.captureamount" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.PromptForGiftCardPinTN">
          <property name="promptState" ref="STATE_BigDecimalEntry" />
          <property name="promptKeyword" ref="KW_GiftCard" />
          <property name="promptParameters">
            <array>
              <value>_xfgclient.odis.item</value>
              <value>_xfgclient.odis.capturepin</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.CreateVoucherSaleLineItemTN">
          <property name="validations" ref="saleVoucherRules" />
          <property name="saleItemType" value="SALE" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ReturnGiftCard" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.SetVoucherActivityCodeTN">
          <property name="voucherActivityCodeType" value="CASHOUT" />
        </bean>
        <ref bean="sellingIdGroupRules" />
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.PromptForGiftCardNumberTN">
          <property name="promptState" ref="STATE_GiftCardEntry" />
          <property name="promptKeyword" ref="KW_GiftCard" />
          <property name="promptParameters">
            <array>
              <value>_xfgclient.odis.item</value>
              <value>_xfgclient.odis.captureGiftcardNumber</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.CopyGiftCardPropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.HandleVoucherTN">
          <property name="lineItemType" value="ITEM" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.sale.CreateVoucherSaleLineItemTN">
          <property name="validations" ref="returnVoucherNumberItemRules" />
          <property name="saleItemType" value="RETURN" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_AuthorizeGiftCard" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.trans.RunTransactionCalculatorsTN" />
        <bean class="com.micros_retail.xfgclient.transition.tenderauth.giftcard.AuthorizeGiftCardTN" />
        <ref bean="addPriceChangeModifierToLineItemWorkers" />
      </list>
    </property>
  </bean>

  <bean id="TCN_GiftCardBalanceInquiry" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.SetVoucherActivityCodeTN">
          <property name="voucherActivityCodeType" value="INQUIRE_BALANCE" />
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.PromptForGiftCardNumberTN">
          <property name="promptState" ref="STATE_GiftCardEntry" />
          <property name="promptKeyword" ref="KW_GiftCard" />
          <property name="promptParameters">
            <array>
              <value>_xfgclient.odis.giftcardbalanceinquery</value>
              <value>_xfgclient.odis.captureGiftcardNumber</value>
            </array>
          </property>
        </bean>
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.CopyGiftCardPropertiesToStorageTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.PromptForGiftCardPinTN">
          <property name="promptState" ref="STATE_BigDecimalEntry" />
          <property name="promptKeyword" ref="KW_GiftCard" />
          <property name="promptParameters">
            <array>
              <value>_xfgclient.odis.giftcardbalanceinquery</value>
              <value>_xfgclient.odis.capturepin</value>
            </array>
          </property>
        </bean>
        <ref bean="voucherNumberRules" />
        <bean class="com.micros_retail.xfgclient.transition.tenderauth.giftcard.AuthorizeGiftCardTN" />
        <bean class="com.micros_retail.xfgclient.transition.tender.giftcard.DisplayGiftCardBalanceTN" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_LoyaltyInquiry" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.customer.loyalty.PromptLoyaltyCardInquiryInfoTN">
          <property name="promptState" ref="STATE_GiftCardEntry" />
          <property name="promptKeyword" ref="KW_GiftCard" />
          <property name="promptParameters">
            <array>
              <value>_xfgclient.odis.giftcardloyaltyinquery</value>
              <value>_promptLoyaltyNumber</value>
            </array>
          </property>
          <property name="validations" ref="loyaltyNumberRules" />
        </bean>
        <bean class="com.micros_retail.xfgclient.customer.loyalty.DisplayLoyaltyBalancePromptTN" />
        <ref bean="printReceiptsNoPrinterSelectionTN" />
        <bean class="com.micros_retail.xfgclient.transition.sale.ClearTransactionTN">
          <property name="keyword" ref="KW_TransactionInit" />
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_ActivateRcptPrinting" class="com.micros_retail.xfgclient.transition.TransitionChainTN">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.rcpt.ActivateRcptPrintingTN" />
    </property>
  </bean>

  <bean id="TCN_ShowAboutScreen" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <list>
        <bean class="com.micros_retail.xfgclient.transition.util.PromptNotificationTN">
          <property name="promptState" ref="STATE_Notification" />
          <property name="promptKeyword" ref="KW_ShowLocalBrowser" />
          <property name="promptParameters">
            <array>
              <value>_empty</value>
              <value>_xfgclient.resource.about</value>
            </array>
          </property>
        </bean>
      </list>
    </property>
  </bean>

  <bean id="TCN_SelectPlayerResultsListUpSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ArrowUpSelectionPlayerResultsList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SelectPlayerResultsListDownSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ArrowDownSelectionPlayerResultsList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SelectPopUpListUpSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ArrowUpSelectionPopUpList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SelectPopUpListDownSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ArrowDownSelectionPopUpList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SelectTransListUpSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ArrowUpSelectionTransList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SelectTransListDownSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ArrowDownSelectionTransList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SelectItemSearchListUpSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ArrowUpSelectionItemSearchList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SelectItemSearchListDownSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ArrowDownSelectionItemSearchList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SelectCustomerSearchListUpSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ArrowUpSelectionCustomerSearchList" />
      </bean>
    </property>
  </bean>

  <bean id="TCN_SelectCustomerSearchListDownSelection" class="com.micros_retail.xfgclient.transition.TransitionChain">
    <property name="transitions">
      <bean class="com.micros_retail.xfgclient.transition.util.InvokeInterpreterTN">
        <property name="keyword" ref="KW_ArrowDownSelectionCustomerSearchList" />
      </bean>
    </property>
  </bean>

  <!-- Transition Chain Configuration End -->
</beans>
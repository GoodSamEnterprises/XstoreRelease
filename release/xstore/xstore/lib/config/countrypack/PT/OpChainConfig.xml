<?xml version="1.0" encoding="UTF-8"?>
<OpChainSet xmlns="http://micros.com/xstore/config/opchain" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="OpChainConfig.xsd">

  <OpChain name="WORKSTATION_OPEN_EXT.local.2">
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtWorkstationOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.WKSTN_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.FATURA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtWorkstationOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.WKSTN_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.FATURASIMPLICADA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtWorkstationOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.WKSTN_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.CREDIT_NOTE" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtWorkstationOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.WKSTN_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.RECOVERY.FATURASIMPLICADA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtWorkstationOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.WKSTN_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.RECOVERY.FATURA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtWorkstationOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.WKSTN_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.RECOVERY.CREDIT_NOTE" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtWorkstationOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.WKSTN_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.MANUAL.FATURASIMPLICADA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtWorkstationOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.WKSTN_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.MANUAL.FATURA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtWorkstationOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.WKSTN_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.MANUAL.CREDIT_NOTE" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtWorkstationOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.WKSTN_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.GR_SHIPPING" />
      <Parameter name="ResultField" value="Date" />
    </Op>
  </OpChain>

  <OpChain name="RETAIL_LOCATION_OPEN_ACTIVITY.local.2">
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtStoreOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.RETAIL_LOCATION_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.FATURA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtStoreOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.RETAIL_LOCATION_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.FATURASIMPLICADA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtStoreOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.RETAIL_LOCATION_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.CREDIT_NOTE" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtStoreOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.RETAIL_LOCATION_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.RECOVERY.FATURASIMPLICADA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtStoreOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.RETAIL_LOCATION_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.RECOVERY.FATURA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtStoreOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.RETAIL_LOCATION_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.RECOVERY.CREDIT_NOTE" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtStoreOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.RETAIL_LOCATION_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.MANUAL.FATURASIMPLICADA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtStoreOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.RETAIL_LOCATION_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.MANUAL.FATURA" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtStoreOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.RETAIL_LOCATION_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.MANUAL.CREDIT_NOTE" />
      <Parameter name="ResultField" value="Date" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.systemcycle.op.PtStoreOpenResetDocumentSequenceOp">
      <Parameter name="QueryKey" value="COUNTRYPACK.RETAIL_LOCATION_LAST_OPEN_DATE" />
      <Parameter name="SequenceName" value="COUNTRYPACK.PT.GR_SHIPPING" />
      <Parameter name="ResultField" value="Date" />
    </Op>
  </OpChain>

  <OpChain name="COUNTRYPACK.CUSTOMER_MAINTENANCE_EDIT">
    <Op class="oracle.retail.xstore.countrypack.common.invoice.op.InvoiceEditCustomerOp" longRunning="true" />
  </OpChain>

  <OpChain name="PRE_RETURN_VERIFICATION.local.pre">
    <ValidationOp validationsBean="countryPack.common.validateReturns" />
  </OpChain>

  <OpChain name="PRE_TENDERING.1">
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.ClearInvoiceTypeOp" />
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.SetInvoiceTypeOp" />
    <Op class="oracle.retail.xstore.countrypack.common.op.EnsureCustomerAssignedForFullInvoiceOp" />
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.PtFiscalCustomerSummaryOp" breakpoint="true">
      <Parameter name="FORM_KEY" value="CUSTOMER_SUMMARY" />
    </Op>
  </OpChain>

  <OpChain name="SALE_COMPLETE_FINISH.pre">
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.PtAssignSequencePropertyOp">
      <Parameter name="PeekSequence" value="true" />
      <Parameter name="HandleSequence" value="true" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.SignTransactionOp" />
  </OpChain>

  <OpChain name="SALE_COMPLETE_FINISH.FISCAL.AFTER_TRAN_SAVE">
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.PtAssignSequencePropertyOp" />
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.PtCommitSignatureOp" />
  </OpChain>

  <OpChain name="SHIPPING_PROCESS_SHIPMENT">
    <PromptOp class="dtv.pos.framework.op.PromptRunChainOp" key="PRINT_SHIPPING_LABEL">
      <Parameter name="ChainKey" value="SHIPPING_PROCESS_LABEL" />
    </PromptOp>
    <Op class="dtv.pos.inventory.ship.label.PromptTrackingNumberOp" />
  </OpChain>

  <OpChain name="SAVE_EXIT_SHIPPING" signal="InventoryOperationsComplete,TransactionComplete">
    <PromptOp class="dtv.pos.inventory.ship.op.PromptForShipNowOp" />
    <PromptOp class="dtv.pos.inventory.ship.op.PromptForCloseShippingDocumentOp" />
    <OpChainRoute chainKey="SHIPPING_PROCESS_SHIPMENT" condition="dtv.pos.inventory.ship.op.HaveItemsShipped" />
    <Op class="oracle.retail.xstore.countrypack.pt.shipping.op.PtCreateShippingTransactionOp">
      <Parameter name="persistOnReverse" value="true" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.shipping.op.AssignInventorySequenceOp">
      <Parameter name="PeekSequence" value="true" />
      <Parameter name="HandleSequence" value="true" />
    </Op>
    <Op class="oracle.retail.xstore.countrypack.pt.shipping.op.SignShippingTransactionOp" />
    <OpChainRoute chainKey="COUNTRYPACK.PT.HANDLE_AT_CODE" condition="dtv.pos.inventory.ship.op.HaveItemsShipped" />
    <Op class="oracle.retail.xstore.countrypack.pt.shipping.op.AssignInventorySequenceOp" />
    <WorkerOp workersBean="saveShippingWorkers" />
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.PtCommitSignatureOp" />
    <OpChainRoute chainKey="PRINT_PACKING_SLIP" condition="dtv.pos.inventory.ship.op.HaveItemsShipped" />
    <OpChainRoute chainKey="SHIPPING" chainType="START" />
  </OpChain>

  <OpChain name="LINE_SHIPPING" rollbackChainKey="PROMPT_CANCEL_INVENTORY" rollbackLevel="50" contextKey="SHIPPING">
    <PromptOp class="oracle.retail.xstore.countrypack.pt.shipping.op.PtPromptShippingItemScanOp" validationsBean="shippingItemRules" breakpoint="true" />
    <ValidationOp class="dtv.pos.inventory.ship.op.CheckItemNotOnFileOp" validationsBean="itemNotOnFileRules" />
    <OpChainRoute chainKey="SHIPPING_ITEM_AFTER_LOOKUP" />
  </OpChain>

  <OpChain name="COUNTRYPACK.PT.SEQUENCE_RESET">
    <PromptOp class="oracle.retail.xstore.countrypack.pt.op.PtIncrementSequenceCharacterOp" />
  </OpChain>

  <OpChain name="COUNTRYPACK.ASSIGN_MANUAL_RECEIPT" rollbackChainKey="COUNTRYPACK.REMOVE_MANUAL_RECEIPT">
    <PromptOp class="oracle.retail.xstore.countrypack.pt.register.op.PtPromptManualInvoiceUsageOp" />
    <PromptOp class="oracle.retail.xstore.countrypack.pt.register.op.PtPromptManualInvoiceTypeOp" />
    <PromptOp class="oracle.retail.xstore.countrypack.pt.register.op.PtPromptManualInvoiceNumberOp" />
    <PromptOp class="oracle.retail.xstore.countrypack.common.register.op.PromptManualReceiptDateOp" key="COUNTRYPACK.PROMPT_MANUAL_RECEIPT_DATE" validationsBean="countrypack.manualReceiptDateValidation" />
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.PtCreateManualReceiptOp" />
    <OpChainRoute chainKey="SALE_ITEM_START" chainType="START" />
  </OpChain>

  <OpChain name="PRE_UNVERIFIED_RETURN.local">
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.PtPromptOriginalInvoiceNumberOp" />
  </OpChain>

  <OpChain name="ADD_RETURN_ITEM_TO_TRAN.local.post" >
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.PtAddReturnOriginalReferenceOp" />
  </OpChain>

  <OpChain name="COUNTRYPACK.REMOVE_MANUAL_RECEIPT">
    <Op class="oracle.retail.xstore.countrypack.pt.register.op.PtRemoveManualReceiptOp" />
    <OpChainRoute chainKey="SALE_ITEM_START" chainType="START" />
  </OpChain>

  <OpChain name="PRINT_POST_VOID_RECIPTS">
    <Op class="oracle.retail.xstore.countrypack.pt.op.PtGetVoidReceiptOp" />
    <Op class="dtv.pos.hardware.op.PrintRcptsOp" />
    <WorkerOp workersBean="saveRcptsWorkers" />
    <Op class="dtv.pos.hardware.op.WaitForRcptPrintOp" required="false" />
  </OpChain>

</OpChainSet>

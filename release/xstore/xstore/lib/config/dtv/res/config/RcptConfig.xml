<?xml version="1.0" encoding="UTF-8"?>
<ReceiptDefinitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="RcptConfig.xsd">
  <FormatterMap>
    <!-- @Deprecated (4.8.0) -->
    <Formatter name="TRANSLATE_IF_KEY" class="dtv.pos.i18n.format.I18nFormatter" ctx="RECEIPT" force="true" />
    <!-- /@Deprecated (4.8.0) -->

    <Formatter name="RcptTranslater" class="dtv.pos.i18n.format.I18nFormatter" ctx="RECEIPT" force="true" />
    <Formatter name="TranslateIfKey" class="dtv.pos.i18n.format.I18nFormatter" ctx="RECEIPT" force="false" />
    <Formatter name="DateShort" class="dtv.pos.i18n.format.DateFormatter" ctx="RECEIPT" formatterType="DateShort" />
    <Formatter name="DateMedium" class="dtv.pos.i18n.format.DateFormatter" ctx="RECEIPT" formatterType="DateMedium" />
    <Formatter name="DateTimeMedium" class="dtv.pos.i18n.format.DateFormatter" ctx="RECEIPT" formatterType="DateTimeMedium" />
    <Formatter name="TimeShort" class="dtv.pos.i18n.format.DateFormatter" ctx="RECEIPT" formatterType="TimeShort" />
    <Formatter name="DayOfWeek" class="dtv.pos.i18n.format.DateFormatter" ctx="RECEIPT" formatterType="DayOfWeekShort" />
    <Formatter name="DayAndMonth" class="dtv.pos.i18n.format.DateFormatter" format="dd MMMM" />
    <Formatter name="Money" class="dtv.pos.i18n.format.MoneyFormatter" ctx="RECEIPT" />
    <Formatter name="Money$" class="dtv.pos.i18n.format.MoneyFormatter" ctx="RECEIPT" includeCurrencySymbol="true" />
    <Formatter name="Percent" class="dtv.pos.i18n.format.PercentFormatter" ctx="RECEIPT" />
    <Formatter name="Boolean" class="dtv.pos.i18n.format.BooleanFormatter" />
    <Formatter name="Quantity" class="dtv.pos.i18n.format.QuantityFormatter" ctx="RECEIPT" />
    <Formatter name="CreditCard" class="dtv.pos.i18n.format.CreditCardFormatter" />
    <Formatter name="CreditCardExp" class="dtv.pos.i18n.format.CreditCardExpFormatter" />
    <Formatter name="EncodedPrice" class="dtv.hardware.barcode.PriceEncodingFormatter" />
    <Formatter name="Phone" class="dtv.pos.i18n.format.TelephoneFormatter" />
    <Formatter name="PostalCode" class="dtv.pos.i18n.format.PostalCodeFormatter" />
    <Formatter name="Hours" class="dtv.pos.i18n.format.DecimalFormatter" format="0.00" />
    <Formatter name="Last4" class="dtv.pos.i18n.format.LengthFormatter" ctx="RECEIPT" length="-4" />
    <Formatter name="ShortDescription" class="dtv.pos.i18n.format.LengthFormatter" ctx="RECEIPT" length="20" />
    <Formatter name="ItemDescriptionLength" class="dtv.pos.i18n.format.LengthFormatter" ctx="RECEIPT" length="30" />
    <Formatter name="TenderDescriptionLength" class="dtv.pos.i18n.format.LengthFormatter" ctx="RECEIPT" length="23" />
    <Formatter name="Last4" class="dtv.pos.i18n.format.LengthFormatter" ctx="RECEIPT" length="-4" />
    <Formatter name="VoucherType" class="dtv.pos.i18n.format.VoucherTypeFormatter" ctx="RECEIPT" />
    <Formatter name="VoucherNumber" class="dtv.pos.i18n.format.VoucherSerialNumberFormatter" />
    <Formatter name="BasicAddress" class="dtv.pos.i18n.format.BasicAddressFormatter" />
    <Formatter name="BasicName" class="dtv.pos.i18n.format.BasicNameFormatter" />
    <Formatter name="TranType" class="dtv.pos.i18n.format.CodeDescriptionFormatter" ctx="RECEIPT">
      <Parameter name="setCodeClass">
        <param_value dtype="Class">dtv.pos.common.TransactionType</param_value>
      </Parameter>
    </Formatter>
    <Formatter name="TenderCtrlTranType" class="dtv.pos.i18n.format.CodeDescriptionFormatter" ctx="RECEIPT">
      <Parameter name="setCodeClass">
        <param_value dtype="Class">dtv.pos.till.types.TenderControlTransTypeCode</param_value>
      </Parameter>
    </Formatter>
    <Formatter name="TimeclockEntryType" class="dtv.pos.i18n.format.CodeDescriptionFormatter" ctx="RECEIPT">
      <Parameter name="setCodeClass">
        <param_value dtype="Class">dtv.pos.timeclock.TimeClockEntryType</param_value>
      </Parameter>
    </Formatter>
  </FormatterMap>

  <ReceiptCopyRules>
    <ReceiptCopyRule name="BALANCE_INQUIRY" document="BALANCE_INQUIRY">
      <Rule class="dtv.tenderauth.storedvalue.BalanceReceiptRule" />
    </ReceiptCopyRule>
    <!-- ensure a report copy for no sales -->
    <ReceiptCopyRule name="NO_SALE" document="NO_SALE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="NO_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <!-- ensure a report copy for timeclock transactions -->
    <ReceiptCopyRule name="TIMECLOCK" document="TIMECLOCK" additive="true">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="TIMECLOCK" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TimeClockEntryCodeRule" excludeType="TIMECARD_MAINTENANCE" />
    </ReceiptCopyRule>
    <!-- ensure a store copy for tenders requiring signatures -->
    <ReceiptCopyRule name="CUST_SIGN" document="STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustSignRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
    </ReceiptCopyRule>
    <!-- ensure a store copy for tenders requiring an imprint -->
    <ReceiptCopyRule name="IMPRINT_TENDER" document="STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TenderImprintRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
    </ReceiptCopyRule>
    <!-- ensure a store copy for transactions with refunds -->
    <ReceiptCopyRule name="REFUND" document="STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.RefundRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
    </ReceiptCopyRule>
    <!-- ensure a home office copy for transactions with home office check refunds -->
    <ReceiptCopyRule name="HOME_OFFICE" document="HOME_OFFICE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TenderIdRule" tenderId="HOME_OFFICE_CHECK" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="VALIDATE_CLOCKOUT" document="VALIDATE_CLOCKOUT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.ValidateClockOutCopyRule" />
    </ReceiptCopyRule>
    <!-- ensure a customer copy for retail transactions -->
    <ReceiptCopyRule name="RETAIL_SALE" document="CUSTOMER">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="RETAIL_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.EnabledForSuspendedTransactionRule" />
    </ReceiptCopyRule>
    <!-- ensure a customer copy for exchange rate transactions -->
    <ReceiptCopyRule name="EXCHANGE_RATE_TRANS" document="EXCHANGE_RATE_TRANS">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="EXCHANGE_RATE" />
    </ReceiptCopyRule>
    <!-- ensure a customer copy for layaway accounts -->
    <ReceiptCopyRule name="LAYAWAY_ACCOUNT" document="LAYAWAY_ACCOUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="LAYAWAY" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="LAYAWAY_MAIN_STORE" document="LAYAWAY_MAIN_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="LAYAWAY" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="LAYAWAY_MERCH_TICKET" document="LAYAWAY_MERCH_TICKET">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.LayawayTicketRule" type="LAYAWAY" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountStateRule">
        <Parameter name="state" value="NEW" />
        <Parameter name="state" value="OPEN" />
      </Rule>
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.AnyCustomerAccountDetailStateRule">
        <Parameter name="state" value="NEW" />
        <Parameter name="state" value="OPEN" />
      </Rule>
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.AnyNewCustomerAccountActivityRule">
        <Parameter name="activityCode" value="SETUP" />
      </Rule>
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.ReturnRule" inverted="true" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="LAYAWAY_MERCH_TICKET_PER_ITEM" document="LAYAWAY_MERCH_TICKET_PER_ITEM">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.LayawayTicketRule">
        <Parameter name="type" value="LAYAWAY" />
        <Parameter name="perItem" value="true" />
      </Rule>
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountStateRule">
        <Parameter name="state" value="NEW" />
        <Parameter name="state" value="OPEN" />
      </Rule>
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.ReturnRule" inverted="true" />
    </ReceiptCopyRule>
    <!-- ensure a customer copy for special order accounts -->
    <ReceiptCopyRule name="SP_ORDER_ACCOUNT" document="SP_ORDER_ACCOUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="SPECIAL_ORDER" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="SP_ORDER_MAIN_STORE" document="SP_ORDER_MAIN_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="SPECIAL_ORDER" />
    </ReceiptCopyRule>
    <!-- ensure a customer copy for configurable customer accounts -->
    <ReceiptCopyRule name="PRESALE_ACCOUNT" document="PRESALE_ACCOUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.ConfigurableCustAcctTypeRule" type="PRESALE" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="PRESALE_ACCOUNT_MAIN_STORE" document="PRESALE_ACCOUNT_MAIN_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.ConfigurableCustAcctTypeRule" type="PRESALE" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="ONHOLD_ACCOUNT" document="ONHOLD_ACCOUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.ConfigurableCustAcctTypeRule" type="ONHOLD" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="ONHOLD_ACCOUNT_MAIN_STORE" document="ONHOLD_ACCOUNT_MAIN_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.ConfigurableCustAcctTypeRule" type="ONHOLD" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="SEND_SALE_ACCOUNT" document="SEND_SALE_ACCOUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="SEND_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountAnyNonVoidedItemsRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="SEND_SALE_MAIN_STORE" document="SEND_SALE_MAIN_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="SEND_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountAnyNonVoidedItemsRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="SEND_SALE_MERCH_TICKET" document="SEND_SALE_MERCH_TICKET">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="SEND_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountCanceledRule" inverted="true" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.DeliveryModifierNullRule" inverted="true" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.PrintSendSaleMerchandiseTicketPerItemRule" inverted="true" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.ReturnRule" inverted="true" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountAnyNonVoidedItemsRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="SEND_SALE_MERCH_TICKET_PER_ITEM" document="SEND_SALE_MERCH_TICKET_PER_ITEM">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="SEND_SALE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountCanceledRule" inverted="true" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.DeliveryModifierNullRule" inverted="true" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.PrintSendSaleMerchandiseTicketPerItemRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.ReturnRule" inverted="true" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountAnyNonVoidedItemsRule" />
    </ReceiptCopyRule>
    <!-- ensure a customer copy for work order accounts -->
    <ReceiptCopyRule name="WORK_ORDER_ACCOUNT1" document="WORK_ORDER_ACCOUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="WORK_ORDER" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountCanceledRule" inverted="true" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountStateRule" state="READY_TO_PICKUP" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="WORK_ORDER_ACCOUNT2" document="WORK_ORDER_ACCOUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="WORK_ORDER" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountCanceledRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="WORK_ORDER_ACCOUNT3" document="WORK_ORDER_ACCOUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="WORK_ORDER" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountCanceledRule" inverted="true" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountStateRule" inverted="true">
        <Parameter name="state" value="READY_TO_PICKUP" />
      </Rule>
    </ReceiptCopyRule>
    <ReceiptCopyRule name="WORK_ORDER_MAIN_STORE" document="WORK_ORDER_MAIN_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="WORK_ORDER" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="WORK_ORDER_MERCH_TICKET" document="WORK_ORDER_MERCH_TICKET">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerAccountTypeRule" type="WORK_ORDER" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountCanceledRule" inverted="true" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CustomerItemAccountStateRule" state="NEW" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.ReturnRule" inverted="true" />
    </ReceiptCopyRule>
    <!-- ensure a customer copy for tender control transactions -->
    <ReceiptCopyRule name="TENDER_EXCHANGE" document="CUSTOMER_TENDER_EXCHANGE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TenderControlTransTypeRule" type="TENDER_EXCHANGE" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <!-- ensure store credits are printed -->
    <ReceiptCopyRule name="ISSUE_STORE_CREDITISSUED" document="ISSUE_STORE_CREDITISSUED">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.HasTenderIdRule" type="ISSUE_STORE_CREDIT" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <!-- ensure sold gift certicates are printed -->
    <ReceiptCopyRule name="SOLD_GIFT_CERTIFICATES" document="SOLD_GIFT_CERTIFICATES">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.HasNonPhysicalItemTypeRule" type="VOUCHER" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <!-- Session control transaction (attach drawer, remove drawer, assign drawer) -->
    <ReceiptCopyRule name="ATTACH_REMOVE_TILL" document="ATTACH_REMOVE_TILL">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.AttachRemoveDrawerRule" />
    </ReceiptCopyRule>
    <!-- cash count (begin count, cash pickup) -->
    <ReceiptCopyRule name="CASH_COUNT" document="CASH_COUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CashCountRule" />
    </ReceiptCopyRule>
    <!-- paid in -->
    <ReceiptCopyRule name="PAID_IN" document="PAID_IN">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TenderControlTransTypeRule" type="PAID_IN" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <!-- paid out -->
    <ReceiptCopyRule name="PAID_OUT" document="PAID_OUT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TenderControlTransTypeRule" type="PAID_OUT" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <!-- associate advance -->
    <ReceiptCopyRule name="ASSOCIATE_ADVANCE" document="ASSOCIATE_ADVANCE" copies="2">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TenderControlTransTypeRule" type="ASSOCIATE_ADVANCE" />
    </ReceiptCopyRule>
    <!-- till counts (mid count, closing count, reconcile, bank deposit) -->
    <ReceiptCopyRule name="TILL_END_COUNT" document="TILL_END_COUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TillEndCountRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="MID_COUNT" document="MID_COUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.MidCountRule" />
    </ReceiptCopyRule>
    <!-- store bank end count receipt -->
    <ReceiptCopyRule name="STORE_BANK_TILL_END_COUNT" document="STORE_BANK_TILL_END_COUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.DepositSlipCopyRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.StoreBankClosingCountRule" />
    </ReceiptCopyRule>
    <!-- store bank deposit slip -->
    <ReceiptCopyRule name="DEPOSIT_SLIP" document="DEPOSIT_SLIP" additive="true">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.DepositSlipCopyRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="SYSTEM_CYCLE" document="SYSTEM_CYCLE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.OpenCloseRule" />
    </ReceiptCopyRule>
    <!-- assign drawer -->
    <ReceiptCopyRule name="ISSUE_TILL" document="ISSUE_TILL">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TenderControlTransTypeRule" type="ISSUE_TILL_STARTING_CASH" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="TILL_RECONCILE_COUNT" document="TILL_RECONCILE_COUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TillReconcileCountRule" />
    </ReceiptCopyRule>
    <!-- Post Void -->
    <ReceiptCopyRule name="POSTVOID" document="POSTVOID">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="POST_VOID" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="TRAINING_MODE_ENTRY" document="TRAINING_MODE_ENTRY">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="TRAINING_MODE_ENTRY" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="TRAINING_MODE_EXIT" document="TRAINING_MODE_EXIT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="TRAINING_MODE_EXIT" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="TIMECARD_ACCEPTANCE_FORM" document="TIMECARD_ACCEPTANCE_FORM">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TimecardAcceptanceFormRule" />
    </ReceiptCopyRule>
    <!--  Tax Exempt Store Copy -->
    <ReceiptCopyRule name="TAXEXEMPTION_STORECOPY" document="STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionStateRule" transactionStatus="SUSPEND" inverted="True"/>
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.LineItemTaxExemptRule" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
    </ReceiptCopyRule>
    <!--  Employee Schedule Printing -->
    <ReceiptCopyRule name="EMPLOYEE_SCHEDULE" document="EMPLOYEE_SCHEDULE_RECEIPT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.SchedulePrintRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="ISSUE_BOUNCE_BACK_COUPON" document="ISSUE_BOUNCE_BACK_COUPON">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.HasIssuedBounceBackCouponRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="GENERIC_REBATE_RECEIPT" document="GENERIC_REBATE_RECEIPT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.DocumentReceiptTypeRule" type="GENERIC_REBATE_RECEIPT" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="WARRANTY_RECEIPT" document="WARRANTY_RECEIPT">
      <Rule class="dtv.pos.warranty.conditions.AnyWarrantiesRcptCopyRule" type="WARRANTY" />
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.NoCanceledTransactionRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="REBATE_COPY" document="REBATE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.IsInstanceCopyRule" value="dtv.pos.register.rebate.RebateSource" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="INVENTORY_LOCATION_SUMMARY_COUNT" document="INVENTORY_LOCATION_SUMMARY_COUNT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="INVENTORY_SUMMARY_COUNT" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="TILL_SUMMARY" document="TILL_SUMMARY">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TillSummaryRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="GIFT_RECEIPTS" document="GIFT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.IsInstanceCopyRule" value="dtv.pos.register.giftreceipt.GiftReceiptDataList" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="RAIN_CHECK" document="RAIN_CHECK">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.TransactionTypeRule" type="RAIN_CHECK" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="LOYALTY_BALANCE_INQUIRY" document="LOYALTY_BALANCE_INQUIRY">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.IsInstanceCopyRule" value="dtv.xst.dao.cat.ICustomerLoyaltyCard" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="LOYALTY_HISTORY_INQUIRY" document="LOYALTY_HISTORY_INQUIRY">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.IsInstanceCopyRule" value="dtv.pos.customer.CustomerMaintenanceModel" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="SERIAL_EXCHANGE_CUSTOMER" document="SERIAL_EXCHANGE_CUSTOMER">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.SerialExchangeCopyRule" type="SERIAL_EXCHANGE"/>
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="SERIAL_EXCHANGE_STORE" document="SERIAL_EXCHANGE_STORE">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.SerialExchangeCopyRule" type="SERIAL_EXCHANGE"/>
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.CanceledTransactionReceiptEnabledRule" />
    </ReceiptCopyRule>
    <ReceiptCopyRule name="CUSTOMER_CONSENT_RECEIPT" document="CUSTOMER_CONSENT_RECEIPT">
      <Rule class="dtv.pos.hardware.rcptbuilding.copyrules.IsInstanceCopyRule" value="dtv.pos.customer.consent.CustomerConsentDetails" />
    </ReceiptCopyRule>
  </ReceiptCopyRules>

  <receipts>
    <receipt document="WARRANTY_RECEIPT" sectionref="WARRANTY_RECEIPT" email="true" />
    <receipt document="CUSTOMER" sectionref="CustomerCopy" email="true" />
    <receipt document="CUSTOMER_TENDER_EXCHANGE" sectionref="CUSTOMER_TENDER_EXCHANGE_COPY" />
    <receipt document="GIFT" sectionref="GiftReceipts" email="true" />
    <receipt document="STORE" sectionref="StoreCopy" />
    <receipt document="HOME_OFFICE" sectionref="HomeOfficeCopy" />
    <receipt document="ISSUE_STORE_CREDITISSUED" sectionref="StoreCreditsIssued" />
    <receipt document="ISSUE_BOUNCE_BACK_COUPON" sectionref="BounceBackCouponsIssued" />
    <receipt document="SOLD_GIFT_CERTIFICATES" sectionref="GiftCertificatesSold" />
    <receipt document="ATTACH_REMOVE_TILL" sectionref="AttachRemoveTill" />
    <receipt document="CASH_COUNT" sectionref="TillCashCounts" />
    <receipt document="PAID_IN" sectionref="PaidIn" />
    <receipt document="PAID_OUT" sectionref="PaidOut" />
    <receipt document="ASSOCIATE_ADVANCE" sectionref="ASSOCIATE_ADVANCE" />
    <receipt document="TILL_END_COUNT" sectionref="TillCounts" />
    <receipt document="MID_COUNT" sectionref="MidCounts" />
    <receipt document="STORE_BANK_TILL_END_COUNT" sectionref="StoreBankTillCounts" />
    <receipt document="DEPOSIT_SLIP" sectionref="DepositSlip" />
    <receipt document="ISSUE_TILL" sectionref="IssueTill" />
    <receipt document="SYSTEM_CYCLE" sectionref="SYSTEM_CYCLE" />
    <receipt document="EXCHANGE_RATE_TRANS" sectionref="EXCHANGE_RATE_TRANS" />
    <receipt document="TILL_RECONCILE_COUNT" sectionref="TillCounts" />
    <receipt document="POSTVOID" sectionref="POSTVOID" />
    <receipt document="LAYAWAY_MAIN_STORE" sectionref="LAYAWAY_MAIN_STORE" />
    <receipt document="LAYAWAY_ACCOUNT" sectionref="LAYAWAY_ACCOUNT" email="true" />
    <receipt document="LAYAWAY_MERCH_TICKET" sectionref="LAYAWAY_MERCH_TICKET" />
    <receipt document="LAYAWAY_MERCH_TICKET_PER_ITEM" sectionref="LAYAWAY_MERCH_TICKET_PER_ITEM" />
    <receipt document="SP_ORDER_ACCOUNT" sectionref="SP_ORDER_ACCOUNT" email="true" />
    <receipt document="SP_ORDER_MAIN_STORE" sectionref="SP_ORDER_MAIN_STORE" />
    <receipt document="SEND_SALE_ACCOUNT" sectionref="SEND_SALE_ACCOUNT" email="true" />
    <receipt document="SEND_SALE_MAIN_STORE" sectionref="SEND_SALE_MAIN_STORE" />
    <receipt document="SEND_SALE_MERCH_TICKET_PER_ITEM" sectionref="SEND_SALE_MERCH_TICKET_PER_ITEM" />
    <receipt document="SEND_SALE_MERCH_TICKET" sectionref="SEND_SALE_MERCH_TICKET" />
    <receipt document="WORK_ORDER_ACCOUNT" sectionref="WORK_ORDER_ACCOUNT" email="true" />
    <receipt document="WORK_ORDER_MAIN_STORE" sectionref="WORK_ORDER_MAIN_STORE" />
    <receipt document="WORK_ORDER_MERCH_TICKET" sectionref="WORK_ORDER_MERCH_TICKET" />
    <receipt document="TRAINING_MODE_ENTRY" sectionref="TRAINING_MODE_ENTRY" />
    <receipt document="TRAINING_MODE_EXIT" sectionref="TRAINING_MODE_EXIT" />
    <receipt document="BALANCE_INQUIRY" sectionref="BALANCE_INQUIRY" />
    <receipt document="TIMECARD_ACCEPTANCE_FORM" sectionref="TIMECARD_ACCEPTANCE_FORM" />
    <receipt document="EMPLOYEE_SCHEDULE_RECEIPT" sectionref="EMPLOYEE_SCHEDULE_SECTION" />
    <receipt document="GENERIC_REBATE_RECEIPT" sectionref="GENERIC_REBATE_RECEIPT" />
    <receipt document="VALIDATE_CLOCKOUT" sectionref="VALIDATE_CLOCKOUT" />
    <receipt document="REBATE" sectionref="RebateCopy" />
    <receipt document="INVENTORY_LOCATION_SUMMARY_COUNT" sectionref="INVENTORY_LOCATION_SUMMARY_COUNT" />
    <receipt document="TILL_SUMMARY" sectionref="TillSummary" />
    <receipt document="NO_SALE" sectionref="NoSale" />
    <receipt document="TIMECLOCK" sectionref="ClockInOut" />
    <receipt document="PRESALE_ACCOUNT" sectionref="CONFIGURABLE_CUSTOMER_ACCOUNTS" email="true" />
    <receipt document="PRESALE_ACCOUNT_MAIN_STORE" sectionref="CONFIGURABLE_CUSTOMER_ACCOUNTS_MAIN_STORE" />
    <receipt document="ONHOLD_ACCOUNT" sectionref="CONFIGURABLE_CUSTOMER_ACCOUNTS" email="true" />
    <receipt document="ONHOLD_ACCOUNT_MAIN_STORE" sectionref="CONFIGURABLE_CUSTOMER_ACCOUNTS_MAIN_STORE" />
    <receipt document="RAIN_CHECK" sectionref="RainCheck" />
    <receipt document="LOYALTY_BALANCE_INQUIRY" sectionref="LOYALTY_BALANCE_INQUIRY" />
    <receipt document="LOYALTY_HISTORY_INQUIRY" sectionref="LOYALTY_HISTORY_INQUIRY" />
    <!-- ********************************** -->
    <!-- Rcptconfig.xml injection entries for fiscal printer integration -->
    <!-- ********************************** -->
    <receipt document="FISCAL.DISCOUNT_DESCRIPTION" sectionref="FISCAL.DISCOUNT_DESCRIPTION" />
    <receipt document="FISCAL.LINE_ITEM_DESCRIPTION" sectionref="FISCAL.LINE_ITEM_DESCRIPTION" />
    <receipt document="FISCAL.LINE_ITEM_PRE" sectionref="FISCAL.LINE_ITEM_PRE" />
    <receipt document="FISCAL.LINE_ITEM_SKIP_DISC_PRE" sectionref="FISCAL.LINE_ITEM_SKIP_DISC_PRE" />
    <receipt document="FISCAL.LINE_ITEM_POST" sectionref="FISCAL.LINE_ITEM_POST" />
    <receipt document="FISCAL.TENDER_DESCRIPTION" sectionref="FISCAL.TENDER_DESCRIPTION" />
    <receipt document="FISCAL.ROUNDING_INFO" sectionref="FISCAL.ROUNDING_INFO" />
    <receipt document="FISCAL.TRANS_FOOTER" sectionref="FISCAL.TRANS_FOOTER" />
    <receipt document="FISCAL.SET_RECEIPT_HEADER" sectionref="FISCAL.SET_RECEIPT_HEADER" />
    <receipt document="SERIAL_EXCHANGE_CUSTOMER" sectionref="SerialExchangeCustomerCopy" email="true" />
    <receipt document="SERIAL_EXCHANGE_STORE" sectionref="SerialExchangeStoreCopy"  />
    <receipt document="CUSTOMER_CONSENT_RECEIPT" sectionref="CustomerConsentReceipt" />
  </receipts>

  <FrankTenders>
    <!-- specify template for all checks, including foreign traveler's checks -->
    <FrankTender type="CHECK" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.ttr.ICheckTenderLineItem -->
      <ParameterizedFormattable key="_frankCheckDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getCheckSequenceNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankCheck</sectionref>
    </FrankTender>
    <!-- specify template for gift certificate -->
    <FrankTender type="GIFT_CERTIFICATE" action="ISSUED">
      <!-- this formattable will be working with dtv.xst.dao.trl.ISaleReturnLineItem -->
      <ParameterizedFormattable key="_frankIssueGiftCertificateDescription">
        <EvaluatedFormattable method="getItemDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getFaceValueAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankGCSold</sectionref>
      <sectionref>post_void_frank</sectionref>
    </FrankTender>
    <FrankTender type="GIFT_CERTIFICATE" action="ISSUED" post_void="true">
      <!-- this formattable will be working with dtv.xst.dao.trl.ISaleReturnLineItem -->
      <ParameterizedFormattable key="_frankIssueGiftCertificateDescription">
        <EvaluatedFormattable method="getItemDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getFaceValueAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankGCSold</sectionref>
      <sectionref>post_void_frank</sectionref>
    </FrankTender>
    <FrankTender type="ISSUE_GIFT_CERTIFICATE" action="ISSUED">
      <!-- this formattable will be working with IVoucherTenderLineItem -->
      <ParameterizedFormattable key="_frankIssueGiftCertificateDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getFaceValueAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankGCSold</sectionref>
      <sectionref>post_void_frank</sectionref>
    </FrankTender>
    <FrankTender type="ISSUE_GIFT_CERTIFICATE" action="ISSUED" post_void="true">
      <!-- this formattable will be working with IVoucherTenderLineItem -->
      <ParameterizedFormattable key="_frankIssueGiftCertificateDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getFaceValueAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankGCSold</sectionref>
      <sectionref>post_void_frank</sectionref>
    </FrankTender>
    <FrankTender type="GIFT_CERTIFICATE" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.trl.ISaleReturnLineItem -->
      <ParameterizedFormattable key="_frankRedeemGiftCertificateDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankGCRedeem</sectionref>
      <sectionref>post_void_frank</sectionref>
    </FrankTender>
    <FrankTender type="GIFT_CERTIFICATE" action="REDEEMED" post_void="true">
      <!-- this formattable will be working with dtv.xst.dao.trl.ISaleReturnLineItem -->
      <ParameterizedFormattable key="_frankRedeemGiftCertificateDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankGCRedeem</sectionref>
      <sectionref>post_void_frank</sectionref>
    </FrankTender>
    <FrankTender type="MALL_CERTIFICATE" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.trl.ISaleReturnLineItem -->
      <ParameterizedFormattable key="_frankRedeemGiftCertificateDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankGCRedeem</sectionref>
    </FrankTender>
    <!-- specify template for traveler's checks -->
    <FrankTender type="TRAVELERS_CHECK" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.trl.ICheckTenderLineItem -->
      <ParameterizedFormattable key="_frankTravelersCheckDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getCheckSequenceNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankTravelersCheck</sectionref>
    </FrankTender>
    <FrankTender type="USD_TRAVELERS_CHECK" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.trl.ICheckTenderLineItem -->
      <ParameterizedFormattable key="_frankTravelersCheckDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getCheckSequenceNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankTravelersCheck</sectionref>
    </FrankTender>
    <FrankTender type="CAD_TRAVELERS_CHECK" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.trl.ICheckTenderLineItem -->
      <ParameterizedFormattable key="_frankTravelersCheckDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getCheckSequenceNumber" />
        <EvaluatedFormattable method="getForeignAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankTravelersCheck</sectionref>
    </FrankTender>
    <FrankTender type="MXN_TRAVELERS_CHECK" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.trl.ICheckTenderLineItem -->
      <ParameterizedFormattable key="_frankTravelersCheckDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getCheckSequenceNumber" />
        <EvaluatedFormattable method="getForeignAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankTravelersCheck</sectionref>
    </FrankTender>
    <FrankTender type="MALL_CERTIFICATE_CHECK" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.ttr.ICheckTenderLineItem -->
      <ParameterizedFormattable key="_frankCheckDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getCheckSequenceNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankMallCertCheck</sectionref>
    </FrankTender>
    <!-- specify template for redeemed corporate coupons -->
    <FrankTender type="CORP_COUPON" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.trl.ITenderLineItem -->
      <ParameterizedFormattable key="_frankCorporateCouponDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankCouponTender</sectionref>
    </FrankTender>
    <!-- specify template for redeemed manufacturer's coupons -->
    <FrankTender type="MANUFACTURER_COUPON" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.trl.ITenderLineItem -->
      <ParameterizedFormattable key="_frankManufacturersCouponDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankCouponTender</sectionref>
    </FrankTender>
    <FrankTender type="ISSUE_STORE_CREDIT" action="ISSUED">
      <!-- this formattable will be working with dtv.xst.dao.trl.IVoucherTenderLineItem -->
      <ParameterizedFormattable key="_frankStoreCreditIssuedDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankStoreCreditIssued</sectionref>
      <sectionref>post_void_frank</sectionref>
    </FrankTender>
    <FrankTender type="STORE_CREDIT" action="REDEEMED">
      <!-- this formattable will be working with dtv.xst.dao.trl.IVoucherTenderLineItem -->
      <ParameterizedFormattable key="_frankStoreCreditRedeemDescription">
        <EvaluatedFormattable method="getTender.getDescription" />
        <EvaluatedFormattable method="getSerialNumber" />
        <EvaluatedFormattable method="getAmount" formatter="MONEY" />
      </ParameterizedFormattable>
      <sectionref>FrankStoreCreditRedeem</sectionref>
    </FrankTender>
  </FrankTenders>

  <sections>

     <section name="SerialExchangeCustomerCopy">
      <sectionref>header</sectionref>
      <sectionref>CUST_COPY_HEADER_DB</sectionref>
      <sectionref>exchange_items</sectionref>
      <sectionref>footer_cust_copy</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>serialExchangeLabel</sectionref>
      <sectionref>LOCAL.CUST_COPY_FOOTER</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="SerialExchangeStoreCopy">
      <sectionref>header</sectionref>
      <sectionref>CUST_COPY_HEADER_DB</sectionref>
      <sectionref>exchange_items</sectionref>
      <sectionref>footer_cust_copy</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>serialExchangeLabel</sectionref>
      <sectionref>LOCAL.CUST_COPY_FOOTER</sectionref>
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

      <section name="exchange_items">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <sectionref>exchange_item_header</sectionref>
    </section>

    <section name="exchange_item_header">
      <!-- item header -->
      <row style="STRONGUNDERLINE">
        <field text="_item" />
        <field text="_qty" align="R" loc="14" />
        <field text="_price" align="R" loc="-15" />
      </row>
      <sectionref>exchange_item_details</sectionref>
      <row />
    </section>

    <section name="exchange_item_details">
      <!-- item iterator -->
      <iterator method="getLineItemsByTypeCodeFiltered">
        <method_param dtype="String">EXCHANGE</method_param>
        <method_param dtype="String">dtv.pos.hardware.rcptbuilding.DefaultRcptLineItemFilter</method_param>
        <!-- The following line is an example of a summary filter, for base we are not going to use a summary filter-->
        <!-- <method_param dtype="String">dtv.pos.hardware.rcptbuilding.SummaryRcptLineItemFilter</method_param> -->
        <sectionref>exchanged_item</sectionref>
      </iterator>
    </section>
     <section name="exchanged_item">
      <row>
        <field method="getItem.getDescription" style="BOLD" />
      </row>
      <row>
        <field method="getItemId" />
        <field text="1" align="R" loc="14" />
        <field text="_na" align="R" loc="-15" />
      </row>
      <row>
          <field text="_originalSerialNumberReceipt"></field>
          <field method="getOriginalSerialNumber"></field>
      </row>
      <row>
          <field text="_newSerialNumberReceipt"></field>
          <field method="getNewSerialNumber"></field>
      </row>
      </section>

    <section name="logo">
      <picture filename="res/graphics/receipt/logo.bmp" preload="true" />
    </section>

    <section name="signature_line">
      <horizontal_rule style="Strong">
        <field text="x" />
      </horizontal_rule>
    </section>

    <section name="logo_small">
      <sectionref>logo</sectionref>
    </section>

    <!-- - - - - - - - credit card terms section - - - - - -  -->
    <section name="credit_card_terms">
      <condition class="dtv.pos.docbuilding.conditions.TenderLineItemStatusCodeNotExistsCondition" value="REFUND" />
      <condition class="dtv.pos.docbuilding.conditions.IncludeTenderTypeCondition" type="CREDIT_CARD" />
      <condition class="dtv.pos.docbuilding.conditions.TenderIdCondition" tenderId="ROOM_CHARGE" inverted="true" />
      <sectionref>TENDER_CREDIT_TERMS_DB</sectionref>
    </section>

    <section name="credit_card_terms_for_signature">
      <condition class="dtv.pos.docbuilding.conditions.IncludeTenderTypeCondition" type="CREDIT_CARD" />
      <sectionref>TENDER_CREDIT_TERMS_DB</sectionref>
    </section>

    <section name="custcopy_credit_card_terms">
      <condition method="getSignature.getSignature" comparison="NOT_NULL" />
      <sectionref>TENDER_CREDIT_TERMS_DB</sectionref>
    </section>

    <section name="account_receivable_terms">
      <condition class="dtv.pos.docbuilding.conditions.TenderLineItemStatusCodeNotExistsCondition" value="REFUND" />
      <condition class="dtv.pos.docbuilding.conditions.IncludeTenderTypeCondition" type="ACCOUNT" />
      <row />
      <sectionref>HOUSE_ACCOUNT_TERMS_DB</sectionref>
      <row />
    </section>

    <section name="credit_card_imprint">
      <condition class="dtv.pos.docbuilding.conditions.ImprintCreditDebitCardCondition" />
      <!-- do not include on refunds -->
      <condition method="getAmount" comparison="GREATER_THAN_ZERO" />
      <row>
        <field text="_creditcardImprint" style="BOLD" />
      </row>
      <row n="21" />
      <row>
        <field text="_creditcardImprint" style="BOLD" />
      </row>
      <row />
    </section>

    <!-- RETURN HEADER SECTION -->
    <section name="return_header">
      <condition class="dtv.pos.docbuilding.conditions.AnySaleLineItemTypeExistsCondition" value="RETURN" />
      <row />
    </section>

    <!-- - - - - - - - return terms section - - - - - -  -->
    <!-- @todo - - the terms need to be pulled from a separate configuration -->
    <section name="return_terms">
      <condition class="dtv.pos.docbuilding.conditions.AnySaleLineItemTypeExistsCondition" value="RETURN" />
      <condition method="getCustomerParty" comparison="IS_NULL" />
      <row n="2" />
      <horizontal_rule style="Strong" />
      <row>
        <field text="_selectcustomername" />
      </row>
      <row />
      <horizontal_rule style="Strong" />
      <row>
        <field text="_selectcustomeraddress1" />
      </row>
      <row />
      <horizontal_rule style="Strong" />
      <row>
        <field text="_selectcustomercity" />
      </row>
      <row />
      <horizontal_rule style="Strong" />
      <row>
        <field text="_selectcustomerstate" />
      </row>
      <row />
      <horizontal_rule style="Strong" />
      <row>
        <field text="_selectcustomerzip" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_customerSigLabel" style="BOLD" />
      </row>
      <row />
    </section>

    <!-- - - - - - - - default customer receipt - - - - - - - -->
    <section name="CustomerCopy">
      <sectionref>header</sectionref>
      <sectionref>CUST_COPY_HEADER_DB</sectionref>
      <sectionref>COUNTRYPACK.SUSPEND_NONFISCAL</sectionref>
      <sectionref>items</sectionref>
      <sectionref>totals</sectionref>
      <sectionref>tax_code_summary</sectionref>
      <sectionref>tenders</sectionref>
      <sectionref>change</sectionref>
      <sectionref>YouSavedMessage</sectionref>
      <sectionref>TaxExemptInfo</sectionref>
      <sectionref>SALE_DISCLAIMER_DB</sectionref>
      <sectionref>CUST_COPY_FOOTER_DB</sectionref>
      <sectionref>DONATION_FOOTER_MESSAGE</sectionref>
      <sectionref>footer_cust_copy</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>LOCAL.CUST_COPY_FOOTER</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="CustomerConsentReceipt">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location</sectionref>
      <horizontal_rule />
      <row>
        <field text="_store" />
        <sp />
        <field method="getRetailLocationId" formatter="Numeric" />
        <field text="_register" loc="22" />
        <sp />
        <field method="getWorkstationId" formatter="Numeric" />
      </row>
      <row>
        <field text="_date" />
        <sp />
        <field method="getAcceptanceDate" formatter="DateShort" />
        <field text="_trantime" loc="22" />
        <sp />
        <field method="getAcceptanceDate" formatter="TimeShort" />
      </row>
      <sectionref>transaction_cashier</sectionref>
      <row />
      <region>
        <field method="getTermsAndConditions" />
      </region>
      <row />
      <iterator method="getConsentSelections">
        <condition method="isAccepted" comparison="TRUE" />
        <region>
          <field method="getConsentText" />
        </region>
        <row />
        </iterator>
      <sectionref>customer_consent_captured_signature</sectionref>
      <sectionref>customer_consent_signature_area</sectionref>
      <row n="3" />
      <sectionref>page_break</sectionref>
    </section>

    <section name="customer_consent_captured_signature">
      <condition method="getCustomerSignature" comparison="NOT_NULL" />
      <signature>
        <field method="getCustomerSignature" />
      </signature>
      <horizontal_rule />
      <row>
        <field method="getCustomer" formatter="BasicName" />
      </row>
    </section>

    <section name="customer_consent_signature_area">
      <condition method="getCustomerSignature" comparison="IS_NULL" />
      <row n="6" />
      <sectionref>signature_line</sectionref>
      <row>
        <field method="getCustomer" formatter="BasicName" />
      </row>
    </section>

    <!-- - - - - - - - exchange rate transaction receipt - - - - - - - -->
    <section name="EXCHANGE_RATE_TRANS">
      <sectionref>header</sectionref>
      <sectionref>EXCHANGE_RATE_INFO</sectionref>
      <sectionref>footer</sectionref>
      <sectionref>transaction_disclaimers</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <!-- - - - - - - - default customer receipt - - - - - - - -->
    <section name="CUSTOMER_TENDER_EXCHANGE_COPY">
      <sectionref>header</sectionref>
      <sectionref>tenderExchangeLabel</sectionref>
      <sectionref>tenders</sectionref>
      <sectionref>footer</sectionref>
      <sectionref>transaction_disclaimers</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
      <sectionref>StoreCreditsIssued</sectionref>
    </section>

    <!-- - - - - - - - default store receipt - - - - - - - -->
    <section name="StoreCopy">
      <sectionref>header</sectionref>
      <sectionref>STORE_COPY_HEADER_DB</sectionref>
      <sectionref>tenderExchangeLabel</sectionref>
      <sectionref>items</sectionref>
      <sectionref>totals</sectionref>
      <sectionref>tax_code_summary</sectionref>
      <sectionref>storecopy_tenders</sectionref>
      <sectionref>change</sectionref>
      <sectionref>TaxExemptInfo</sectionref>
      <sectionref>TaxExemptSignature</sectionref>
      <sectionref>account_receivable_terms</sectionref>
      <sectionref>footer</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>STORE_COPY_FOOTER_DB</sectionref>
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <!-- - - - - - - - default home office receipt - - - - - - - -->
    <section name="HomeOfficeCopy">
      <sectionref>header</sectionref>
      <sectionref>items</sectionref>
      <sectionref>totals</sectionref>
      <sectionref>storecopy_tenders</sectionref>
      <sectionref>change</sectionref>
      <sectionref>TaxExemptInfo</sectionref>
      <sectionref>TaxExemptSignature</sectionref>
      <sectionref>cust_signature</sectionref>
      <sectionref>credit_card_terms</sectionref>
      <sectionref>account_receivable_terms</sectionref>
      <sectionref>footer</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>HomeOfficeCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <!-- - - - - - - - default rebate receipt - - - - - - - -->
    <section name="RebateCopy">
      <call method="getSource">
        <sectionref>rebate_header</sectionref>
        <sectionref>items</sectionref>
        <sectionref>totals</sectionref>
        <sectionref>tenders</sectionref>
        <sectionref>change</sectionref>
        <sectionref>credit_card_terms</sectionref>
        <sectionref>YouSavedMessage</sectionref>
        <sectionref>TaxExemptInfo</sectionref>
        <sectionref>footer_rebate_copy</sectionref>
        <sectionref>CustomerCopyLabel</sectionref>
        <sectionref>page_break</sectionref>
      </call>
    </section>

    <!-- - - - - - - - rebate header section - - - - - - - -->
    <section name="rebate_header">
      <sectionref>rebate_headerTop</sectionref>
      <sectionref>CUSTOMER_INFO</sectionref>
      <row />
      <sectionref>rebate</sectionref>
      <sectionref>training</sectionref>
      <sectionref>suspended_tran</sectionref>
      <sectionref>canceled_tran</sectionref>
      <sectionref>return_header</sectionref>
    </section>

    <section name="rebate_headerTop">
      <sectionref>headerTop_preLocal</sectionref>
      <sectionref>LOCAL.REBATE_RECEIPT_HEADER_TOP</sectionref>
      <sectionref>headerTop_postLocal</sectionref>
    </section>

    <section name="LOCAL.REBATE_RECEIPT_HEADER_TOP">
      <sectionref>LOCAL.HEADER_TOP</sectionref>
    </section>

    <section name="footer_rebate_copy">
      <sectionref>soldItemsCount</sectionref>
      <sectionref>returnedItemsCount</sectionref>
      <sectionref>LOCAL.ITEMS_COUNT</sectionref>
      <sectionref>rebate</sectionref>
      <sectionref>training</sectionref>
      <sectionref>suspended_tran</sectionref>
      <sectionref>canceled_tran</sectionref>
      <row />
      <sectionref>trans_barcode</sectionref>
      <row />
      <sectionref>REBATE_FOOTER_DB</sectionref>
    </section>

    <section name="rebate">
      <horizontal_rule style="*" />
      <horizontal_rule style="*" />
      <region left_margin="**** " right_margin=" ****" align="C">
        <field text="_rebateAuthorization" />
      </region>
      <horizontal_rule style="*" />
      <horizontal_rule style="*" />
      <row />
      <sectionref>REBATE_HEADER_DB</sectionref>
      <row />
    </section>

    <!-- "HOME OFFICE COPY" label -->
    <section name="HomeOfficeCopyLabel">
      <row align="C">
        <field text="_rcptHomeOfficeCopy" style="BOLD" />
      </row>
    </section>
    <!-- "STORE COPY" label -->
    <section name="StoreCopyLabel">
      <row align="C">
        <field text="_rcptStoreCopy" style="BOLD" />
      </row>
    </section>
    <!-- "CUSTOMER COPY" label -->
    <section name="CustomerCopyLabel">
      <row align="C">
        <field text="_rcptCustomerCopy" style="BOLD" />
      </row>
    </section>
    <!-- "GIFT RECEIPT" label -->
    <section name="GiftReceiptCopyLabel">
      <row align="C">
        <field text="_rcptGiftReceiptCopy" style="BOLD" />
      </row>
    </section>
    <!-- "MERCHANDISE COPY" label -->
    <!-- Source object: N/A -->
    <section name="MerhandiseCopyLabel">
      <row align="C">
        <field text="_rcptMerchandiseCopy" style="BOLD" />
      </row>
    </section>
    <!-- "VENDOR COPY" label -->
    <!-- Source object: N/A -->
    <section name="VendorCopyLabel">
      <row align="C">
        <field text="_rcptVendorCopy" style="BOLD" />
      </row>
    </section>

    <section name="tenderExchangeLabel">
      <condition class="dtv.pos.docbuilding.conditions.IsTenderExchangeCondition" />
      <row />
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <row align="C">
        <field text="_rcptTenderExchange" style="BOLD" />
      </row>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <row />
    </section>

    <section name="serialExchangeLabel">
      <row align="C">
        <field text="_receiptSerialExchange" style="BOLD" />
      </row>
    </section>

    <!-- - - - - - - - customer signature section - - - - - -  -->
    <section name="cust_signature">
      <condition class="dtv.pos.docbuilding.conditions.CustSignReqCondition" />
      <row n="6" />
      <sectionref>signature_line</sectionref>
      <sectionref>customer_name</sectionref>
    </section>

    <section name="cust_signature_for_nonchange_tender">
      <condition method="getSignature.getSignature" comparison="IS_NULL" />
      <row n="6" />
      <sectionref>signature_line</sectionref>
      <sectionref>customer_name_for_signature</sectionref>
    </section>

    <!-- - - - - - - - customer name section - - - - - -  -->
    <section name="customer_name">
      <condition class="dtv.pos.docbuilding.conditions.IncludeTenderTypeCondition" type="ACCOUNT" inverted="true" />
      <row>
        <condition class="dtv.pos.docbuilding.conditions.HasCardNameCondition" />
        <field>
          <aggregate class="dtv.pos.common.rcpt.CardHolderNameDocBuilderField" />
        </field>
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.HasCardNameCondition" inverted="true" />
        <field method="getCustomerParty" formatter="BasicName" />
      </row>
    </section>

    <section name="customer_name_for_signature">
      <row>
        <condition method="getCustomerName" comparison="NOT_BLANK" />
        <field method="getCustomerName" />
      </row>
      <row>
        <condition method="getCustomerName" comparison="IS_BLANK" />
        <field method="getParentTransaction.getCustomerParty" formatter="BasicName" />
      </row>
    </section>

    <!-- - - - - - - - header section - - - - - - - -->
    <section name="header">
      <sectionref>headerTop</sectionref>
      <sectionref>CUSTOMER_INFO</sectionref>
      <row />
      <sectionref>system_mode</sectionref>
      <sectionref>return_header</sectionref>
    </section>

     <!-- the top portion of the header. This gets used in the header and on
    gift receipts where the customer information is not desired -->
    <section name="headerTop">
      <sectionref>headerTop_preLocal</sectionref>
      <sectionref>LOCAL.HEADER_TOP</sectionref>
      <sectionref>headerTop_postLocal</sectionref>
    </section>

    <section name="headerTop_preLocal">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location</sectionref>
      <horizontal_rule />
  </section>

    <section name="headerTop_postLocal">
      <sectionref>transaction_header_info</sectionref>
      <sectionref>SALES_PERSON_INFO</sectionref>
      <sectionref>transaction_cashier</sectionref>
      <sectionref>transaction_flight_information</sectionref>
  </section>

    <!-- store location information section (shared in multiple headers- should have a transaction object here) -->
    <section name="transaction_store_location">
      <call method="getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <row />
        <row align="C">
          <field method="getStoreName" />
        </row>
        <region left_margin="1" alignment="C">
          <field method="." formatter="BasicAddress" />
        </region>
        <row align="C">
          <condition method="getTelephone1" comparison="NOT_BLANK" />
          <field method="getTelephone1" formatter="Phone" />
        </row>
      </call>
    </section>

    <section name="transaction_header_info">
      <row>
        <field text="_store" />
        <sp />
        <field method="getRetailLocationId" />
        <field text="_register" loc="22" />
        <sp />
        <field method="getWorkstationId" />
      </row>
      <row>
        <field text="_date" />
        <sp />
        <field method="getTransactionDate" formatter="DateShort" />
        <field text="_trantime" loc="22" />
        <sp />
        <field method="getBeginDateTimestamp" formatter="TimeShort" />
      </row>
      <row>
        <field text="_ticket" />
        <sp />
        <field method="getTransactionSequence" />
      </row>
    </section>

    <section name="transaction_cashier">
      <row>
        <condition method="getOperatorParty.getEmployeeId" comparison="NOT_NULL" />
        <field text="_cashier" />
        <sp />
        <field method="getOperatorParty.getEmployeeId" />
      </row>
    </section>

    <section name="SALES_PERSON_INFO">
      <condition class="dtv.pos.common.rcpt.TranSalespersonCondition" />
      <row>
        <field text="_salesperson" />
      </row>
      <region left_margin="2">
        <field>
          <aggregate class="dtv.pos.common.rcpt.TranSalespersonBuilderField" />
        </field>
      </region>
    </section>

    <section name="LINE_SALES_PERSON_INFO">
      <iterator method="getCommissionModifiers">
        <row>
          <field text="_salesperson" />
          <sp />
          <field method="getEmployeeParty.getEmployeeId" />
          <sp />
          <field text="_openBracket" />
          <field method="getEmployeeParty.getFirstName" />
          <sp />
          <field method="getEmployeeParty.getLastName" />
          <field text="_closeBracket" />
        </row>
      </iterator>
      <row />
    </section>
    <!-- - - - - - - - reprint section - - - - - - - -->
    <section name="reprint">
      <!--
      <row><field text="%IF_REPRINT%" /></row>
      <row><field text="_reprint" /></row>
      <row><field text="%END_IF%" /></row>
      -->
      <row>
        <field text="%REPRINT%" />
      </row>
    </section>

    <section name="soldItemsCount">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <condition class="dtv.pos.docbuilding.conditions.DisplaySoldItemsCountCondition" />
      <row>
        <field text="_soldItemCount" />
        <sp />
        <field formatter="Quantity">
          <aggregate class="dtv.pos.common.rcpt.SoldItemsCountDocBuilderField" />
        </field>
      </row>
    </section>
    <!-- - - - - - - - returned items count section - - - - - - - -->
    <section name="returnedItemsCount">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <condition class="dtv.pos.docbuilding.conditions.DisplayReturnedItemsCountCondition" />
      <row>
        <field text="_returnedItemCount" />
        <sp />
        <field formatter="Quantity">
          <aggregate class="dtv.pos.common.rcpt.ReturnedItemsCountDocBuilderField" />
        </field>
      </row>
    </section>
    <!-- - - - - - - - training tran section - - - - - - - -->
    <!-- Source object: N/A -->
    <section name="training">
      <condition class="dtv.pos.docbuilding.conditions.TrainingModeCondition" />
      <row align="C" charsize="X2HW">
        <field text="*******************" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field text="_rcptTraining" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field text="*******************" style="BOLD" />
      </row>
      <row />
    </section>
    <!-- - - - - - - - suspended tran section - - - - - - - -->
    <section name="suspended_tran">
      <condition class="dtv.pos.docbuilding.conditions.TransactionSuspendedCondition" />
      <row align="C" charsize="X2HW">
        <field text="_suspendedTransaction" style="BOLD" />
      </row>
    </section>
    <!-- - - - - - - - canceled tran section - - - - - - - -->
    <section name="canceled_tran">
      <condition class="dtv.pos.docbuilding.conditions.TransactionCanceledCondition" />
      <row align="C" charsize="X2HW">
        <field text="_canceledTransaction" style="BOLD" />
      </row>
    </section>
    <!-- - - - - - - - footer section - - - - - - - -->
    <section name="trans_barcode">
      <barcode symbology="Code 93">
        <field>
          <aggregate class="dtv.hardware.barcode.TranBarcodeDocBuilderField" />
        </field>
      </barcode>
    </section>

    <section name="system_mode">
      <sectionref>reprint</sectionref>
      <sectionref>training</sectionref>
      <sectionref>suspended_tran</sectionref>
      <sectionref>canceled_tran</sectionref>
    </section>

    <section name="footer">
      <sectionref>soldItemsCount</sectionref>
      <sectionref>returnedItemsCount</sectionref>
      <sectionref>LOCAL.ITEMS_COUNT</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>return_terms</sectionref>
      <row />
      <sectionref>trans_barcode</sectionref>
      <row />
    </section>

    <section name="footer_cust_copy">
      <sectionref>soldItemsCount</sectionref>
      <sectionref>returnedItemsCount</sectionref>
      <sectionref>LOCAL.ITEMS_COUNT</sectionref>
      <sectionref>system_mode</sectionref>
      <row />
      <sectionref>trans_barcode</sectionref>
      <row />
    </section>

    <section name="transaction_disclaimers">
      <region align="C">
        <field>
          <aggregate class="dtv.pos.common.rcpt.DisclaimerMessageDocBuilderField" />
        </field>
      </region>
    </section>

    <section name="YouSavedMessage">
      <condition class="dtv.pos.common.rcpt.TotalAmountSavedMsgCondition" />
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <row align="C">
        <field text="_totalAmountSaved" />
        <sp />
        <field formatter="Money">
          <aggregate class="dtv.pos.common.rcpt.TotalAmountSavedDocBuilderField" />
        </field>
      </row>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <row />
    </section>

    <section name="TaxExemptInfo">
      <condition class="dtv.pos.docbuilding.conditions.TaxExemptCondition" />
      <row n="2" />
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <row align="C">
        <field text="_taxExemptInfo" />
      </row>
      <row />
      <sectionref>TaxExemptCustInfo</sectionref>
      <sectionref>TaxExemptionsInfo</sectionref>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
    </section>

    <section name="TaxExemptCustInfo">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <condition method="getCustomerParty" comparison="NOT_NULL" />
      <row>
        <field method="getCustomerParty" formatter="BasicName" />
      </row>
      <region>
        <field method="getCustomerParty.getPrimaryLocaleInformation" formatter="BasicAddress" />
      </region>
      <row>
        <condition method="getCustomerParty.getTelephone1" comparison="NOT_BLANK" />
        <field method="getCustomerParty.getTelephone1" formatter="Phone" />
      </row>
      <row />
    </section>

    <section name="TaxExemptionsInfo">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <condition method="getCustomerParty" comparison="NOT_NULL" />
      <sectionref>TaxExemptInfoIndividualLines</sectionref>
      <!-- sectionref>TaxExemptInfoTransaction</sectionref-->
      <sectionref>TransTaxExemptInfo</sectionref>
      <row />
    </section>

    <section name="TaxExemptInfoIndividualLines">
      <condition class="dtv.pos.docbuilding.conditions.TaxExemptionTransactionCondition" inverted="true" />
      <iterator method="getRetailTransactionLineItems">
        <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.ISaleReturnLineItem" />
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <sectionref>SINGLE_TAX_EXEMPT</sectionref>
        <sectionref>MULTIPLE_TAX_EXEMPT</sectionref>
      </iterator>
    </section>

    <section name="TaxExemptInfoTransaction">
      <condition class="dtv.pos.docbuilding.conditions.TaxExemptionTransactionCondition" />
      <call method="getRetailTransactionLineItems">
        <call method="get">
          <method_param dtype="Integer">0</method_param>
          <sectionref>SINGLE_TAX_EXEMPT</sectionref>
          <sectionref>MULTIPLE_TAX_EXEMPT</sectionref>
        </call>
      </call>
    </section>

    <!-- Transaction level tax exemption... -->
    <section name="TransTaxExemptInfo">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <condition  class="dtv.pos.docbuilding.conditions.TransactionHasExemptionCondition" />
      <call impl="dtv.pos.docbuilding.TaxExemptObjectFromTransaction">
        <row>
          <field text="_taxExemptReason" />
          <sp />
          <field method="getReasonCodeObject.getDescription" />
        </row>
        <row>
          <field text="_taxExemptId" />
          <sp />
          <field method="getCertificateNbr" />
        </row>
        <row>
          <field text="_taxExemptExpDate" />
          <sp />
          <field method="getExpirationDate" formatter="DateShort" />
        </row>
        <row />
        <row align="C">
          <condition method="getReasonCode" comparison="EQUAL" value="CHILDREN" />
          <field text="********************************************" style="BOLD" />
        </row>
      </call>
      <sectionref>TAX_EXEMPTION_DISCLAIMER_DB</sectionref>
    </section>

    <section name="SINGLE_TAX_EXEMPT">
      <condition class="dtv.pos.docbuilding.conditions.SingleTaxExemptionCondition" />
      <call method="getTaxModifiers">
        <call method="get">
          <method_param dtype="Integer">0</method_param>
          <sectionref>SINGLE_TAX_SUBSECTION</sectionref>
        </call>
      </call>
    </section>

    <section name="SINGLE_TAX_SUBSECTION">
      <condition method="getTaxExemptionIdObject" comparison="NOT_NULL" />
      <condition method="getParentLine.getItemId" comparison="NOT_NULL" />
      <condition method="getTaxExemptionId" comparison="NOT_NULL" />
      <row>
        <field text="_taxExemptItemId" />
        <sp />
        <field method="getParentLine.getItemId" />
      </row>
      <call method="getTaxExemptionIdObject{TRANSACTION}">
        <row>
          <field text="_taxExemptReason" />
          <sp />
          <field method="getReasonCodeObject.getDescription" />
        </row>
        <row>
          <field text="_taxExemptId" />
          <sp />
          <field method="getCertificateNbr" />
        </row>
        <row>
          <field text="_taxExemptExpDate" />
          <sp />
          <field method="getExpirationDate" formatter="DateShort" />
        </row>
        <row />
        <row align="C">
          <condition method="getReasonCode" comparison="EQUAL" value="CHILDREN" />
          <field text="********************************************" style="BOLD" />
        </row>
      </call>
      <sectionref>TAX_EXEMPTION_DISCLAIMER_DB</sectionref>
    </section>

    <section name="MULTIPLE_TAX_EXEMPT">
      <condition class="dtv.pos.docbuilding.conditions.SingleTaxExemptionCondition" inverted="true" />
      <iterator method="getTaxModifiers">
        <condition method="getTaxExemptionIdObject" comparison="NOT_NULL" />
        <condition method="getParentLine.getItemId" comparison="NOT_NULL" />
        <row>
          <field text="_taxExemptItemId" />
          <sp />
          <field method="getParentLine.getItemId" />
        </row>
        <call method="getTaxExemptionIdObject{TRANSACTION}">
          <row>
            <field text="_taxExemptReason" />
            <sp />
            <field method="getReasonCodeObject.getDescription" />
          </row>
          <row>
            <field text="_taxExemptId" />
            <sp />
            <field method="getCertificateNbr" />
          </row>
          <row>
            <field text="_taxExemptExpDate" />
            <sp />
            <field method="getExpirationDate" formatter="DateShort" />
          </row>
          <row />
          <row align="C">
            <condition method="getReasonCode" comparison="EQUAL" value="CHILDREN" />
            <field text="********************************************" style="BOLD" />
          </row>
          <sectionref>TAX_EXEMPTION_DISCLAIMER_DB</sectionref>
        </call>
      </iterator>
    </section>

    <section name="TaxExemptSignature">
      <condition class="dtv.pos.docbuilding.conditions.TaxExemptCondition" />
      <row />
      <row>
        <field text="x_______________________________________" style="BOLD" />
      </row>
      <row>
        <field text="_custSignature" />
      </row>
      <row n="2" />
      <row>
        <field text="x_______________________________________" style="BOLD" />
      </row>
      <row>
        <field text="_authorizeBy" />
      </row>
    </section>

    <section name="GiftReceipts">
      <iterator>
        <sectionref>AGiftReceipt</sectionref>
      </iterator>
    </section>

    <section name="AGiftReceipt">
      <call method="getTransaction">
        <sectionref>GiftReceiptHeaderTop</sectionref>
      </call>
      <row />
      <row align="C" charsize="X2HW">
        <field text="_rcptGiftForYou" style="BOLD" />
      </row>
      <row />
      <row style="STRONGUNDERLINE">
        <field text="_item" />
        <field text="_qty" loc="14" />
        <field text="_price" loc="-10" />
      </row>
      <iterator>
        <sectionref>AGiftReceiptLine</sectionref>
      </iterator>
      <horizontal_rule style="Double" />
      <call method="getTransaction">
        <sectionref>AGiftFooter</sectionref>
      </call>
      <sectionref>GiftReceiptCopyLabel</sectionref>
      <sectionref>training</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="GiftReceiptHeaderTop">
      <sectionref>headerTop_preLocal</sectionref>
      <sectionref>LOCAL.GIFT_RECEIPT_HEADER_TOP</sectionref>
      <sectionref>headerTop_postLocal</sectionref>
    </section>

    <section name="LOCAL.GIFT_RECEIPT_HEADER_TOP">
      <sectionref>LOCAL.HEADER_TOP</sectionref>
    </section>

    <section name="AGiftFooter">
      <sectionref>trans_barcode</sectionref>
      <row n="4" />
    </section>

    <section name="AGiftReceiptLine">
      <row>
        <field method="getDescription" style="BOLD" />
      </row>
      <row>
        <!-- Please see the comments in SkipEncodedPriceCondition for details why this condition is here. -->
        <condition class="dtv.pos.register.giftreceipt.SkipEncodedPriceCondition" inverted="true" />
        <field method="getItemId" />
        <field text=" " loc="12" />
        <field method="getQuantity" formatter="Quantity" loc="14" />
        <field method="getFinalPrice" formatter="EncodedPrice" loc="-10" />
      </row>
      <row>
        <!-- Please see the comments in SkipEncodedPriceCondition for details why this condition is here. -->
        <condition class="dtv.pos.register.giftreceipt.SkipEncodedPriceCondition" />
        <field method="getItemId" />
        <field text=" " loc="12" />
        <field method="getQuantity" formatter="Quantity" loc="14" />
        <field text="_na" loc="-10" />
      </row>
      <sectionref>GiftReceiptPriceBarcode</sectionref>
      <row />
    </section>

    <section name="GiftReceiptPriceBarcode">
      <!-- Please see the comments in SkipEncodedPriceCondition for details why this condition is here. -->
      <condition class="dtv.pos.register.giftreceipt.SkipEncodedPriceCondition" inverted="true" />
      <barcode symbology="Code 93" textposition="NONE">
        <field method="getFinalPrice" align="R" formatter="EncodedPrice" />
      </barcode>
    </section>
    <!-- end gift receipt section -->
    <!-- - - - - - - - items section - - - - - - - -->
    <section name="items">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <sectionref>item_header</sectionref>
    </section>

    <section name="item_header">
      <!-- item header -->
      <row style="STRONGUNDERLINE">
        <field text="_item" />
        <field text="_qty" align="R" loc="14" />
        <field text="_price" align="R" loc="-15" />
        <field text="_amount" align="R" loc="-3" />
      </row>
      <sectionref>item_details</sectionref>
      <row />
    </section>

    <section name="item_details">
      <!-- item iterator -->
      <iterator method="getLineItemsByTypeCodeFiltered">
        <method_param dtype="String">ITEM</method_param>
        <method_param dtype="String">dtv.pos.hardware.rcptbuilding.DefaultRcptLineItemFilter</method_param>
        <!-- The following line is an example of a summary filter, for base we are not going to use a summary filter-->
        <!-- <method_param dtype="String">dtv.pos.hardware.rcptbuilding.SummaryRcptLineItemFilter</method_param> -->
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.VoidedCustomerAccountDetailLineCondition" />
        <sectionref>nonvoided_item</sectionref>
      </iterator>
    </section>

    <!-- single item section -->
    <section name="nonvoided_item">
      <condition class="dtv.pos.docbuilding.conditions.AllowDonationLineItemOnReceipts" />
      <row>
        <field method="getItemDescription" style="BOLD" />
      </row>
      <sectionref>item_details_listing</sectionref>
      <row>
        <condition method="getItem.getDimension1" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="1" />
        </field>
      </row>
      <row>
        <condition method="getItem.getDimension2" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="2" />
        </field>
      </row>
      <row>
        <condition method="getItem.getDimension3" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.register.sale.ItemDimensionDocBuilderField" />
          <Parameter name="DimensionIndex" value="3" />
        </field>
      </row>
      <sectionref>LOCAL.NONVOIDED_ITEM</sectionref>
      <sectionref>kit_components</sectionref>
      <sectionref>item_serial_number</sectionref>
      <sectionref>item_inventory_locations</sectionref>
      <sectionref>return_proration</sectionref>
      <sectionref>return_reason_code</sectionref>
      <sectionref>item_discounts</sectionref>
      <sectionref>return_verification</sectionref>
      <sectionref>layaway_info</sectionref>
      <sectionref>SP_ORDER_INFO</sectionref>
      <sectionref>WARRANTY_COVERAGE</sectionref>
      <sectionref>WARRANTY_LINE</sectionref>
      <sectionref>registry_info</sectionref>
      <sectionref>item_comments</sectionref>
    </section>

    <section name="item_details_listing">
      <row>
        <field method="getItem.getItemId" />
        <field method="getQuantity" formatter="Quantity" align="R" loc="14" />
        <field method="getBaseUnitPrice" formatter="Money" align="R" loc="-15" />
        <field method="getExtendedAmount" formatter="Money" align="R" loc="-3" />
        <field loc="-1">
          <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" />
        </field>
      </row>
    </section>

    <section name="item_comments">
      <iterator method="getNoteSeq">
        <sectionref>item_comment</sectionref>
      </iterator>
    </section>

    <section name="cust_acct_item_comments">
      <iterator method="getRetailLineItem.getNotes">
        <sectionref>item_comment</sectionref>
      </iterator>
    </section>

    <section name="item_comment">
      <region align="C">
        <field method="getNote" formatter="TranslateIfKey" />
      </region>
    </section>

    <section name="return_verification">
      <condition class="dtv.pos.docbuilding.conditions.ReturnTypeCondition">
        <Parameter name="VALUE" value="VERIFIED" />
        <Parameter name="VALUE2" value="UNVERIFIED" />
      </condition>
      <!-- suppress this section for order cancellations when no original date is known -->
      <condition class="dtv.pos.register.returns.HasOriginalTransactionDateCondition" />
      <row />
      <row>
        <field text="_return" loc="4" />
      </row>
      <row>
        <condition method="getOriginalRetailLocationId" comparison="NOT_EQUAL" value="0" />
        <field text="_store" loc="4" />
        <sp />
        <field method="getOriginalRetailLocationId" />
      </row>
      <row>
        <field text="_date" loc="4" />
        <sp />
        <field formatter="DateShort">
          <aggregate class="dtv.pos.register.returns.OriginalTransactionDateField" />
        </field>
      </row>
      <row>
        <condition method="getOriginalTransactionSequence" comparison="NOT_EQUAL" value="0" />
        <field text="_ticket" loc="4" />
        <sp />
        <field method="getOriginalTransactionSequence" />
      </row>
      <row>
        <condition method="getOriginalWorkstationId" comparison="NOT_EQUAL" value="0" />
        <field text="_register" loc="4" />
        <sp />
        <field method="getOriginalWorkstationId" />
      </row>
      <row />
    </section>

    <!-- - - - - - - - - - - KITS - - - - - - - - - - - - - - - -->
    <section name="kit_components">
      <condition class="dtv.pos.kits.rcpt.IsKitCondition" />
      <iterator method="getKitComponentModifiers">
        <item_comparator dtype="Class">dtv.pos.kits.KitComponentModifierComparator</item_comparator>
        <sectionref>kit_component</sectionref>
      </iterator>
    </section>

    <section name="cust_detail_kit_components">
      <condition class="dtv.pos.kits.rcpt.IsKitCondition" />
      <iterator method="getRetailLineItem.getKitComponentModifiers">
        <item_comparator dtype="Class">dtv.pos.kits.KitComponentModifierComparator</item_comparator>
        <sectionref>kit_component</sectionref>
      </iterator>
    </section>

    <section name="kit_component">
      <row>
        <condition class="dtv.pos.kits.rcpt.DisplayExtendedKitComponentQtyCondition" />
        <field method="getQuantity" loc="4" />
        <sp />
        <field text="_kitComponentSeparator" />
        <sp />
        <field method="getComponentItemDesc" />
      </row>
      <row>
        <condition class="dtv.pos.kits.rcpt.DisplayKitComponentSerialNumberCondition"/>
        <field method="getSerialNumber" loc="4"/>
      </row>
      <row>
        <condition class="dtv.pos.kits.rcpt.DisplayExtendedKitComponentQtyCondition" inverted="true" />
        <field method="getKitComponent.getQuantityPerKit" loc="4" />
        <sp />
        <field text="_kitComponentSeparator" />
        <sp />
        <field method="getComponentItemDesc" />
      </row>
    </section>

    <section name="item_serial_number">
      <condition class="dtv.pos.docbuilding.conditions.ContainsSerialNumberCondition" />
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" inverted="true" />
        <field method="getSerialNumber.trim" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <condition class="dtv.pos.docbuilding.conditions.VoucherActivityCondition" authMethod="XPAY_GIFT_CARD_PAYMENTECH" activityCode="ISSUED" />
        <field method="getSerialNumber.trim" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <condition class="dtv.pos.docbuilding.conditions.VoucherActivityCondition" authMethod="XPAY_GIFT_CARD_PAYMENTECH" activityCode="ISSUED" inverted="true" />
        <field method="getSerialNumber.trim" formatter="VoucherNumber" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <condition method="getAuthorizationCode" comparison="NOT_NULL" />
        <field text="_authnbr" />
        <sp />
        <field method="getAuthorizationCode" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <field text="_rcptVoucherBalance" />
        <sp />
        <field method="getUnspentBalanceAmount" formatter="Money" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <field text="_transType" />
        <sp />
        <field>
          <aggregate class="dtv.pos.common.rcpt.RcptTransactionTypeDocBuilderField" />
        </field>
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <condition method="getTraceNumber" comparison="NOT_NULL" />
        <field text="_traceNumber" />
        <sp />
        <field method="getTraceNumber" />
      </row>
    </section>

    <section name="return_proration">
      <condition class="dtv.pos.docbuilding.conditions.SaleLineItemTypeCondition" value="RETURN" />
      <condition class="dtv.pos.register.returns.prorate.ProratedRefundCondition" />
      <row>
        <field>
          <aggregate class="dtv.pos.register.returns.prorate.ProratedRefundDocBuilderField" />
        </field>
      </row>
    </section>

    <section name="return_reason_code">
      <condition class="dtv.pos.docbuilding.conditions.SaleLineItemTypeCondition" value="RETURN" />
      <row>
        <field method="getReasonCodeObject.getDescription" />
      </row>
    </section>

    <section name="item_discounts">
      <iterator method="getRetailPriceModifiers">
        <sectionref>item_amount_discount</sectionref>
        <sectionref>item_percent_discount</sectionref>
        <sectionref>competitive_discount_percent</sectionref>
        <sectionref>competitive_discount_amount</sectionref>
        <sectionref>item_deal</sectionref>
        <sectionref>manufac_coupon</sectionref>
      </iterator>
    </section>

    <section name="competitive_discount_percent">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="PROMPT_COMP_PRICE_PERCENT" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
        <field method="getExtendedAmount.negate" formatter="Money" loc="-6" />
      </row>
      <call method="getParentLine">
        <row>
          <field text="_competitorPrice" />
          <sp />
          <field method="getStringProperty" method_param="COMPETITOR_PRICE" />
        </row>
      </call>
      <row>
        <condition method="getPercent" comparison="GREATER_THAN_ZERO" />
        <field method="getPercent" formatter="Percent" />
        <sp />
        <field text="_competitorDiscount" />
        <sp />
        <field formatter="Money">
          <aggregate class="dtv.pos.common.rcpt.DiscountOnCompetitorPriceDocBuilderField" />
        </field>
      </row>
    </section>

    <section name="competitive_discount_amount">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="PROMPT_COMP_PRICE_AMOUNT" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
        <field method="getExtendedAmount.negate" formatter="Money" loc="-6" />
      </row>
      <call method="getParentLine">
        <row>
          <field text="_competitorPrice" />
          <sp />
          <field method="getStringProperty" method_param="COMPETITOR_PRICE" />
        </row>
      </call>
      <row>
        <condition method="getDiscount.getAmount" comparison="GREATER_THAN_ZERO" />
        <field text="_competitorDiscount" />
        <sp />
        <field method="getDiscount.getAmount" formatter="Money" />
      </row>
    </section>

    <section name="item_amount_discount">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="ANY_AMOUNT_DISCOUNT" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
        <field method="getExtendedAmount.negate" formatter="Money" loc="-6" />
      </row>
    </section>

    <section name="item_percent_discount">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="ANY_PERCENT_DISCOUNT" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
        <sp />
        <field text="_openBracket" />
        <field method="getPercentForRcpt" formatter="Percent" />
        <field text="_closeBracket" />
        <field method="getExtendedAmount.negate" formatter="Money" loc="-6" />
      </row>
    </section>

    <section name="item_deal">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="DEAL" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
        <field method="getExtendedAmount.negate" formatter="Money" loc="-6" />
      </row>
    </section>

    <section name="manufac_coupon">
      <condition method="getRetailPriceModifierReasonCode" comparison="EQUAL" value="MANUFACTURER_COUPON" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
        <field method="getPriceChangeAmount.negate" formatter="Money" loc="-6" />
      </row>
    </section>

    <section name="tax_code_summary">
      <condition class="dtv.pos.register.tax.TaxCodeSummaryPrintEnableCondition" />
      <sectionref>tax_code_summary_detail</sectionref>
    </section>

    <section name="tax_code_summary_detail">
      <row />
      <row>
        <field text="_countrypack.common.taxPercent" loc="-30" />
        <field text="_countrypack.common.taxableAmount" loc="-13" />
        <field text="_countrypack.common.taxAmount" loc="-3" />
      </row>
      <iterator>
        <impl dtype="Class">oracle.retail.xstore.countrypack.common.docbuilding.TaxTotalIterator</impl>
        <condition method="getVoid" comparison="EQUAL">
          <Parameter name="VALUE">
            <param_value dtype="Boolean">false</param_value>
          </Parameter>
        </condition>
        <row>
          <condition method="getTaxableAmount" comparison="NOT_EQUAL">
            <Parameter name="VALUE">
              <param_value dtype="BigDecimal">0</param_value>
            </Parameter>
          </condition>
          <field formatter="Percent" align="R" loc="-30">
            <aggregate class="oracle.retail.xstore.countrypack.common.docbuilding.TaxPercentageGroupBuilderField" />
          </field>
          <sp />
          <field method="getTaxableAmount" formatter="Money" align="R" loc="-13" />
          <sp />
          <field method="getTaxAmount" formatter="Money" align="R" loc="-3" />
        </row>
      </iterator>
    </section>

    <section name="totals">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <row />
      <row>
        <condition class="dtv.pos.register.tax.TaxCodeSummaryPrintEnableCondition" inverted="true" />
        <field text="_subtotal" align="R" loc="-15" />
        <field method="getSubtotal" formatter="Money" align="R" loc="-3" />
      </row>
      <!-- LIST EACH TAX ON THE TRANSACTION -->
      <!--
      <iterator method="getLineItemsByTypeCode" method_param="TAX" itemComparator="dtv.pos.register.tax.CompoundGroupTaxComparator">
        <condition method="getVoid" comparison="FALSE" />
        <row>
          <field method="getSaleTaxGroupRule.getDescription" align="R" loc="-15" />
          <field method="getTaxAmount" formatter="Money" align="R" loc="-3" />
        </row>
      </iterator>
      -->
      <!-- LIST TAX AS A TAX TOTAL -->
      <row>
        <condition class="dtv.pos.register.tax.TaxCodeSummaryPrintEnableCondition" inverted="true" />
        <field text="_tax" align="R" loc="-22" />
        <field formatter="Percent" align="R" loc="-15">
          <aggregate class="dtv.pos.register.tax.TaxPercentageBuilderField" />
        </field>
        <field method="getTaxAmount" formatter="Money" align="R" loc="-3" />
      </row>
      <horizontal_rule />
      <row>
        <field style="BOLD" align="R" loc="-15">
          <aggregate class="dtv.pos.common.rcpt.TransactionTotalTextDocBuilderField" />
        </field>
        <field method="getTotal" style="BOLD" formatter="Money" align="R" loc="-3" />
      </row>
      <sectionref>rounding_info</sectionref>
      <sectionref>foreign_currency_separator_line</sectionref>
      <iterator class="dtv.pos.tender.foreigncurrency.ForeignCurrencyTenderIterator">
        <sectionref>foreigncurrency_total</sectionref>
      </iterator>
    </section>

    <section name="foreign_currency_separator_line">
      <condition class="dtv.pos.docbuilding.conditions.AnyForeignCurrencyTenderExistsCondition" />
      <horizontal_rule />
    </section>

    <section name="rounding_info">
      <condition class="dtv.pos.tender.rounding.RoundedAmountCondition" />
      <row>
        <field text="_rounding" align="R" loc="-14" />
        <field method="getRoundedAmount" formatter="Money" align="R" loc="-3" />
      </row>
    </section>
    <!-- - - - - - - - tenders section - - - - - - - -->
    <section name="tenders">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trn.IPosTransaction" />
      <horizontal_rule style="Double" />
      <iterator method="getLineItemsByTypeCode" method_param="TENDER">
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.IncludeTenderStateCondition" value="CHANGE" inverted="true" />
        <sectionref>nonchange_tender</sectionref>
      </iterator>
      <horizontal_rule style="Double" />
    </section>

    <section name="storecopy_tenders">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trn.IPosTransaction" />
      <horizontal_rule style="Double" />
      <iterator method="getLineItemsByTypeCode" method_param="TENDER">
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.IncludeTenderStateCondition" value="CHANGE" inverted="true" />
        <sectionref>storecopy_nonchange_tender</sectionref>
      </iterator>
      <horizontal_rule style="Double" />
    </section>

    <section name="nonchange_tender">
      <sectionref>currency_tender</sectionref>
      <sectionref>creditcard_tender</sectionref>
      <sectionref>travelers_check_tender</sectionref>
      <sectionref>check_tender</sectionref>
      <sectionref>account_credit</sectionref>
      <sectionref>voucher_tender</sectionref>
      <sectionref>account_tender</sectionref>
      <sectionref>homeofficecheck_tender</sectionref>
      <sectionref>coupon_tender</sectionref>
      <sectionref>nonvoided_foreign_currency_tender</sectionref>
      <sectionref>misc_tender</sectionref>
      <sectionref>roomcharge_tender</sectionref>
      <sectionref>custcopy_nonchange_tender</sectionref>
    </section>

    <section name="custcopy_nonchange_tender">
      <signature>
        <field method="getSignature.getSignature" />
      </signature>
    </section>

    <section name="storecopy_nonchange_tender">
      <sectionref>currency_tender</sectionref>
      <sectionref>storecopy_creditcard_tender</sectionref>
      <sectionref>travelers_check_tender</sectionref>
      <sectionref>check_tender</sectionref>
      <sectionref>account_credit</sectionref>
      <sectionref>voucher_tender</sectionref>
      <sectionref>account_tender</sectionref>
      <sectionref>homeofficecheck_tender</sectionref>
      <sectionref>coupon_tender</sectionref>
      <sectionref>nonvoided_foreign_currency_tender</sectionref>
      <sectionref>misc_tender</sectionref>
      <sectionref>storecopy_roomcharge_tender</sectionref>
      <sectionref>nonchange_tender_signature</sectionref>
    </section>

    <section name="travelers_check_tender">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="TRAVELERS_CHECK" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
    </section>

    <section name="currency_tender">
      <condition class="dtv.pos.docbuilding.conditions.LocalCurrencyCondition" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
    </section>

    <section name="nonchange_tender_signature">
      <condition method="getTenderStatusCode" comparison="NOT_EQUAL" value="Refund" />
      <condition class="dtv.pos.docbuilding.conditions.CustomerSignatureRequiredCondition" />
      <sectionref>captured_tender_signature</sectionref>
      <sectionref>cust_signature_for_nonchange_tender</sectionref>
      <sectionref>credit_card_terms_for_signature</sectionref>
    </section>

    <section name="captured_tender_signature">
      <signature>
        <field method="getSignature.getSignature" />
      </signature>
    </section>

    <section name="creditcard_tender">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.ttr.ICreditDebitTenderLineItem" />
      <sectionref>creditcard_detail_customer</sectionref>
    </section>

    <section name="storecopy_creditcard_tender">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.ttr.ICreditDebitTenderLineItem" />
      <sectionref>creditcard_detail</sectionref>
      <sectionref>credit_card_imprint</sectionref>
    </section>

    <section name="creditcard_detail_customer">
      <condition class="dtv.pos.docbuilding.conditions.TenderIdCondition" tenderId="ROOM_CHARGE" inverted="true" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <field method="getMaskAccountNumberDao" loc="5" />
      </row>
      <row>
        <field text="_authnbr" loc="5" />
        <sp />
        <field method="getAuthorizationCode" />
      </row>
      <row>
        <field text="_transType" loc="5" />
        <sp />
        <field>
          <aggregate class="dtv.pos.common.rcpt.RcptTransactionTypeDocBuilderField" />
        </field>
      </row>
      <row>
        <field text="_entryMethod" loc="5" />
        <sp />
        <field>
          <aggregate class="dtv.pos.common.rcpt.TenderEntryMethodDocBuilderField" />
        </field>
      </row>
      <row>
        <condition method="getParentTransaction.getPostVoid" comparison="TRUE" />
        <field text="_authTime" loc="5" />
        <sp />
        <field formatter="TimeShort">
          <aggregate class="dtv.pos.common.rcpt.PostVoidAuthTimeDocBuilderField" />
        </field>
      </row>
      <row>
        <condition method="getParentTransaction.getPostVoid" comparison="FALSE" />
        <field text="_authTime" loc="5" />
        <sp />
        <field method="getBeginDateTimestamp" formatter="TimeShort" />
      </row>
      <row>
        <condition method="getStringProperty" method_param="REPORTED_BALANCE" comparison="NOT_BLANK" />
        <field text="_voucherBalance" loc="5" />
        <sp />
        <field method="getStringProperty" method_param="REPORTED_BALANCE" />
      </row>
      <row>
        <condition method="getTraceNumber" comparison="NOT_NULL" />
        <field text="_traceNumber" loc="5" />
        <sp />
        <field method="getTraceNumber" />
      </row>
    </section>

    <section name="creditcard_detail">
      <condition class="dtv.pos.docbuilding.conditions.TenderIdCondition" tenderId="ROOM_CHARGE" inverted="true" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <field method="getMaskAccountNumberDao" loc="5" />
        <sp />
        <!-- PCI default is not to display.  Can be enabled at customer request
        <field method="getExpirationDate" formatter="CreditCardExp" />
        -->
      </row>
      <row>
        <field text="_authnbr" loc="5" />
        <sp />
        <field method="getAuthorizationCode" />
      </row>
      <row>
        <field text="_transType" loc="5" />
        <sp />
        <field>
          <aggregate class="dtv.pos.common.rcpt.RcptTransactionTypeDocBuilderField" />
        </field>
      </row>
      <row>
        <field text="_entryMethod" loc="5" />
        <sp />
        <field>
          <aggregate class="dtv.pos.common.rcpt.TenderEntryMethodDocBuilderField" />
        </field>
      </row>
      <row>
        <field text="_authTime" loc="5" />
        <sp />
        <field method="getBeginDateTimestamp" formatter="TimeShort" />
      </row>
      <row>
        <condition method="getTraceNumber" comparison="NOT_NULL" />
        <field text="_traceNumber" loc="5" />
        <sp />
        <field method="getTraceNumber" />
      </row>
    </section>

    <section name="check_tender">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="CHECK" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <condition method="getCheckSequenceNumber" comparison="NOT_NULL" />
        <field text="#" loc="4" />
        <field method="getCheckSequenceNumber" />
      </row>
    </section>

    <section name="account_credit">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="ACCOUNT_CREDIT" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
    </section>

    <section name="voucher_tender">
      <sectionref>normal_voucher_tender</sectionref>
      <sectionref>misc_voucher_tender</sectionref>
    </section>

    <section name="normal_voucher_tender">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="VOUCHER" />
      <sectionref>voucher_tender_details</sectionref>
    </section>

    <section name="misc_voucher_tender">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="MISCELLANEOUS_VOUCHER" />
      <sectionref>voucher_tender_details</sectionref>
    </section>

    <section name="voucher_tender_details">
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount.abs" formatter="Money" loc="-3" />
      </row>
      <row>
        <field method="getSerialNumber" formatter="VoucherNumber" loc="5" />
      </row>
      <row>
        <condition method="getAuthorizationCode" comparison="NOT_NULL" />
        <field text="_authnbr" loc="5" />
        <sp />
        <field method="getAuthorizationCode" />
      </row>
      <row>
        <field text="_rcptVoucherBalance" loc="5" />
        <sp />
        <field method="getUnspentBalanceAmount" formatter="Money" />
      </row>
      <row>
        <field text="_transType" loc="5" />
        <sp />
        <field>
          <aggregate class="dtv.pos.common.rcpt.RcptTransactionTypeDocBuilderField" />
        </field>
      </row>
      <row>
        <condition method="getTraceNumber" comparison="NOT_NULL" />
        <field text="_traceNumber" loc="5" />
        <sp />
        <field method="getTraceNumber" />
      </row>
    </section>

    <section name="account_tender">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="ACCOUNT" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <field method="getAccountNumber" loc="5" />
      </row>
      <row>
        <field text="_houseAccountRcptUserName" loc="5" />
        <sp />
        <field method="getAccountUserName" />
      </row>
      <row>
        <condition method="getPoNumber" comparison="NOT_NULL" />
        <field text="_houseAccountPONumber" loc="5" />
        <sp />
        <field method="getPoNumber" />
      </row>
    </section>

    <section name="homeofficecheck_tender">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="HOME_OFFICE_CHECK" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <field method="getSendCheckReasonCode" loc="4" />
      </row>
      <row>
        <field text="_sendCheckToRcptText" loc="4" />
      </row>
      <row>
        <field method="getPayableToName" loc="4" />
      </row>
      <region left_margin="4">
        <field method="." formatter="BasicAddress" />
      </region>
      <row />
    </section>

    <section name="coupon_tender">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="COUPON" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <field method="getSerialNumber" loc="5" />
      </row>
    </section>

    <section name="misc_tender">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="MISCELLANEOUS" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <field method="getSerialNumber" loc="5" />
      </row>
    </section>

    <section name="foreigncurrency_total">
      <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
      <condition class="dtv.pos.docbuilding.conditions.IncludeTenderStateCondition" value="CHANGE" inverted="true" />
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="FOREIGN_CURRENCY" foreign="true" />
      <row>
        <field text="_totalIn" />
        <sp />
        <field method="getTender.getDescription" />
        <field>
          <text dtype="String"><![CDATA[ = ]]></text>
        </field>
        <field formatter="Money">
          <aggregate class="dtv.pos.common.rcpt.TransTotalInForeignCurrencyDocBuilderField" />
        </field>
      </row>
      <row>
        <field>
          <text dtype="String"><![CDATA[( ]]></text>
        </field>
        <field text="_exchangerate" />
        <field>
          <text dtype="String"><![CDATA[ = ]]></text>
        </field>
        <field method="getExchangeRate" formatter="Money" />
        <field>
          <text dtype="String"><![CDATA[)]]></text>
        </field>
      </row>
    </section>

    <section name="nonvoided_foreign_currency_tender">
      <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="FOREIGN_CURRENCY" foreign="true" />
      <row>
        <field method="getTender.getDescription" />
        <field>
          <text dtype="String"><![CDATA[ = ]]></text>
        </field>
        <field method="getForeignAmount" formatter="Money" />
        <field method="getAmount" formatter="Money" loc="-3" align="R" />
      </row>
    </section>

    <section name="change">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <iterator method="getLineItemsByTypeCode" method_param="TENDER">
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.IncludeTenderStateCondition" value="CHANGE" />
        <sectionref>nonvoided_change_tender</sectionref>
      </iterator>
      <sectionref>zero_change_tender</sectionref>
    </section>

    <section name="zero_change_tender">
      <condition class="dtv.pos.docbuilding.conditions.NoChangeItemCondition" />
      <condition class="dtv.pos.docbuilding.conditions.NoChangeLinePrintingForSuspendedTrans" />
      <row>
        <field text="_change" />
        <field text="0" formatter="Money" loc="-3" />
      </row>
    </section>

    <section name="nonvoided_change_tender">
      <condition class="dtv.pos.docbuilding.conditions.TenderIdCondition" tenderId="UNAPPLIED_VOUCHER" inverted="true" />
      <row>
        <field text="_change" />
      </row>
      <sectionref>currency_tender</sectionref>
      <sectionref>creditcard_tender</sectionref>
      <sectionref>check_tender</sectionref>
      <sectionref>account_credit</sectionref>
      <sectionref>voucher_tender</sectionref>
      <sectionref>account_tender</sectionref>
      <sectionref>homeofficecheck_tender</sectionref>
      <sectionref>coupon_tender</sectionref>
      <sectionref>nonvoided_foreign_currency_tender</sectionref>
      <sectionref>misc_tender</sectionref>
    </section>

    <section name="page_break">
      <pagebreak />
    </section>

    <section name="NoSale">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trn.INoSaleTransaction" />
      <sectionref>header</sectionref>
      <row align="C" charsize="X2HW">
        <field method="getTransactionTypeCode" formatter="TranType" />
      </row>
      <sectionref>reasoncode_and_comment</sectionref>
      <sectionref>footer</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="ASSOCIATE_ADVANCE">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.tsn.ITenderControlTransaction" />
      <sectionref>till_header</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row>
        <field text="_tillColon" />
        <sp />
        <field method="getOutboundSession.getTenderRepositoryId" />
      </row>
      <horizontal_rule style="Strong" />
      <row />
      <row align="C">
        <field text="_verifyAssociateAdvance" style="BOLD" />
      </row>
      <horizontal_rule style="Strong" />
      <row />
      <row>
        <field text="_verifyAssociateAdvanceID" />
        <field method="getFundsReceiptParty.getEmployeeId" loc="-5" />
      </row>
      <row>
        <field text="_verifyAssociateAdvanceName" />
        <field loc="-5">
          <aggregate class="dtv.pos.till.advance.AssociateAdvanceEmpNameDocBuilderField" />
        </field>
      </row>
      <row>
        <field text="_verifyAssociateAdvanceAmount" />
        <field method="getAmount" formatter="Money" loc="-4" />
      </row>
      <iterator method="getLineItemsByTypeCode" method_param="TENDER">
        <condition method="getStringProperty" method_param="AssocAdvanceAuthNumber" comparison="NOT_BLANK" />
        <row>
          <field text="_verifyAssociateAdvanceAuthorization" />
          <field method="getStringProperty" loc="-4" method_param="AssocAdvanceAuthNumber" />
        </row>
      </iterator>
      <iterator method="getLineItemsByTypeCode" method_param="TENDER">
        <condition method="getStringProperty" method_param="AssocAdvanceRepaymentAmt" comparison="NOT_BLANK" />
        <row>
          <field text="_verifyAssociateAdvanceRepaymentAmount" />
          <field method="getStringProperty" loc="-4" method_param="AssocAdvanceRepaymentAmt" />
        </row>
      </iterator>
      <row />
      <row align="C" charsize="X2HW">
        <field text="*******************" style="BOLD" />
      </row>
      <row />
      <region left_margin="1" right_margin="1">
        <field text="_verifyAssociateAdvanceTerms" />
      </region>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_employeesignature" />
      </row>
      <row />
      <horizontal_rule style="Double" />
      <row />
      <sectionref>footer</sectionref>
      <sectionref>transaction_disclaimers</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="PaidOut">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.tsn.ITenderControlTransaction" />
      <sectionref>till_header</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row>
        <field text="_tillColon" />
        <sp />
        <field method="getOutboundSession.getTenderRepositoryId" />
      </row>
      <horizontal_rule style="Strong" />
      <row />
      <row>
        <field text="_paidOut" />
      </row>
      <row>
        <field text="_code" />
        <sp />
        <field method="getReasonCode" />
      </row>
      <row>
        <field method="getReasonCodeObject.getDescription" />
      </row>
      <row />
      <iterator method="getTransactionNotes">
        <row>
          <field text="_comments" />
        </row>
        <region left_margin="2" right_margin="2">
          <field method="getNote" />
        </region>
      </iterator>
      <horizontal_rule style="Strong" />
      <row />
      <row>
        <field text="_paidOutAmount" />
        <field method="getAmount" formatter="Money" loc="-5" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_employeesignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_payeesignature" />
      </row>
      <row />
      <horizontal_rule style="Double" />
      <row />
      <sectionref>footer</sectionref>
      <sectionref>transaction_disclaimers</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="PaidIn">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.tsn.ITenderControlTransaction" />
      <sectionref>till_header</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row>
        <field text="_tillColon" />
        <sp />
        <field method="getInboundSession.getTenderRepositoryId" />
      </row>
      <horizontal_rule style="Strong" />
      <row />
      <row>
        <field text="_paidIn" />
      </row>
      <row>
        <field text="_code" />
        <sp />
        <field method="getReasonCode" />
      </row>
      <row>
        <field method="getReasonCodeObject.getDescription" />
      </row>
      <row />
      <iterator method="getTransactionNotes">
        <row>
          <field text="_comments" />
        </row>
        <region left_margin="2" right_margin="2">
          <field method="getNote" />
        </region>
      </iterator>
      <horizontal_rule style="Strong" />
      <row />
      <iterator method="getTransactionLinks">
        <call method="getLinkedTransaction">
          <row>
            <field text="_transRefNum" />
            <field>
              <aggregate class="dtv.hardware.barcode.TranBarcodeDocBuilderField" />
            </field>
          </row>
        </call>
      </iterator>
      <row />
      <row>
        <field text="_paidInAmount" />
        <field method="getAmount" formatter="Money" loc="-5" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_employeesignature" />
      </row>
      <row />
      <horizontal_rule style="Double" />
      <row />
      <sectionref>footer</sectionref>
      <sectionref>transaction_disclaimers</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="EXCHANGE_RATE_INFO">
      <row />
      <row align="C" charsize="X2HW">
        <field text="_foreignCurrencyRateMaintChange" style="BOLD" />
      </row>
      <row />
      <row style="STRONGUNDERLINE">
        <field text="_ercRcptCurrency" />
        <field text="_ercRcptOldRate" loc="-14" />
        <field text="_ercRcptNewRate" loc="-2" />
      </row>
      <row />
      <sectionref>EXCHANGE_RATE_LINES</sectionref>
    </section>

    <section name="EXCHANGE_RATE_LINES">
      <iterator method="getExchangeRateTransLineItems">
        <row>
          <field method="getTargetCurrency" style="BOLD" />
          <field method="getOldExchangeRate" formatter="Quantity" loc="-14" />
          <field method="getNewExchangeRate" formatter="Quantity" loc="-2" />
        </row>
        <row>
          <field method="getTargetCurrencyDesc" />
        </row>
        <row />
        <region left_margin="1" right_margin="1">
          <field method="getNotes" />
        </region>
        <row />
      </iterator>
    </section>

    <section name="ClockInOut">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.thr.ITimeclockTransaction" />
      <condition class="dtv.pos.docbuilding.conditions.TimeclockTransEntryCodeTypeCondition" value="TIMECARD_MAINTENANCE" inverted="true" />
      <sectionref>header</sectionref>
      <row>
        <condition method="getWorkCodes.getWorkCode.toString.trim" comparison="NOT_BLANK" />
        <field text="_clockInOutRcptWorkCode" />
        <sp />
        <field method="getWorkCodes.getWorkCode.toString.trim" />
        <field text=" - " />
        <field method="getWorkCodes.getDescription.toString.trim" />
      </row>
      <row />
      <row align="C" charsize="X2HW">
        <field method="getTimeclockEntryCodes" formatter="TimeclockEntryType" />
      </row>
      <row align="C" charsize="X2HW">
        <field method="getBeginDateTimestamp" formatter="TimeShort" />
      </row>
      <sectionref>footer</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="FrankCouponTender">
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_frankRedeemed" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_storenbr" />
        <field method="getRetailLocationId" />
        <field text="_registernbr" />
        <field method="getWorkstationId" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_trannbr" />
        <field method="getTransactionSequence" />
        <sp />
        <field text="_trandate" />
        <field method="getTransactionDate" formatter="DateShort" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field method="getAmount" formatter="Money" />
      </row>
    </section>

    <section name="DepositBankInfo">
      <call method="getParentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <row>
          <field systemproperty="HardwareMgr.FrankingPadSpaces" />
          <field text="_bank" />
          <field method="getDepositBankName" />
        </row>
        <row>
          <field systemproperty="HardwareMgr.FrankingPadSpaces" />
          <field text="_acctnbr" />
          <field method="getDepositBankAcctNbr" />
        </row>
      </call>
    </section>

    <section name="FrankTravelersCheck">
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_fordeposit" />
      </row>
      <sectionref>DepositBankInfo</sectionref>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_storenbr" />
        <field method="getRetailLocationId" />
        <field text="_registernbr" />
        <field method="getWorkstationId" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_trannbr" />
        <field method="getTransactionSequence" />
        <sp />
        <field text="_trandate" />
        <field method="getTransactionDate" formatter="DateShort" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field method="getAmount" formatter="Money" />
      </row>
    </section>

    <section name="FrankCheck">
      <condition class="dtv.pos.docbuilding.conditions.LineOnPostVoidCondition" />
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_fordeposit" />
      </row>
      <sectionref>DepositBankInfo</sectionref>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_storenbr" />
        <field method="getRetailLocationId" />
        <field text="_registernbr" />
        <field method="getWorkstationId" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_trannbr" />
        <field method="getTransactionSequence" />
        <sp />
        <field text="_trandate" />
        <field method="getTransactionDate" formatter="DateShort" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field method="getAmount" formatter="Money" />
        <sp />
        <field text="_authnbr" />
        <field method="getAuthorizationCode" />
      </row>
      <iterator method="getIdentityVerifications">
        <row>
          <field systemproperty="HardwareMgr.FrankingPadSpaces" />
          <field text="_idtype" />
          <field method="getIdTypeCode" />
        </row>
        <row>
          <field systemproperty="HardwareMgr.FrankingPadSpaces" />
          <field text="_idnumber" />
          <field method="getIdNumber" />
          <sp />
          <field text="_idstate" />
          <field method="getIssuingAuthority" />
        </row>
      </iterator>
    </section>

    <section name="FrankMallCertCheck">
      <condition class="dtv.pos.docbuilding.conditions.LineOnPostVoidCondition" />
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_fordeposit" />
      </row>
      <sectionref>DepositBankInfo</sectionref>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_storenbr" />
        <field method="getRetailLocationId" />
        <field text="_registernbr" />
        <field method="getWorkstationId" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_trannbr" />
        <field method="getTransactionSequence" />
        <sp />
        <field text="_trandate" />
        <field method="getTransactionDate" formatter="DateShort" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field method="getAmount" formatter="Money" />
      </row>
      <iterator method="getIdentityVerifications">
        <row>
          <field systemproperty="HardwareMgr.FrankingPadSpaces" />
          <field text="_idtype" />
          <field method="getIdTypeCode" />
        </row>
        <row>
          <field systemproperty="HardwareMgr.FrankingPadSpaces" />
          <field text="_idnumber" />
          <field method="getIdNumber" />
          <sp />
          <field text="_idstate" />
          <field method="getIssuingAuthority" />
        </row>
      </iterator>
    </section>

    <section name="FrankGCSold">
      <condition class="dtv.pos.docbuilding.conditions.LineOnPostVoidCondition" />
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_issuingStoreNbr" />
        <field method="getRetailLocationId" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_registernbr" />
        <field method="getWorkstationId" />
        <sp />
        <field text="_trannbr" />
        <field method="getTransactionSequence" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_issueDate" />
        <field method="getTransactionDate" formatter="DateShort" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_gcnbr" />
        <field method="getSerialNumber" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_amountColon" />
        <field method="getFaceValueAmount" formatter="Money" />
      </row>
    </section>

    <section name="FrankGCRedeem">
      <condition class="dtv.pos.docbuilding.conditions.LineOnPostVoidCondition" />
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_fordeposit" />
      </row>
      <sectionref>DepositBankInfo</sectionref>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_storenbr" />
        <field method="getRetailLocationId" />
        <field text="_registernbr" />
        <field method="getWorkstationId" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_trannbr" />
        <field method="getTransactionSequence" />
        <sp />
        <field text="_trandate" />
        <field method="getTransactionDate" formatter="DateShort" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field method="getAmount" formatter="Money" />
      </row>
    </section>

    <section name="FrankStoreCreditIssued">
      <condition class="dtv.pos.docbuilding.conditions.LineOnPostVoidCondition" />
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_issuingStoreNbr" />
        <field method="getRetailLocationId" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_registernbr" />
        <field method="getWorkstationId" />
        <sp />
        <field text="_trannbr" />
        <field method="getTransactionSequence" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_issueDate" />
        <field method="getTransactionDate" formatter="DateShort" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_serialnbr" />
        <field method="getSerialNumber" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_amountColon" />
        <field method="getFaceValueAmount" formatter="Money" />
      </row>
    </section>

    <section name="FrankStoreCreditRedeem">
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_fordeposit" />
      </row>
      <sectionref>DepositBankInfo</sectionref>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_storenbr" />
        <field method="getRetailLocationId" />
        <field text="_registernbr" />
        <field method="getWorkstationId" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_trannbr" />
        <field method="getTransactionSequence" />
        <sp />
        <field text="_trandate" />
        <field method="getTransactionDate" formatter="DateShort" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field method="getAmount" formatter="Money" />
      </row>
    </section>

    <section name="FrankMiscTender">
      <row>
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_storenbr" />
        <field method="getRetailLocationId" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_registernbr" />
        <field method="getWorkstationId" />
        <field text="_trannbr" />
        <field method="getTransactionSequence" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_trandate" />
        <field method="getTransactionDate" formatter="DateShort" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_serialnbr" />
        <field method="getSerialNumber" />
      </row>
      <row>
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="_amountColon" />
        <field method="getFaceValueAmount" formatter="Money" />
      </row>
    </section>

    <section name="post_void_frank">
      <condition class="dtv.pos.docbuilding.conditions.LineOnPostVoidCondition" inverted="true" />
      <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadLines" />
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="*** VOID ***" style="BOLD" />
      </row>
      <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="*** VOID ***" style="BOLD" />
      </row>
      <row align="C">
        <field systemproperty="HardwareMgr.FrankingPadSpaces" />
        <field text="*** VOID ***" style="BOLD" />
      </row>
    </section>

    <section name="GiftCertificatesSold">
      <iterator method="getLineItemsByTypeCode" method_param="ITEM">
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.NonPhysicalLineItemSubtypeCondition" type="GIFT_CERTIFICATE" />
        <sectionref>EachGiftCertificateSold</sectionref>
      </iterator>
    </section>

    <section name="EachGiftCertificateSold">
      <sectionref>voucher_header</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row />
      <sectionref>GIFT_CERTIFICATE_HEADER_DB</sectionref>
      <row align="C" charsize="X2HW">
        <field text="_rcptGiftCertificate" />
      </row>
      <row />
      <row align="C" charsize="X2HW">
        <field method="getFaceValueAmount" formatter="Money" />
      </row>
      <row />
      <row>
        <field text="_giftCertnbr" />
        <field method="getSerialNumber" />
      </row>
      <row />
      <sectionref>GIFT_CERTIFICATE_FOOTER_DB</sectionref>
      <row />
      <sectionref>gift_certificate_barcode</sectionref>

      <sectionref>page_break</sectionref>
    </section>
    <section name="gift_certificate_barcode">
      <barcode symbology="Code 93">
        <field method="getSerialNumber" />
      </barcode>
    </section>

    <section name="StoreCreditsIssued">
      <iterator method="getLineItemsByTypeCode" method_param="TENDER">
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.LineTenderTypeCondition" value="VOUCHER" />
        <condition class="dtv.pos.docbuilding.conditions.TenderIdCondition" tenderId="ISSUE_STORE_CREDIT" />
        <sectionref>StoreCreditIssued</sectionref>
      </iterator>
    </section>

    <section name="BounceBackCouponsIssued">
      <iterator method="getLineItemsByTypeCode" method_param="DOCUMENT">
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.DocumentTypeCondition" value="ISSUED" />
        <sectionref>BounceBackCouponIssued</sectionref>
      </iterator>
    </section>

    <section name="BounceBackCouponIssued">
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <sectionref>training</sectionref>
      <row />
      <row align="C">
        <field text="_rcptTransactionLine" />
      </row>
      <row />
      <row align="C">
        <field text="_rcptBounceBackDateRedeemed" />
      </row>
      <row />
      <row>
        <field text="--------------------------------------------" />
      </row>
      <row />
      <row align="C">
        <field>
          <aggregate class="dtv.pos.document.bounceback.BounceBackCouponCodeField" />
        </field>
      </row>
      <row align="C">
        <field method="getDocument.getEffectiveDate" formatter="DayAndMonth" />
        <field text="-" />
        <field method="getDocument.getExpirationDate" formatter="DayAndMonth" />
      </row>
      <row n="2" />
      <region align="C">
        <field formatter="Percent">
          <aggregate class="dtv.pos.document.bounceback.BounceBackDiscountPercentField" />
        </field>
      </region>
      <row />
      <!-- <sectionref>TwentyFiveDollar</sectionref>  -->
      <row align="C">
        <field method="getDocument.getMaxAmount" style="BOLD" formatter="Money" />
      </row>
      <row />
      <region align="C">
        <field formatter="DateShort">
          <aggregate class="dtv.pos.document.bounceback.BounceBackCouponValidDateTextField" />
        </field>
      </region>
      <row />
      <sectionref>BOUNCE_BACK_2_DB</sectionref>
      <row />
      <sectionref>BOUNCE_BACK_3_DB</sectionref>
      <row />
      <sectionref>BOUNCE_BACK_4_DB</sectionref>
      <row />
      <sectionref>BOUNCE_BACK_5_DB</sectionref>
      <row />
      <sectionref>BOUNCE_BACK_6_DB</sectionref>
      <row n="2" />
      <sectionref>training</sectionref>
      <sectionref>bounceback_barcode</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <section name="bounceback_barcode">
      <barcode symbology="Code 93">
        <field method="getDocument.getDocumentId" />
      </barcode>
    </section>

    <section name="TwentyFiveDollar">
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[    **                        ]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[    **       *****    ********]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[ ********   *******   ********]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[**********  **   ***  **      ]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[**  **  **  **    **  **      ]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[**  **           ***  ******* ]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[********        ***    *******]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[  ********     ***         ***]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[    **  **    ***           **]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[**  **  **   ***      **    **]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[**********  ***       ***  ***]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[ ********   ********   ****** ]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[    **      ********    ****  ]]></text>
        </field>
      </row>
      <row align="C">
        <field>
          <text dtype="String"><![CDATA[    **                        ]]></text>
        </field>
      </row>
    </section>

    <section name="StoreCreditIssued">
      <sectionref>voucher_header</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row align="C" charsize="X2HW">
        <field method="getVoucherTypeCode" formatter="VoucherType" />
      </row>
      <row />
      <row>
        <field method="getVoucherTypeCode" formatter="VoucherType" />
        <field text=" # " />
        <field method="getSerialNumber" />
      </row>
      <row />
      <row align="C" charsize="X2HW">
        <condition method="getUnspentBalanceAmount" comparison="GREATER_THAN_ZERO" />
        <field method="getUnspentBalanceAmount" formatter="Money" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_employeesignature" />
      </row>
      <row />
      <sectionref>storecredit_barcode</sectionref>
      <sectionref>page_break</sectionref>
    </section>
    <section name="storecredit_barcode">
      <barcode symbology="Code 93">
        <field method="getSerialNumber" />
      </barcode>
    </section>
    <section name="voucher_header">
      <sectionref>logo</sectionref>
      <call method="getParentTransaction">
        <sectionref>transaction_store_location</sectionref>
      </call>
      <horizontal_rule />
      <sectionref>LOCAL.VOUCHER_HEADER</sectionref>
      <call method="getParentTransaction">
        <sectionref>transaction_header_info</sectionref>
      </call>
      <row />
      <row>
        <field text="_cashier" />
        <sp />
        <field method="getParentTransaction.getOperatorParty.getEmployeeId" />
      </row>
      <row />
      <sectionref>system_mode</sectionref>
    </section>

    <section name="nonvoided_senditem">
      <row>
        <field method="getItemDescription" style="BOLD" />
      </row>
      <row>
        <field method="getItem.getItemId" />
        <field method="getQuantity" formatter="Quantity" loc="14" />
        <field method="getBaseUnitPrice" formatter="Money" loc="-15" />
        <field method="getExtendedAmount" formatter="Money" loc="-3" />
        <field loc="-1">
          <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" />
        </field>
      </row>
      <row>
        <field method="getSerialNumber.trim" />
      </row>
      <sectionref>item_discounts</sectionref>
      <sectionref>item_comments</sectionref>
    </section>

    <section name="AttachRemoveTill">
      <sectionref>till_header</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row n="2" />
      <sectionref>AttachTill</sectionref>
      <sectionref>RemoveTill</sectionref>
      <row />
      <sectionref>footer</sectionref>
      <sectionref>transaction_disclaimers</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="AttachTill">
      <condition class="dtv.pos.docbuilding.conditions.SessionControlTransTypeCondition" value="ATTACH_TILL" />
      <row>
        <field text="_attachdrawer" loc="4" />
        <sp />
        <field method="getSession.getTenderRepositoryId" />
      </row>
      <row>
        <condition method="getSessionWorkstation.getWorkstationId" comparison="NOT_NULL" />
        <field text="_to" loc="4" />
        <sp />
        <field text="_workstationid" />
        <sp />
        <field method="getSessionWorkstation.getWorkstationId" />
      </row>
      <row>
        <condition method="getSessionWorkstation.getCashDrawerId" comparison="NOT_NULL" />
        <field text="_cashDrawer" loc="4" />
        <sp />
        <field method="getSessionWorkstation.getCashDrawerId" />
      </row>
      <row>
        <condition method="getSession.getCashDrawerId" comparison="NOT_NULL" />
        <field text="_cashDrawer" loc="4" />
        <sp />
        <field method="getSession.getCashDrawerId" />
      </row>
    </section>

    <section name="RemoveTill">
      <condition class="dtv.pos.docbuilding.conditions.SessionControlTransTypeCondition" value="REMOVE_TILL" />
      <row>
        <field text="_removedrawer" loc="4" />
        <sp />
        <field method="getSession.getTenderRepositoryId" />
      </row>
      <row>
        <condition method="getSessionWorkstation.getWorkstationId" comparison="NOT_NULL" />
        <field text="_from" loc="4" />
        <sp />
        <field text="_workstationid" />
        <sp />
        <field method="getSessionWorkstation.getWorkstationId" />
      </row>
      <row>
        <condition method="getSessionWorkstation.getCashDrawerId" comparison="NOT_NULL" />
        <field text="_cashDrawer" loc="4" />
        <sp />
        <field method="getSessionWorkstation.getCashDrawerId" />
      </row>
      <row>
        <condition method="getSession.getCashDrawerId" comparison="NOT_NULL" />
        <field text="_cashDrawer" loc="4" />
        <sp />
        <field method="getSession.getCashDrawerId" />
      </row>
    </section>

    <section name="till_header">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location</sectionref>
      <sectionref>training</sectionref>
      <horizontal_rule />
      <sectionref>transaction_header_info</sectionref>
      <row>
        <field text="_cashier" />
        <sp />
        <field method="getOperatorParty.getEmployeeId" />
      </row>
      <row>
        <condition method="getSessionId" comparison="NOT_EQUAL" value="0" /> <!-- counts without a session (store bank?) have a sessionId of 0 - ignore -->
        <field text="_sessionid" />
        <sp />
        <field method="getSessionId" />
      </row>
      <row>
        <condition method="getCashDrawerId" comparison="NOT_NULL" />
        <field text="_cashDrawer" />
        <sp/>
        <field method="getCashDrawerId" />
      </row>
      <horizontal_rule />
      <sectionref>reasoncode_and_comment</sectionref>
    </section>

    <section name="reasoncode_and_comment" >
      <condition method="getReasonCodeObject" comparison="NOT_NULL" />
      <row align="C">
        <field text="_reason" />
        <sp />
        <field method="getReasonCodeObject.getDescription" />
      </row>
      <row />
      <sectionref>reasoncode_comment</sectionref>
    </section>

    <section name="reasoncode_comment" >
      <condition method="getTransactionNotes" comparison="NOT_NULL" />
      <iterator method="getTransactionNotes">
        <region left_margin="2" right_margin="2">
          <field method="getNote" />
        </region>
      </iterator>
      <row />
    </section>

    <section name="TillCashCounts">
      <call method="getCurrentTransaction">
        <sectionref>till_header</sectionref>
        <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
        <row>
          <condition class="dtv.pos.docbuilding.conditions.TenderControlTransTypeCondition" value="CASH_PICKUP" />
          <field text="_tillColon" />
          <sp />
          <field method="getOutboundSession.getTenderRepositoryId" />
        </row>
        <row>
          <condition class="dtv.pos.docbuilding.conditions.TenderControlTransTypeCondition" value="CASH_PICKUP" inverted="true" />
          <field text="_tillColon" />
          <sp />
          <field method="getInboundSession.getTenderRepositoryId" />
        </row>
        <row />
        <row>
          <field text="_counttype" />
          <sp />
          <field method="getTypeCode" formatter="TenderCtrlTranType" />
        </row>
        <row />
        <sectionref>SAFE_BAG_ID</sectionref>
        <row style="STRONGUNDERLINE">
          <field text="_tender" />
          <field text="_totalamount" loc="-16" />
        </row>
        <iterator method="getTenderTypeCounts">
          <iterator method="getTenderCounts">
            <row>
              <field>
                <aggregate class="dtv.pos.till.count.CashCountTenderDescDocBuilderField" />
              </field>
              <field method="getAmount" formatter="Money" loc="-16" />
            </row>
          </iterator>
        </iterator>
        <row />
        <row>
          <field text="_total" />
          <field method="getAmount" formatter="Money" loc="-16" />
        </row>
        <row n="2" />
        <row>
          <field text="_employeesignature" />
        </row>
        <row n="2" />
        <sectionref>signature_line</sectionref>
        <row n="2" />
        <row>
          <field text="_managersignature" />
        </row>
        <row n="2" />
        <sectionref>signature_line</sectionref>
        <row />
        <sectionref>footer</sectionref>
        <sectionref>transaction_disclaimers</sectionref>
        <sectionref>system_mode</sectionref>
      </call>
      <sectionref>page_break</sectionref>
    </section>

    <section name="SAFE_BAG_ID">
      <condition method="getSafeBagId" comparison="NOT_NULL" />
      <row>
        <field text="_safebagid" />
      </row>
      <row>
        <field method="getSafeBagId"/>
      </row>
      <row />
    </section>

    <section name="DepositSlip">
      <call method="getCurrentTransaction">
        <sectionref>till_header</sectionref>
      </call>
      <row />
      <sectionref>LocalDepositSlipHeader</sectionref>
      <sectionref>LocalDepositSlip</sectionref>
      <sectionref>ForeignDepositSlipHeader</sectionref>
      <iterator method="getForeignDepositableCountSummaryItemsGroupCurrencies">
        <sectionref>ForeignDepositSlip</sectionref>
      </iterator>
      <sectionref>training</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="LocalDepositSlipHeader">
      <row>
        <field text="_localcurrency" style="BOLD" />
      </row>
      <row />
    </section>

    <section name="LocalDepositSlip">
      <iterator method="getLocalDepositableCountSummaryItems">
        <row>
          <field method="getDescription" />
          <field method="getActualAmount" formatter="Money" loc="-1" />
        </row>
      </iterator>
      <row>
        <field text="_tillcountreceiptTotalCurrentyAmountBegin" style="BOLD" />
        <sp />
        <field method="getLocalCurrencyDescription" style="BOLD" />
        <sp />
        <field text="_tillcountreceiptTotalCurrentyAmountEnd" style="BOLD" />
        <field method="getLocalTotalDepositAmount" style="BOLD" formatter="Money" loc="-1" />
      </row>
      <row />
    </section>

    <section name="ForeignDepositSlipHeader">
      <condition method="getForeignDepositableCountSummaryItems" comparison="NOT_EMPTY" />
      <row>
        <field text="_foreigncurrency" style="BOLD" />
      </row>
      <row />
    </section>

    <section name="ForeignDepositSlip">
      <iterator method="getCountSummaryItems">
        <row>
          <field method="getDescription" />
          <field method="getTotalDeclaredAmount" formatter="Money" loc="-1" />
        </row>
      </iterator>
      <row>
        <field text="_tillcountreceiptTotalCurrentyAmountBegin" style="BOLD" />
        <sp />
        <field method="getCurrencyDescription" style="BOLD" />
        <sp />
        <field text="_tillcountreceiptTotalCurrentyAmountEnd" style="BOLD" />
        <field method="getTotalDepositAmount" style="BOLD" formatter="Money" loc="-1" />
      </row>
      <row />
    </section>

    <section name="TillCounts">
      <call method="getCurrentTransaction">
        <sectionref>till_header</sectionref>
      </call>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row />
      <row>
        <field text="_counttype" />
        <sp />
        <field method="getCurrentTransaction.getTypeCode" formatter="TenderCtrlTranType" />
      </row>
      <row>
        <field text="_tillId" />
        <sp />
        <field method="getTenderRepositoryId" />
      </row>
      <row />
      <sectionref>LocalCurrencyTotal</sectionref>
      <row />
      <iterator method="getLocalCurrencyCountSummaryItemList">
        <sectionref>LocalCurrencyCountSummary</sectionref>
      </iterator>
      <row>
        <field text="_tillcountreceiptTotalCurrentyAmountBegin" style="BOLD" />
        <sp />
        <field method="getLocalCurrencyDescription" style="BOLD" />
        <sp />
        <field text="_tillcountreceiptTotalCurrentyAmountEnd" style="BOLD" />
        <field method="getLocalTotalCountableDeclaredAmt" style="BOLD" formatter="Money" loc="-1" />
      </row>
      <row />
      <iterator method="getForeignCurrencyCountSummaryItemListGroupCurrencies">
        <iterator method="getCountSummaryItems">
          <sectionref>ForeignCurrencyTotal</sectionref>
        </iterator>
        <row>
          <field text="_tillcountreceiptTotalCurrentyAmountBegin" style="BOLD" />
          <sp />
          <field method="getCurrencyDescription" style="BOLD" />
          <sp />
          <field text="_tillcountreceiptTotalCurrentyAmountEnd" style="BOLD" />
          <field method="getTotalCountableDeclaredAmt" style="BOLD" formatter="Money" loc="-1" />
        </row>
        <row />
      </iterator>
      <row n="2" />
      <row>
        <field text="_employeesignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row n="2" />
      <row>
        <field text="_managersignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row />
      <sectionref>training</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="MidCounts">
      <call method="getCurrentTransaction">
        <sectionref>till_header</sectionref>
      </call>
      <row />
      <row>
        <field text="_counttype" />
        <sp />
        <field method="getCurrentTransaction.getTypeCode" formatter="TenderCtrlTranType" />
      </row>
      <row>
        <field text="_tillId" />
        <sp />
        <field method="getTenderRepositoryId" />
      </row>
      <row />
      <row style="STRONGUNDERLINE">
        <field text="_tender" />
        <!--<field text="_declared" loc="-18" />
        <field text="_systemtotal" loc="-10" />
        <field text="_overshort" loc="-1" />-->
      </row>
      <iterator method="getLocalCurrencyCountSummaryItemList">
        <sectionref>LocalCurrencyCountSummary</sectionref>
      </iterator>
      <row />
      <row>
        <field text="_tillcountreceiptTotalDeclaredAmt" style="BOLD" />
        <field method="getLocalTotalCountableDeclaredAmt" formatter="Money" loc="-1" />
      </row>
      <row n="2" />
      <sectionref>MidDayLocalCurrencyTotal</sectionref>
      <row />
      <iterator method="getForeignCurrencyCountSummaryItemList">
        <sectionref>ForeignCurrencyTotal</sectionref>
      </iterator>
      <row n="2" />
      <row>
        <field text="_employeesignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row n="2" />
      <row>
        <field text="_managersignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row />
      <sectionref>training</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="StoreBankTillCounts">
      <call method="getCurrentTransaction">
        <sectionref>till_header</sectionref>
      </call>
      <row />
      <row>
        <field text="_counttype" />
        <sp />
        <field method="getCurrentTransaction.getTypeCode" formatter="TenderCtrlTranType" />
      </row>
      <row>
        <field text="_tillId" />
        <sp />
        <field method="getTenderRepositoryId" />
      </row>
      <row />
      <iterator method="getLocalCurrencyCountSummaryItemList">
        <sectionref>StoreBankLocalCurrencyCountSummary</sectionref>
      </iterator>
      <row />
      <row>
        <field text="_tillcountreceiptTotalCurrentyAmountBegin" style="BOLD" />
        <sp />
        <field method="getLocalCurrencyDescription" style="BOLD" />
        <sp />
        <field text="_tillcountreceiptTotalCurrentyAmountEnd" style="BOLD" />
        <field method="getLocalTotalCountableDeclaredAmt" style="BOLD" formatter="Money" loc="-1" />
      </row>
      <row n="2" />
      <iterator method="getForeignCurrencyCountSummaryItemListGroupCurrencies">
        <iterator method="getCountSummaryItems">
          <sectionref>ForeignCurrencyTotal</sectionref>
        </iterator>
        <row>
          <field text="_tillcountreceiptTotalCurrentyAmountBegin" style="BOLD" />
          <sp />
          <field method="getCurrencyDescription" style="BOLD" />
          <sp />
          <field text="_tillcountreceiptTotalCurrentyAmountEnd" style="BOLD" />
          <field method="getTotalCountableDeclaredAmt" style="BOLD" formatter="Money" loc="-1" />
        </row>
        <row />
      </iterator>
      <row n="2" />
      <row>
        <field text="_employeesignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row n="2" />
      <row>
        <field text="_managersignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row />
      <sectionref>training</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="LocalCurrencyCountSummary">
      <row>
        <field method="getDescription" style="BOLD" />
      </row>
      <row>
        <field text="_tillcountreceiptDeclaredAmt" loc="4" />
        <field method="getTotalDeclaredAmount" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillcountreceiptSystemTotal" loc="4" />
        <field method="getTotalSystemAmount" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillcountreceiptDifference" loc="4" />
        <field method="getDifferenceAmount" formatter="Money" loc="-1" />
      </row>
    </section>

    <section name="StoreBankLocalCurrencyCountSummary">
      <row>
        <field method="getDescription" style="BOLD" />
      </row>
      <row>
        <field text="_tillcountreceiptDeclaredAmt" loc="4" />
        <field method="getTotalDeclaredAmount" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillcountreceiptSystemTotal" loc="4" />
        <field method="getTotalSystemAmount" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillcountreceiptDifference" loc="4" />
        <field method="getDifferenceAmount" formatter="Money" loc="-1" />
      </row>
    </section>

    <section name="LocalCurrencyTotal">
      <row>
        <condition class="dtv.pos.docbuilding.conditions.TenderRepositoryTypeCondition" type="TILL" />
        <field text="_draweropeningcashamount" />
        <field method="getDrawerOpeningAmt" formatter="Money" loc="-1" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.PrintPickupTotalCondition" />
        <field text="_totalCashPickupAmount" />
        <field formatter="Money" loc="-1">
          <aggregate class="dtv.pos.till.count.CashPickupTotalDocBuilderField" />
        </field>
      </row>
      <row>
        <field text="_totalcashamount" />
        <field method="getDeclaredLocalCurrencyAmt" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_totalcashdremainingamount" />
        <field method="getTotalRemainingCashAmount" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_totalcashdepositamount" />
        <field method="getTotalLocalCurrencyDepositAmt" formatter="Money" loc="-1" />
      </row>
    </section>

    <section name="MidDayLocalCurrencyTotal">
      <row>
        <field text="_localcurrency" style="BOLD" />
      </row>
      <row />
      <row>
        <condition class="dtv.pos.docbuilding.conditions.TenderRepositoryTypeCondition" type="TILL" />
        <field text="_draweropeningcashamount" style="BOLD" />
        <field method="getDrawerOpeningAmt" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_totalcashamount" style="BOLD" />
        <field method="getSystemLocalCurrencyAmt" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_totalcashdepositamount" style="BOLD" />
        <field method="getDeclaredLocalCurrencyAmt" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_totalcashdremainingamount" style="BOLD" />
        <field method="getRemainAfterMidDayDeposit" formatter="Money" loc="-1" />
      </row>
    </section>

    <section name="CashPickupTotal">
      <row>
        <condition class="dtv.pos.docbuilding.conditions.PrintPickupTotalCondition" />
        <field text="_totalCashPickupAmount" />
        <field formatter="Money" loc="-1">
          <aggregate class="dtv.pos.till.count.CashPickupTotalDocBuilderField" />
        </field>
      </row>
    </section>

    <section name="StoreBankLocalCurrencyTotal">
      <row>
        <field text="_localcurrency" style="BOLD" />
      </row>
      <row />
      <row>
        <field text="_totalcashdepositamount" style="BOLD" />
        <field method="getTotalLocalCurrencyDepositAmt" formatter="Money" loc="-1" />
      </row>
    </section>

    <section name="ForeignCurrencyTotal">
      <row>
        <field method="getDescription" style="BOLD" />
      </row>
      <row>
        <field text="_tillcountreceiptDeclaredAmt" loc="4" />
        <field method="getTotalDeclaredAmount" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillcountreceiptSystemTotal" loc="4" />
        <field method="getTotalSystemAmount" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillcountreceiptDifference" loc="4" />
        <field method="getDifferenceAmount" formatter="Money" loc="-1" />
      </row>
    </section>

    <section name="IssueTill">
      <sectionref>till_header</sectionref>
      <row />
      <row>
        <field text="_tillassignment1" />
        <field text=": " />
        <field method="getInboundTenderRepository.getTenderRepositoryId" />
      </row>
      <row>
        <field text="_tillassignment2" />
        <field text=": " />
        <field method="getInboundSession.getParty.getEmployeeId" />
      </row>
      <row />
      <iterator method="getTenderTypeCounts">
        <iterator method="getTenderCounts">
          <row>
            <field text="_startingamount" />
            <field text=" " />
            <field>
              <aggregate class="dtv.pos.till.count.CashCountTenderDescDocBuilderField" />
            </field>
            <field text=": " />
            <field method="getAmount" formatter="Money" />
          </row>
        </iterator>
      </iterator>
      <row n="2" />
      <row>
        <field text="_employeesignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row n="2" />
      <row>
        <field text="_managersignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row />
      <sectionref>page_break</sectionref>
    </section>

    <section name="SYSTEM_CYCLE">
      <horizontal_rule />
      <sectionref>training</sectionref>
      <row>
        <field text="_store" />
        <sp />
        <field method="getRetailLocationId" />
        <field text="_register" loc="22" />
        <sp />
        <field method="getWorkstationId" />
      </row>
      <row>
        <field text="_date" />
        <sp />
        <field method="getTransactionDate" formatter="DateShort" />
        <field text="_trantime" loc="22" />
        <sp />
        <field method="getBeginDateTimestamp" formatter="TimeShort" />
      </row>
      <row />
      <row>
        <field text="_cashier" />
        <sp />
        <field method="getOperatorParty.getEmployeeId" />
      </row>
<!--       24/7 Add the last 4 digit of the session id -->
      <row>
        <condition method="getTransactionTypeCode" comparison="EQUAL" value="WORKSTATION_CLOSE" />
        <field text="_sessionid" />
        <sp />
        <field method ="getSessionId" formatter = "Last4" />
      </row>
      <row>
        <condition method="getTransactionTypeCode" comparison="EQUAL" value="WORKSTATION_COMPLETE_REM_CLOSE" />
        <field text="_sessionid" />
        <sp />
        <field method ="getSessionId" formatter = "Last4" />
      </row>
      <row />
      <row align="C" charsize="X2HW">
        <field text="*******************" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field style="BOLD">
          <aggregate class="dtv.pos.systemcycle.common.SystemCycleReceiptBannerDocBuilderField" />
        </field>
      </row>
      <row align="C" charsize="X2HW">
        <condition method="getTransactionTypeCode" comparison="EQUAL" value="WORKSTATION_COMPLETE_REM_CLOSE" />
        <field text="_register" style="BOLD" />
        <sp />
        <field method="getStringProperty" method_param="remoteWorkstationId" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field text="*******************" style="BOLD" />
      </row>
      <sectionref>training</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="TillReconcileCount">
      <call method="getCurrentTransaction">
        <sectionref>till_header</sectionref>
      </call>
      <row />
      <row>
        <field text="_counttype" />
        <sp />
        <field method="getCurrentTransaction.getTypeCode" formatter="TenderCtrlTranType" />
      </row>
      <row>
        <field text="_tillId" />
        <sp />
        <field method="getTenderRepositoryId" />
      </row>
      <row />
      <sectionref>LocalCurrencyTotal</sectionref>
      <row />
      <row style="STRONGUNDERLINE">
        <field text="_tender" />
        <field text="_declared" loc="-18" />
        <field text="_endcount" loc="-10" />
        <field text="_overshort" loc="-1" />
      </row>
      <iterator method="getLocalCurrencyCountSummaryItemList">
        <sectionref>LocalCurrencyReconcileCountSummary</sectionref>
      </iterator>
      <row />
      <row>
        <field text="_tillcountreceiptTotalCurrentyAmountBegin" style="BOLD" />
        <sp />
        <field method="getLocalCurrencyDescription" style="BOLD" />
        <sp />
        <field text="_tillcountreceiptTotalCurrentyAmountEnd" style="BOLD" />
        <field method="getCurrentTransaction.getAmount" style="BOLD" formatter="Money" loc="-1" />
      </row>
      <iterator method="getForeignCurrencyCountSummaryItemListGroupCurrencies">
        <iterator method="getCountSummaryItems">
          <sectionref>ForeignCurrencyTotal</sectionref>
        </iterator>
        <row>
          <field text="_tillcountreceiptTotalCurrentyAmountBegin" style="BOLD" />
          <sp />
          <field method="getCurrencyDescription" style="BOLD" />
          <sp />
          <field text="_tillcountreceiptTotalCurrentyAmountEnd" style="BOLD" />
          <field method="getTotalCountableDeclaredAmt" style="BOLD" formatter="Money" loc="-1" />
        </row>
        <row />
      </iterator>
      <row n="2" />
      <row>
        <field text="_employeesignature" />
      </row>
      <row>
        <field text="_totalcashdepositamount" style="BOLD" />
        <field method="getTotalLocalCurrencyDepositAmt" formatter="Money" loc="-1" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row n="2" />
      <row>
        <field text="_managersignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row />
      <sectionref>training</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="LocalCurrencyReconcileCountSummary">
      <row>
        <field method="getDescription" style="BOLD" />
      </row>
      <row>
        <field text="_tillcountreceiptDeclaredAmt" loc="4" />
        <field method="getTotalDeclaredAmount" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillcountreceiptSystemTotal" loc="4" />
        <field method="getTotalEndCountAmount" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillcountreceiptDifference" loc="4" />
        <field method="getDifferenceAmount" formatter="Money" loc="-1" />
      </row>
    </section>

    <section name="POSTVOID">
      <sectionref>header</sectionref>
      <row>
        <field method="getVoidedTransaction.getCustomerParty" formatter="BasicName" />
      </row>
      <sectionref>LOCAL.POSTVOID_HEADER</sectionref>
      <row>
        <field text="_voidTransaction" style="BOLD" />
      </row>
      <row>
        <condition method="getPostVoidReasonCode" comparison="NOT_NULL" />
        <field>
          <aggregate class="dtv.pos.ejournal.postvoid.PostVoidReasonCodeDocBuilderField" />
        </field>
      </row>
      <horizontal_rule />
      <call method="getVoidedTransaction">
        <sectionref>items</sectionref>
        <sectionref>totals</sectionref>
        <sectionref>tax_code_summary</sectionref>
        <sectionref>tenders</sectionref>
        <sectionref>change</sectionref>
      </call>
      <horizontal_rule />
      <row>
        <field text="_originalTranId" style="BOLD" />
        <sp />
        <field method="getVoidedTransaction.getTransactionSequence" />
      </row>
      <row>
        <field text="_originalCashierId" style="BOLD" />
        <sp />
        <field method="getVoidedTransaction.getOperatorParty.getEmployeeId" />
      </row>
      <row>
        <field text="_originalRegisterId" style="BOLD" />
        <sp />
        <field method="getVoidedTransaction.getWorkstationId" />
      </row>
      <row align="C" charsize="X2HW">
        <field text="_voidRcptBottom" style="BOLD" />
      </row>
      <sectionref>LOCAL.POSTVOID_FOOTER</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="WORK_ORDER_ACCOUNT">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>WORK_ORDER_ID_BANNER</sectionref>
      <sectionref>WORK_ORDER_HEADER_DB</sectionref>
      <sectionref>WORK_ORDER_ITEMS</sectionref>
      <sectionref>WORK_ORDER_TASKS</sectionref>
      <sectionref>WORK_ORDER_TERMS</sectionref>
      <sectionref>WORK_ORDER_FOOTER_DB</sectionref>
      <sectionref>CUST_ACCT_ID_BARCODE</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="WORK_ORDER_MAIN_STORE">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>WORK_ORDER_ID_BANNER</sectionref>
      <sectionref>WORK_ORDER_ITEMS</sectionref>
      <sectionref>WORK_ORDER_TASKS</sectionref>
      <call method="getAccount">
        <sectionref>WORK_ORDER_CUST_INFO</sectionref>
      </call>
      <sectionref>CUST_ACCT_SIGNATURE</sectionref>
      <sectionref>WORK_ORDER_ACCT_ID_BARCODE</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <call method="getCurrentTransaction">
        <sectionref>trans_barcode</sectionref>
      </call>
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="WORK_ORDER_MERCH_TICKET">
      <iterator method="getAccount.getWorkItemsRelationship">
        <condition class="dtv.pos.docbuilding.conditions.VoidedWorkItemCondition" />
        <sectionref>CUST_ACCT_HEADER</sectionref>
        <call method="getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
          <sectionref>cust_account_store_location</sectionref>
        </call>
        <row />
        <sectionref>WORK_ORDER_MERCH_TICKET_HEADER_DB</sectionref>
        <row />
        <sectionref>WORK_ORDER_ID_BANNER</sectionref>
        <sectionref>WORK_ORDER_MERCH_TICKET_ITEM</sectionref>
        <sectionref>WORK_ORDER_TASKS_VENDOR</sectionref>
        <call method="getWorkOrderAccount">
          <sectionref>WORK_ORDER_CUST_INFO</sectionref>
        </call>
        <sectionref>WORK_ORDER_ACCT_ID_BARCODE</sectionref>
        <sectionref>system_mode</sectionref>
        <row />
        <sectionref>WORK_ORDER_MERCH_TICKET_FOOTER_DB</sectionref>
        <row />
        <sectionref>VendorCopyLabel</sectionref>
        <sectionref>page_break</sectionref>
      </iterator>
    </section>

    <section name="WORK_ORDER_ID_BANNER">
      <row align="C" charsize="X2HW">
        <field text="_workOrderReceiptAcctId" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field method="getWorkOrderAccount.getCustAccountId" style="BOLD" />
      </row>
      <row />
      <row>
        <field text="_workOrderReceiptExpected" />
        <sp />
        <field method="getWorkOrderAccount.getEstimatedCompletionDate" formatter="DateShort" />
      </row>
      <row />
    </section>

    <section name="WORK_ORDER_TERMS">
      <row />
      <sectionref>WORK_ORDER_TERMS_DB</sectionref>
      <row />
    </section>

    <section name="WORK_ORDER_TASKS_HEADER">
      <row style="STRONGUNDERLINE">
        <field text="_workOrderReceiptItemDesc" />
        <field text="_workOrderReceiptPriceType" loc="-12" />
        <field text="_workOrderReceiptAmount" loc="-1" />
      </row>
    </section>

    <section name="WORK_ORDER_TASKS_HEADER_VENDOR">
      <row style="STRONGUNDERLINE">
        <field text="_workOrderReceiptItemDesc" />
      </row>
      <row />
    </section>

    <section name="WORK_ORDER_TASKS_VENDOR">
      <sectionref>WORK_ORDER_TASKS_HEADER_VENDOR</sectionref>
      <iterator method="getWorkOrderAccount.getCustItemAccountDetails">
        <condition class="dtv.pos.docbuilding.conditions.ValidWorkOrderLineCondition" />
        <row>
          <field method="getDescription" />
        </row>
        <region left_margin="2" right_margin="2">
          <field method="getRetailLineItem.getInstructions" />
        </region>
        <row />
      </iterator>
      <horizontal_rule style="Double" />
    </section>

    <section name="WORK_ORDER_TASKS">
      <sectionref>WORK_ORDER_TASKS_HEADER</sectionref>
      <iterator method="getAccount.getCustItemAccountDetails">
        <condition class="dtv.pos.docbuilding.conditions.ValidWorkOrderLineCondition" />
        <row>
          <field method="getDescription" />
          <field method="getRetailLineItem.getPriceStatus" loc="-12" />
          <field method="getExtendedAmount" formatter="Money" loc="-1" />
        </row>
        <region left_margin="2" right_margin="2">
          <field method="getRetailLineItem.getInstructions" />
        </region>
      </iterator>
      <horizontal_rule />
      <row>
        <field text="_workOrderReceiptAcctTotal" loc="-12" />
        <field method="getAccount.getAccountTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_workOrderReceiptAcctDeposit" loc="-12" />
        <field method="getAccount.getAccountPayments" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_workOrderReceiptAcctBalance" loc="-12" />
        <field method="getAccount.getAccountBalance" formatter="Money" loc="-1" />
      </row>
      <horizontal_rule style="Double" />
    </section>

    <section name="WORK_ORDER_ITEMS_HEADER">
      <row style="STRONGUNDERLINE">
        <field text="_workOrderReceiptItem" />
        <field text="_workOrderReceiptItemVal" loc="-3" />
      </row>
    </section>

    <section name="WORK_ORDER_ITEM">
      <condition class="dtv.pos.docbuilding.conditions.VoidedWorkItemCondition" />
      <row>
        <field method="getDescription" />
        <field method="getValueAmount" formatter="Money" align="R" loc="-3" />
      </row>
      <row>
        <field method="getWorkItemSerialNumber" loc="1" />
      </row>
      <row />
    </section>

    <section name="WORK_ORDER_MERCH_TICKET_ITEM">
      <sectionref>WORK_ORDER_ITEMS_HEADER</sectionref>
      <sectionref>WORK_ORDER_ITEM</sectionref>
    </section>

    <section name="WORK_ORDER_ITEMS">
      <sectionref>WORK_ORDER_ITEMS_HEADER</sectionref>
      <iterator method="getAccount.getWorkItemsRelationship">
        <sectionref>WORK_ORDER_ITEM</sectionref>
      </iterator>
      <horizontal_rule />
      <row>
        <field text="_workOrderReceiptItemTotal" loc="-12" />
        <field method="getAccount.getTotalValue" formatter="Money" align="R" loc="-3" />
      </row>
      <row />
    </section>

    <section name="CUST_ACCOUNT_CANCEL">
      <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED" />
      <row align="C" charsize="X2HW">
        <field text="*******************" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field text="_rcptCancel" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field text="*******************" style="BOLD" />
      </row>
      <row />
    </section>

    <section name="SP_ORDER_ACCOUNT">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>SP_ORDER_ID_BANNER</sectionref>
      <sectionref>SPECIAL_ORDER_HEADER_DB</sectionref>
      <sectionref>CUST_ACCT_ITEM_HEADER</sectionref>
      <sectionref>SP_ORDER_ITEMS</sectionref>
      <sectionref>CUST_ACCT_ITEMS_TOTALS</sectionref>
      <sectionref>CUST_ACCT_PAYMENT_HEADER</sectionref>
      <sectionref>SP_ORDER_PAYMENT_ITEMS</sectionref>
      <sectionref>SP_ORDER_SUMMARY</sectionref>
      <sectionref>SP_ORDER_CANCEL_SUMMARY</sectionref>
      <sectionref>CUST_ACCT_ID_BARCODE</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>SPECIAL_ORDER_FOOTER_DB</sectionref>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="SP_ORDER_MAIN_STORE">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>SP_ORDER_ID_BANNER</sectionref>
      <sectionref>CUST_ACCT_ITEM_HEADER</sectionref>
      <sectionref>SP_ORDER_ITEMS</sectionref>
      <sectionref>CUST_ACCT_ITEMS_TOTALS</sectionref>
      <sectionref>CUST_ACCT_PAYMENT_HEADER</sectionref>
      <sectionref>SP_ORDER_PAYMENT_ITEMS</sectionref>
      <sectionref>SP_ORDER_SUMMARY</sectionref>
      <sectionref>SP_ORDER_CANCEL_SUMMARY</sectionref>
      <sectionref>SP_ORDER_TERMS</sectionref>
      <sectionref>CUST_ACCT_SIGNATURE</sectionref>
      <sectionref>LAYAWAY_FOOTER</sectionref>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="CONFIGURABLE_CUSTOMER_ACCOUNTS">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_ID_BANNER</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_HEADER_DB</sectionref>
      <sectionref>CUST_ACCT_ITEM_HEADER</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_ITEMS</sectionref>
      <sectionref>CUST_ACCT_ITEMS_TOTALS</sectionref>
      <sectionref>CUST_ACCT_PAYMENT_HEADER</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_PAYMENT_ITEMS</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_SUMMARY</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_CANCEL_SUMMARY</sectionref>
      <sectionref>CUST_ACCT_ID_BARCODE</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_FOOTER_DB</sectionref>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="CONFIGURABLE_CUSTOMER_ACCOUNTS_MAIN_STORE">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_ID_BANNER</sectionref>
      <sectionref>CUST_ACCT_ITEM_HEADER</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_ITEMS</sectionref>
      <sectionref>CUST_ACCT_ITEMS_TOTALS</sectionref>
      <sectionref>CUST_ACCT_PAYMENT_HEADER</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_PAYMENT_ITEMS</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_SUMMARY</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_CANCEL_SUMMARY</sectionref>
      <!-- Commented this out since only Special Order uses Terms.
           If terms is needed then just uncomment this part.
      <sectionref>CONFIGURABLE_CUST_ACCT_TERMS</sectionref> -->
      <sectionref>CUST_ACCT_SIGNATURE</sectionref>
      <sectionref>CONFIGURABLE_CUST_ACCT_FOOTER</sectionref>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="SEND_SALE_ACCOUNT">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>SEND_SALE_HEADER_DB</sectionref>
      <sectionref>CUSTOMER_ACCOUNT_SHIPPING_ADDRESS</sectionref>
      <sectionref>SEND_SALE_ID_BANNER</sectionref>
      <sectionref>CUST_ACCT_ITEM_HEADER</sectionref>
      <sectionref>SEND_SALE_ITEMS</sectionref>
      <sectionref>CUST_ACCT_ITEMS_TOTALS</sectionref>
      <sectionref>SEND_SALE_TERMS</sectionref>
      <sectionref>SEND_SALE_FOOTER_DB</sectionref>
      <sectionref>CUST_ACCT_ID_BARCODE</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="SEND_SALE_MAIN_STORE">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>CUSTOMER_ACCOUNT_SHIPPING_ADDRESS</sectionref>
      <sectionref>SEND_SALE_ID_BANNER</sectionref>
      <sectionref>CUST_ACCT_ITEM_HEADER</sectionref>
      <sectionref>SEND_SALE_ITEMS</sectionref>
      <sectionref>CUST_ACCT_ITEMS_TOTALS</sectionref>
      <sectionref>CUST_ACCT_SIGNATURE</sectionref>
      <sectionref>LAYAWAY_FOOTER</sectionref>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="CUSTOMER_ACCOUNT_SHIPPING_ADDRESS">
      <row />
      <row>
        <field text="_sendSaleshipto" style="BOLD" />
      </row>
      <row>
        <condition method="getAccount.getDeliveryModifier.getLastName" comparison="NOT_NULL" />
        <field method="getAccount.getDeliveryModifier" formatter="BasicName" loc="2" />
      </row>
      <region left_margin="2">
        <field method="getAccount.getDeliveryModifier" formatter="BasicAddress" />
      </region>
      <row>
        <field method="getAccount.getDeliveryModifier.getTelephone1" formatter="Phone" loc="2" />
      </row>
      <row>
        <field method="getAccount.getDeliveryModifier.getTelephone2" formatter="Phone" loc="2" />
      </row>
      <row />
    </section>

    <section name="SP_ORDER_ID_BANNER">
      <row align="C" charsize="X2HW">
        <field text="_specOrderReceiptAcctId" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field method="getAccount.getCustAccountId" style="BOLD" />
      </row>
      <row />
    </section>

    <section name="CONFIGURABLE_CUST_ACCT_ID_BANNER">
      <row align="C" charsize="X2HW">
        <field method="getCustomerAccountTypeTranslatedText(_configurableCustAcctReceiptAcctId)" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field method="getAccount.getCustAccountId" style="BOLD" />
      </row>
      <row />
    </section>

    <section name="SEND_SALE_ITEMS">
      <call method="getAccount">
        <iterator method="getCustItemAccountDetailsFiltered">
          <!-- The following line is an example of a summary filter, for base we are not going to use a summary filter-->
          <!-- <method_param dtype="String">dtv.pos.hardware.rcptbuilding.SummaryRcptCustItemAcctDetailFilter</method_param>-->
          <method_param dtype="String">dtv.pos.hardware.rcptbuilding.DefaultRcptLineItemFilter</method_param>
          <condition class="dtv.pos.docbuilding.conditions.ValidSendSaleLineCondition" />
          <sectionref>layaway_item</sectionref>
        </iterator>
      </call>
      <row />
    </section>

    <section name="SP_ORDER_ITEMS">
      <iterator method="getAccount.getCustItemAccountDetails">
        <condition class="dtv.pos.docbuilding.conditions.ValidSpecOrderLineCondition" />
        <sectionref>layaway_item</sectionref>
      </iterator>
    </section>

    <section name="CONFIGURABLE_CUST_ACCT_ITEMS">
      <iterator method="getAccount.getCustItemAccountDetails">
        <condition class="dtv.pos.docbuilding.conditions.ValidConfigurableCustAcctLineCondition" />
        <sectionref>configurableCustAcct_item</sectionref>
      </iterator>
    </section>

    <section name="SP_ORDER_PAYMENT_ITEMS">
      <iterator method="getAccount.getCustItemAccountDetails">
        <condition class="dtv.pos.docbuilding.conditions.ValidSpecOrderPaymentLineCondition" />
        <sectionref>cust_acct_payment_item</sectionref>
      </iterator>
      <row />
    </section>

    <section name="CONFIGURABLE_CUST_ACCT_PAYMENT_ITEMS">
      <iterator method="getAccount.getCustItemAccountDetails">
        <condition class="dtv.pos.docbuilding.conditions.ValidConfigurableCustAcctPaymentLineCondition" />
        <sectionref>cust_acct_payment_item</sectionref>
      </iterator>
      <row />
    </section>

    <section name="SP_ORDER_TENDERS">
      <call method="getCurrentTransaction">
        <sectionref>tenders</sectionref>
        <sectionref>change</sectionref>
      </call>
    </section>

    <section name="LAYAWAY_FOOTER">
      <row />
      <sectionref>system_mode</sectionref>
    </section>

    <section name="CONFIGURABLE_CUST_ACCT_FOOTER">
      <row />
      <sectionref>system_mode</sectionref>
    </section>

    <section name="LAYAWAY_PAYMENT_ITEMS">
      <condition method="getAccount.getCustItemAccountDetails" comparison="NOT_EMPTY" />
      <sectionref>CUST_ACCT_PAYMENT_HEADER</sectionref>
      <iterator method="getAccount.getCustItemAccountDetails">
        <condition class="dtv.pos.docbuilding.conditions.ValidLayawayPaymentLineCondition" />
        <sectionref>cust_acct_payment_item</sectionref>
      </iterator>
    </section>

    <section name="cust_acct_payment_item">
      <row>
        <field method="getDescription" style="BOLD" />
        <field method="getExtendedAmount" formatter="Money" loc="-3" />
      </row>
      <row>
        <field method="getOrigItemAddDate" formatter="DateShort" />
      </row>
    </section>

    <section name="SP_ORDER_SUMMARY">
      <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED" inverted="true" />
      <horizontal_rule />
      <row>
        <field text="_specOrderReceiptAcctTotal" loc="-14" />
        <field method="getAccount.getAccountTotal" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_specOrderReceiptAcctDeposit" loc="-14" />
        <field method="getAccount.getAccountPayments" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_specOrderReceiptAcctBalance" loc="-14" />
        <field method="getAccount.getAccountBalance" formatter="Money" loc="-3" />
      </row>
    </section>

    <section name="CONFIGURABLE_CUST_ACCT_SUMMARY">
      <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED" inverted="true" />
      <horizontal_rule />
      <row>
        <field method="getCustomerAccountTypeTranslatedText(_configurableCustAcctReceiptAcctTotal)" loc="-14" />
        <field method="getAccount.getAccountTotal" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_configurableCustAcctReceiptAcctDeposit" loc="-14" />
        <field method="getAccount.getAccountPayments" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_configurableCustAcctReceiptAcctBalance" loc="-14" />
        <field method="getAccount.getAccountBalance" formatter="Money" loc="-3" />
      </row>
    </section>

    <section name="CONFIGURABLE_CUST_ACCT_CANCEL_SUMMARY">
      <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED" />
      <horizontal_rule />
      <row>
        <field method="getCustomerAccountTypeTranslatedText(_configurableCustAcctReceiptAcctTotal)" loc="-14" />
        <field method="getAccount.getActiveAccountTotal" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_rcptCancelledSpecialOrder" loc="-14" />
        <field method="getAccount.getActiveAccountTotal.negate" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_configurableCustAcctReceiptAcctDeposit" loc="-14" />
        <field method="getAccount.getActiveAccountPayments.negate" formatter="Money" loc="-3" />
      </row>
      <sectionref>SP_ORDER_RESTOCKING_FEE</sectionref>
      <row>
        <field text="_specOrderReceiptAcctBalance" loc="-14" />
        <field method="getAccount.getAccountBalance.negate" formatter="Money" loc="-3" />
      </row>
    </section>

    <section name="SP_ORDER_CANCEL_SUMMARY">
      <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED" />
      <horizontal_rule />
      <row>
        <field text="_specOrderReceiptAcctTotal" loc="-14" />
        <field method="getAccount.getActiveAccountTotal" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_rcptCancelledSpecialOrder" loc="-14" />
        <field method="getAccount.getActiveAccountTotal.negate" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_specOrderReceiptAcctDeposit" loc="-14" />
        <field method="getAccount.getActiveAccountPayments.negate" formatter="Money" loc="-3" />
      </row>
      <sectionref>SP_ORDER_RESTOCKING_FEE</sectionref>
      <row>
        <field text="_specOrderReceiptAcctBalance" loc="-14" />
        <field method="getAccount.getAccountBalance.negate" formatter="Money" loc="-3" />
      </row>
    </section>

    <section name="SP_ORDER_RESTOCKING_FEE">
      <condition class="dtv.pos.customer.account.RestockingFeeAppliedCondition" feeType="SP_ORDER_RESTOCKING_FEE" />
      <row>
        <field text="_rcptRestockingFee" loc="-14" />
        <field formatter="Money" loc="-3">
          <aggregate class="dtv.pos.customer.account.RestockingFeeAmountDocBuilderField" />
          <Parameter name="feeType" value="SP_ORDER_RESTOCKING_FEE" />
        </field>
      </row>
    </section>

    <section name="SP_ORDER_INFO">
      <condition class="dtv.pos.docbuilding.conditions.ContainsCustAccountModCondition" value="SPECIAL_ORDER" />
      <row>
        <field text="_specOrderReceiptAcctId" style="BOLD" />
        <sp />
        <field method="getCustomerAccountModifier.getCustAccountId" />
      </row>
    </section>

    <section name="SP_ORDER_TERMS">
      <condition class="dtv.pos.docbuilding.conditions.PrintSpecOrderTerms" />
      <condition method="getAccount.getCustAccountStateCode" comparison="EQUAL" value="NEW" />
      <horizontal_rule style="Double" />
      <row />
      <sectionref>SPECIAL_ORDER_TERMS_DB</sectionref>
      <row />
    </section>

    <section name="DONATION_FOOTER_MESSAGE">
      <condition class="dtv.pos.docbuilding.conditions.AllowDonationFooterMessageOnReceipts" />
      <region>
        <field formatter="Money">
          <aggregate class="dtv.pos.common.rcpt.GetDonationFooterDocBuilderTextField" />
        </field>
      </region>
      <row />
    </section>

    <!-- Uncomment this if Terms is applicable to the customer account then make a generic version of the
         PrintSpecOrderTerms class.
         Currently excluded since only special order uses Terms.
    <section name="CONFIGURABLE_CUST_ACCT_TERMS">
      <condition class="dtv.pos.docbuilding.conditions.PrintSpecOrderTerms" />
      <condition method="getAccount.getCustAccountStateCode" comparison="EQUAL" value="NEW" />
      <horizontal_rule style="Double" />
      <row />
      <sectionref>CONFIGURABLE_CUST_ACCT_TERMS_DB</sectionref>
      <row />
    </section> -->

    <section name="SEND_SALE_TERMS">
      <row />
      <sectionref>SEND_SALE_TERMS_DB</sectionref>
      <row />
    </section>

    <section name="cust_account_store_location">
      <row align="C">
        <field method="getStoreName" />
      </row>
      <region alignment="C" left_margin="1">
        <field method="." formatter="BasicAddress" />
      </region>
      <row align="C">
        <condition method="getTelephone1" comparison="NOT_BLANK" />
        <field method="getTelephone1" formatter="Phone" />
      </row>
      <horizontal_rule />
    </section>

    <section name="LAYAWAY_MAIN_STORE">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>LAYAWAY_ID_BANNER</sectionref>
      <sectionref>CUST_ACCT_ITEM_HEADER</sectionref>
      <sectionref>LAYAWAY_ITEMS</sectionref>
      <sectionref>CUST_ACCT_ITEMS_TOTALS</sectionref>
      <sectionref>LAYAWAY_PAYMENT_ITEMS</sectionref>
      <sectionref>LAYAWAY_SUMMARY</sectionref>
      <sectionref>LAYAWAY_CANCEL_SUMMARY</sectionref>
      <sectionref>LAYAWAY_PAYMENT_SCHEDULE</sectionref>
      <sectionref>CUST_ACCT_SIGNATURE</sectionref>
      <sectionref>LAYAWAY_FOOTER</sectionref>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>StoreCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="LAYAWAY_ACCOUNT">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>LAYAWAY_ID_BANNER</sectionref>
      <sectionref>LAYAWAY_HEADER_DB</sectionref>
      <sectionref>CUST_ACCT_ITEM_HEADER</sectionref>
      <sectionref>LAYAWAY_ITEMS</sectionref>
      <sectionref>CUST_ACCT_ITEMS_TOTALS</sectionref>
      <sectionref>LAYAWAY_PAYMENT_ITEMS</sectionref>
      <sectionref>LAYAWAY_SUMMARY</sectionref>
      <sectionref>LAYAWAY_CANCEL_SUMMARY</sectionref>
      <sectionref>LAYAWAY_TERMS</sectionref>
      <sectionref>LAYAWAY_PAYMENT_SCHEDULE</sectionref>
      <sectionref>LAYAWAY_FOOTER_DB</sectionref>
      <sectionref>CUST_ACCT_ID_BARCODE</sectionref>
      <sectionref>LAYAWAY_FOOTER</sectionref>
      <sectionref>CUST_ACCOUNT_CANCEL</sectionref>
      <sectionref>CustomerCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="LAYAWAY_MERCH_TICKET">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>LAYAWAY_ID_BANNER</sectionref>
      <sectionref>LAYAWAY_MERCH_TICKET_HEADER_DB</sectionref>
      <sectionref>CUST_ACCT_ITEM_HEADER</sectionref>
      <sectionref>LAYAWAY_ITEMS</sectionref>
      <sectionref>CUST_ACCT_ITEMS_TOTALS</sectionref>
      <sectionref>LAYAWAY_MERCH_TICKET_FOOTER_DB</sectionref>
      <sectionref>MerhandiseCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="LAYAWAY_MERCH_TICKET_PER_ITEM">
      <iterator method="getCustomerItemAccountAndDetails">
        <condition class="dtv.pos.docbuilding.conditions.ValidLayawayLineCondition" perItem="true" />
        <condition class="dtv.pos.docbuilding.conditions.CustItemAcctDetailStateCondition" value="NEW">
          <Parameter name="value" value="OPEN" />
        </condition>
        <condition class="dtv.pos.docbuilding.conditions.CustItemAcctDetailNewCondition" />
        <sectionref>CUST_ACCT_HEADER</sectionref>
        <call method="a.getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
          <sectionref>cust_account_store_location</sectionref>
        </call>
        <call method="a">
          <!-- dtv.pos.customer.account.AccountMaintEditModel -->
          <sectionref>LAYAWAY_MERCH_TICKET_HEADER_DB</sectionref>
          <sectionref>CUST_ACCT_INFO</sectionref>
          <sectionref>LAYAWAY_ID_BANNER</sectionref>
        </call>
        <call method="b">
          <!-- dtv.xst.dao.cat.ICustomerItemAccountDetail -->
          <sectionref>CUST_ACCT_ITEM_HEADER</sectionref>
          <sectionref>layaway_item</sectionref>
        </call>
        <row />
        <sectionref>LAYAWAY_MERCH_TICKET_FOOTER_DB</sectionref>
        <sectionref>MerhandiseCopyLabel</sectionref>
        <sectionref>page_break</sectionref>
      </iterator>
    </section>

    <section name="SEND_SALE_ID_BANNER">
      <row align="C" charsize="X2HW">
        <field text="_sendSaleId" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field method="getAccount.getCustAccountId" style="BOLD" />
      </row>
      <row />
    </section>

    <section name="SEND_SALE_MERCH_TICKET_PER_ITEM">
      <iterator method="getCustomerItemAccountAndDetails">
        <condition class="dtv.pos.docbuilding.conditions.CustItemAcctDetailPhysItemCondition" />
        <sectionref>CUST_ACCT_HEADER</sectionref>
        <call method="a.getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
          <sectionref>cust_account_store_location</sectionref>
        </call>
        <call method="a">
          <sectionref>CUST_ACCT_INFO</sectionref>
          <sectionref>SEND_SALE_ID_BANNER</sectionref>
          <sectionref>SEND_SALE_MERCH_TICKET_HEADER_DB</sectionref>
        </call>
        <call method="b">
          <row>
            <field text="_qty" style="BOLD" />
            <sp />
            <field method="getRetailLineItem.getQuantity" />
          </row>
          <row>
            <field text="_item" style="BOLD" />
            <sp />
            <field method="getRetailLineItem.getItem.getItemId" />
          </row>
          <row>
            <field method="getRetailLineItem.getItem.getDescription" />
          </row>
          <row />
          <call method="getRetailLineItem.getInventoryDocumentLineItem.getParentDocument.getShipments">
            <call method="get">
              <method_param dtype="Integer">0</method_param>
              <row>
                <condition method="getShippingCarrier" comparison="NOT_NULL" />
                <field text="_editField_shipper" style="BOLD" />
                <sp />
                <field method="getShippingCarrier" />
              </row>
              <row>
                <condition method="getTrackingNumber" comparison="NOT_NULL" />
                <field text="_editField_trackingNumber" style="BOLD" />
                <sp />
                <field method="getTrackingNumber" />
              </row>
            </call>
          </call>
          <row />
          <row>
            <field text="_sendSaleshipto" style="BOLD" />
          </row>
          <row>
            <condition method="getParentCustItemAccount.getDeliveryModifier.getLastName" comparison="NOT_NULL" />
            <field method="getParentCustItemAccount.getDeliveryModifier" formatter="BasicName" loc="2" />
          </row>
          <region left_margin="2">
            <field method="getParentCustItemAccount.getDeliveryModifier" formatter="BasicAddress" />
          </region>
          <row>
            <field method="getParentCustItemAccount.getDeliveryModifier.getTelephone1" formatter="Phone" loc="2" />
          </row>
          <row>
            <field method="getParentCustItemAccount.getDeliveryModifier.getTelephone2" formatter="Phone" loc="2" />
          </row>
        </call>
        <row />
        <sectionref>system_mode</sectionref>
        <call method="a">
          <sectionref>SEND_SALE_MERCH_TICKET_FOOTER_DB</sectionref>
        </call>
        <sectionref>MerhandiseCopyLabel</sectionref>
        <sectionref>page_break</sectionref>
      </iterator>
    </section>

    <section name="SEND_SALE_MERCH_TICKET">
      <sectionref>CUST_ACCT_HEADER</sectionref>
      <call method="getCurrentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <sectionref>cust_account_store_location</sectionref>
      </call>
      <sectionref>CUST_ACCT_INFO</sectionref>
      <sectionref>SEND_SALE_ID_BANNER</sectionref>
      <sectionref>SEND_SALE_MERCH_TICKET_HEADER_DB</sectionref>
      <sectionref>SEND_SALE_MERCH_SHIP_TO</sectionref>
      <sectionref>SEND_SALE_MERCH_BILL_TO</sectionref>
      <sectionref>SEND_SALE_MERCH_ITEMS</sectionref>
      <sectionref>SEND_SALE_MERCH_CUST_PHONE</sectionref>
      <sectionref>SEND_SALE_MERCH_NOTES</sectionref>
      <sectionref>SEND_SALE_MERCH_FOOTER</sectionref>
      <sectionref>SEND_SALE_MERCH_CUST_SIGN</sectionref>
      <sectionref>SEND_SALE_MERCH_TRACK_NUM</sectionref>
      <sectionref>system_mode</sectionref>
      <row />
      <sectionref>SEND_SALE_MERCH_TICKET_FOOTER_DB</sectionref>
      <sectionref>MerhandiseCopyLabel</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="SEND_SALE_MERCH_ITEMS">
      <row />
      <row>
        <field text="_packageContents" style="BOLD" />
      </row>
      <iterator method="getAccount.getCustItemAccountDetails">
        <condition class="dtv.pos.docbuilding.conditions.CustItemAcctDetailPhysItemCondition" />
        <row>
          <field method="getRetailLineItem.getQuantity" />
          <sp />
          <field method="getRetailLineItem.getItem.getItemId" />
          <sp />
          <field method="getRetailLineItem.getItem.getDescription" />
        </row>
      </iterator>
    </section>

    <section name="SEND_SALE_MERCH_SHIP_TO">
      <row />
      <call method="getAccount.getDeliveryModifier">
        <row>
          <field text="_sendSaleshipto" style="BOLD" />
        </row>
        <row>
          <condition method="getLastName" comparison="NOT_NULL" />
          <field method="." formatter="BasicName" loc="2" />
        </row>
        <region left_margin="2">
          <field method="." formatter="BasicAddress" />
        </region>
      </call>
    </section>

    <section name="SEND_SALE_MERCH_BILL_TO">
      <row />
      <call method="getAccount.getParty">
        <row>
          <field text="_sendSaleBillTo" style="BOLD" />
        </row>
        <row>
          <condition method="getLastName" comparison="NOT_NULL" />
          <field method="." formatter="BasicName" loc="2" />
        </row>
        <region left_margin="2">
          <field method="getPrimaryLocaleInformation" formatter="BasicAddress" />
        </region>
      </call>
    </section>

    <section name="SEND_SALE_MERCH_CUST_PHONE">
      <row />
      <row>
        <field text="_sendSaleCustPhone" style="BOLD" />
        <sp />
        <field method="getAccount.getParty.getTelephone1" formatter="Phone" />
      </row>
    </section>

    <section name="SEND_SALE_MERCH_NOTES">
      <row />
      <row>
        <field text="_sendSaleCustNotes" style="BOLD" />
      </row>
      <call method="getAccount">
        <iterator method="getCustAccountNotes">
          <region left_margin="2">
            <condition method="getNote" comparison="NOT_NULL" />
            <field method="getNote" />
          </region>
        </iterator>
      </call>
    </section>

    <section name="SEND_SALE_MERCH_CUST_SIGN">
      <row />
      <row>
        <field text="_commonAuthorizedSignature" />
        <sp />
        <sp />
        <field text="x_______________________________________" />
      </row>
    </section>

    <section name="SEND_SALE_MERCH_TRACK_NUM">
      <row />
      <row>
        <field text="_sendSaleTrackNum" />
        <sp />
        <sp />
        <field text="x_______________________________________" />
      </row>
    </section>

    <section name="SEND_SALE_MERCH_FOOTER">
      <row />
      <call method="getAccount.getCustItemAccountDetails">
        <call method="get">
          <method_param dtype="Integer">0</method_param>
          <row>
            <field text="_sendSaleTransId" />
            <sp />
            <field method="getTransactionSequence" />
          </row>
          <row>
            <field text="_sendSaleDate" />
            <sp />
            <field method="getRetailLineItem.getTransactionDate" formatter="DateShort" />
          </row>
        </call>
      </call>
      <row>
        <field text="_sendSaleShippingMethod" />
        <sp />
        <field method="getAccount.getDeliveryModifier.getShippingMethodObject.getShipperMethodDesc" />
      </row>
    </section>

    <section name="CUST_ACCT_HEADER">
      <sectionref>logo</sectionref>
      <row />
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
    </section>

    <section name="LAYAWAY_TENDERS">
      <call method="getCurrentTransaction">
        <sectionref>tenders</sectionref>
        <sectionref>change</sectionref>
      </call>
      <row />
    </section>

    <section name="LAYAWAY_TENDERS_STORE">
      <call method="getCurrentTransaction">
        <sectionref>storecopy_tenders</sectionref>
        <sectionref>change</sectionref>
      </call>
      <row />
    </section>

    <section name="CUST_ACCT_INFO">
      <sectionref>LOCAL.NON_FISCAL</sectionref>
      <call method="getCurrentTransaction">
        <sectionref>transaction_header_info</sectionref>
      </call>
      <row />
      <sectionref>SALES_PERSON_INFO</sectionref>
      <row>
        <field text="_layawayReceiptCashier" />
        <sp />
        <field method="getCurrentTransaction.getOperatorParty.getEmployeeId" />
      </row>
      <row>
        <field text="_layawayReceiptCustomerId" />
        <sp />
        <field method="getAccount.getParty.getCustomerId" />
      </row>
      <row>
        <field text="_layawayReceiptCustomerName" />
        <sp />
        <field method="getAccount.getParty" formatter="BasicName" />
      </row>
      <row />
      <sectionref>system_mode</sectionref>
    </section>

    <section name="WORK_ORDER_CUST_INFO">
      <row />
      <row>
        <field text="_workOrderReceiptCustId" />
        <sp />
        <field method="getParty.getCustomerId" />
      </row>
      <row>
        <field method="getParty" formatter="BasicName" loc="2" />
      </row>
      <region left_margin="2">
        <field method="getParty.getPrimaryLocaleInformation" formatter="BasicAddress" />
      </region>
      <row>
        <condition method="getParty.getTelephone1" comparison="NOT_BLANK" />
        <field method="getParty.getTelephone1" formatter="Phone" loc="2" />
      </row>
      <row />
    </section>
    <!-- Source object: N/A -->
    <section name="CUST_ACCT_ITEM_HEADER">
      <row style="STRONGUNDERLINE">
        <field text="_layawayReceiptItem" />
        <field text="_layawayReceiptQty" align="R" loc="14" />
        <field text="_layawayReceiptPrice" align="R" loc="-15" />
        <field text="_layawayReceiptAmount" align="R" loc="-3" />
      </row>
    </section>

    <section name="CUST_ACCT_PAYMENT_HEADER">
      <row style="STRONGUNDERLINE">
        <field text="_layawayReceiptPayment" />
        <field text="_layawayReceiptAmount" loc="-3" />
      </row>
    </section>

    <section name="A_SCHEDULED_PAYMENT">
      <row>
        <field text="_date" />
        <sp />
        <field method="getDueDate" formatter="DateShort" />
        <field text="_amt" loc="-18" />
        <field method="getSuggestedPaymentAmount" formatter="Money" loc="-10" />
      </row>
    </section>

    <section name="LAYAWAY_TERMS">
      <row />
      <sectionref>LAYAWAY_TERMS_DB</sectionref>
      <row />
    </section>

    <section name="LAYAWAY_PAYMENT_SCHEDULE">
      <condition class="dtv.pos.docbuilding.conditions.TenderLineItemStatusCodeNotExistsCondition" value="REFUND" />
      <condition method="getAccount.getAccountBalance" comparison="GREATER_THAN_ZERO" />
      <row>
        <field text="_layawayReceiptPaymentSchedule" style="BOLD" />
      </row>
      <horizontal_rule />
      <iterator method="getPaymentSchedule">
        <sectionref>A_SCHEDULED_PAYMENT</sectionref>
      </iterator>
      <row />
    </section>

    <section name="CUST_ACCT_ID_BARCODE">
      <barcode symbology="Code 93">
        <field method="getAccount.getCustAccountId" />
      </barcode>
    </section>

    <section name="WORK_ORDER_ACCT_ID_BARCODE">
      <barcode symbology="Code 93">
        <field method="getWorkOrderAccount.getCustAccountId" />
      </barcode>
    </section>

    <section name="LAYAWAY_ITEMS">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.pos.customer.account.AccountMaintEditModel" />
      <iterator method="getAccount.getCustItemAccountDetails">
        <condition class="dtv.pos.docbuilding.conditions.ValidLayawayLineCondition" />
        <sectionref>layaway_item</sectionref>
      </iterator>
    </section>

    <section name="CUST_ACCT_ITEMS_TOTALS">
      <horizontal_rule style="Double" />
      <row />
    </section>

    <section name="LAYAWAY_SUMMARY">
      <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED" inverted="true" />
      <horizontal_rule />
      <row>
        <field text="_layawayReceiptLayawayTotal" loc="-14" />
        <field method="getAccount.getAccountTotal" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_layawayReceiptDeposit" loc="-14" />
        <field method="getAccount.getAccountPayments" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_layawayReceiptBalancedue" loc="-14" />
        <field method="getAccount.getAccountBalance" formatter="Money" loc="-3" />
      </row>
      <horizontal_rule style="Double" />
    </section>

    <section name="LAYAWAY_CANCEL_SUMMARY">
      <condition class="dtv.pos.docbuilding.conditions.CustomerAccountStatusCondition" value="CLOSED" />
      <horizontal_rule />
      <row>
        <field text="_layawayReceiptLayawayTotal" loc="-14" />
        <field method="getAccount.getAccountTotal" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_rcptCancelledLayaway" loc="-14" />
        <field method="getAccount.getAccountTotal.negate" formatter="Money" loc="-3" />
      </row>
      <row>
        <field text="_layawayReceiptDeposit" loc="-14" />
        <field method="getAccount.getAccountPayments.negate" formatter="Money" loc="-3" />
      </row>
      <sectionref>LAYAWAY_RESTOCKING_FEE</sectionref>
      <row>
        <field text="_layawayReceiptBalancedue" loc="-14" />
        <field method="getAccount.getAccountBalance.negate" formatter="Money" loc="-3" />
      </row>
    </section>

    <section name="LAYAWAY_RESTOCKING_FEE">
      <condition class="dtv.pos.customer.account.RestockingFeeAppliedCondition" feeType="LAYAWAY_RESTOCKING_FEE" />
      <row>
        <field text="_rcptRestockingFee" loc="-14" />
        <field formatter="Money" loc="-3">
          <aggregate class="dtv.pos.customer.account.RestockingFeeAmountDocBuilderField" />
          <Parameter name="feeType" value="LAYAWAY_RESTOCKING_FEE" />
        </field>
      </row>
    </section>

    <section name="LAYAWAY_ID_BANNER">
      <row align="C" charsize="X2HW">
        <field text="_layawayReceiptLayawayId" style="BOLD" />
      </row>
      <row align="C" charsize="X2HW">
        <field method="getAccount.getCustAccountId" style="BOLD" />
      </row>
      <row />
    </section>

    <section name="CUST_ACCT_SIGNATURE">
      <row n="6" />
      <sectionref>signature_line</sectionref>
      <row>
        <field method="getAccount.getParty" formatter="BasicName" />
      </row>
    </section>

    <section name="layaway_item">
      <row>
        <field method="getDescription" style="BOLD" />
      </row>
      <row>
        <field method="getItemId" />
        <field method="getQuantity" formatter="Quantity" align="R" loc="14" />
        <field method="getRetailLineItem.getPreDealAmount" formatter="Money" align="R" loc="-15" />
        <field method="getExtendedAmount" formatter="Money" align="R" loc="-3" />
        <field loc="-1">
          <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" />
        </field>
      </row>
      <sectionref>cust_detail_kit_components</sectionref>
      <sectionref>layaway_item_serial_number</sectionref>
      <sectionref>cust_acct_item_inventory_locations</sectionref>
      <sectionref>item_discounts</sectionref>
      <sectionref>layaway_pickup_status</sectionref>
      <sectionref>cust_acct_item_comments</sectionref>
    </section>

    <section name="configurableCustAcct_item">
      <row>
        <field method="getDescription" style="BOLD" />
      </row>
      <row>
        <field method="getItemId" />
        <field method="getQuantity" formatter="Quantity" align="R" loc="14" />
        <field method="getRetailLineItem.getPreDealAmount" formatter="Money" align="R" loc="-15" />
        <field method="getExtendedAmount" formatter="Money" align="R" loc="-3" />
        <field loc="-1">
          <aggregate class="dtv.pos.register.tax.TaxFlagDocBuilderField" />
        </field>
      </row>
      <sectionref>cust_detail_kit_components</sectionref>
      <sectionref>configurableCustAcct_item_serial_number</sectionref>
      <sectionref>cust_acct_item_inventory_locations</sectionref>
      <sectionref>item_discounts</sectionref>
      <sectionref>configurableCustAcct_pickup_status</sectionref>
      <sectionref>cust_acct_item_comments</sectionref>
    </section>

    <section name="layaway_item_serial_number">
      <condition class="dtv.pos.docbuilding.conditions.LayawayItemContainsSerialNbrCondition" />
      <row>
        <condition class="dtv.pos.docbuilding.conditions.LayawayNonPhysicalLineItemTypeCondition" value="VOUCHER" inverted="true" />
        <field method="getSerialNumber.trim" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.LayawayNonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <field method="getSerialNumber.trim" formatter="VoucherNumber" />
      </row>
    </section>

    <section name="configurableCustAcct_item_serial_number">
      <condition class="dtv.pos.docbuilding.conditions.ConfigurableCustAcctItemContainsSerialNbrCondition" />
      <row>
        <condition class="dtv.pos.docbuilding.conditions.ConfigurableCustAcctNonPhysicalLineItemTypeCondition" value="VOUCHER" inverted="true" />
        <field method="getSerialNumber.trim" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.ConfigurableCustAcctNonPhysicalLineItemTypeCondition" value="VOUCHER" />
        <field method="getSerialNumber.trim" formatter="VoucherNumber" />
      </row>
    </section>

    <section name="layaway_info">
      <condition class="dtv.pos.docbuilding.conditions.ContainsCustAccountModCondition" value="LAYAWAY" />
      <row>
        <field text="_layawayIdColon" style="BOLD" />
        <sp />
        <field method="getCustomerAccountModifier.getCustAccountId" />
      </row>
      <row>
        <field text="_layawayPrice" style="BOLD" />
        <sp />
        <field method="getCustomerAccountModifier.getItemAccountExtendedPrice" formatter="Money" />
      </row>
    </section>

    <section name="layaway_pickup_status">
      <condition class="dtv.pos.docbuilding.conditions.CustItemAcctDetailStateCondition" value="PICKUP" />
      <row>
        <field text="_layawayPickupStatus" style="BOLD" />
      </row>
    </section>

    <section name="configurableCustAcct_pickup_status">
      <condition class="dtv.pos.docbuilding.conditions.CustItemAcctDetailStateCondition" value="PICKUP" />
      <row>
        <field text="_configurableCustAcctReceiptPickupStatus" style="BOLD" />
      </row>
    </section>

    <section name="TRAINING_MODE_ENTRY">
      <sectionref>headerTop</sectionref>
      <row n="2" />
      <row>
        <field text="_trainingmodeReceiptEnterLabel" style="BOLD" />
      </row>
      <row n="2" />
      <sectionref>footer</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="TRAINING_MODE_EXIT">
      <sectionref>headerTop</sectionref>
      <row n="2" />
      <row>
        <field text="_trainingmodeReceiptExitLabel" style="BOLD" />
      </row>
      <row n="2" />
      <sectionref>footer</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="BALANCE_INQUIRY">
      <!-- Target: dtv.pos.tender.voucher.VoucherBalanceInfo -->
      <sectionref>logo</sectionref>
      <row align="C" charsize="X2HW">
        <field text="_BI_rcptHeader" />
      </row>
      <horizontal_rule />
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row />
      <row>
        <field text="_BI_date" loc="3" />
        <sp />
        <field method="getInquiryDateTime" formatter="DateShort" />
      </row>
      <row>
        <field text="_BI_time" loc="3" />
        <sp />
        <field method="getInquiryDateTime" formatter="TimeShort" />
      </row>
      <row>
        <field text="_BI_acctNumber" loc="3" />
        <sp />
        <field method="getSerialNumber" formatter="VoucherNumber" />
      </row>
      <row>
        <condition method="getTraceNumber" comparison="NOT_NULL" />
        <field text="_traceNumber" loc="3" />
        <sp />
        <field method="getTraceNumber" />
      </row>
      <row>
        <field text="_BI_balance" loc="3" />
        <sp />
        <field method="getBalance" formatter="Money" />
      </row>
      <sectionref>page_break</sectionref>
    </section>

    <section name="TIMECARD_ACCEPTANCE_FORM">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location</sectionref>
      <horizontal_rule />
      <sectionref>transaction_header_info</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row />
      <sectionref>system_mode</sectionref>
      <row align="C">
        <field text="_timecardacceptanceform" style="BOLD" />
      </row>
      <horizontal_rule />
      <row />
      <row>
        <field text="_timecardacceptanceformEntry" loc="10" />
      </row>
      <row>
        <field text="_timecardManagerId" loc="10" />
        <sp />
        <field>
          <aggregate class="dtv.pos.timeclock.timecard.TimeEntryManagerIdDocBuilderField" />
        </field>
      </row>
      <call method="getTimecardJournal">
        <row>
          <field text="_timecardEmployeeId" loc="10" />
          <sp />
          <field>
            <aggregate class="dtv.pos.timeclock.timecard.TimeEntryEmpIdDocBuilderField" />
          </field>
        </row>
        <row>
          <field text="_timecardEmployeeName" loc="10" />
        </row>
        <row>
          <field loc="10">
            <aggregate class="dtv.pos.timeclock.timecard.TimeEntryEmpNameDocBuilderField" />
          </field>
        </row>
        <row />
        <row>
          <field method="getDeleteFormattable" loc="10" />
        </row>
        <row>
          <field text="_timecardacceptanceformDate" loc="10" />
          <sp />
          <field method="getClockInDateTime" formatter="DateShort" />
        </row>
        <row>
          <field text="_timecardacceptanceformWorkCode" loc="10" />
          <sp />
          <field method="getWorkCode.getWorkCode" />
        </row>
        <row>
          <field text="_timecardacceptanceformClockIn" loc="10" />
          <sp />
          <field method="getClockInDateTime" formatter="TimeShort" />
        </row>
        <row>
          <field text="_timecardacceptanceformClockOut" loc="10" />
          <sp />
          <field method="getClockOutDateTime" formatter="TimeShort" />
        </row>
      </call>
      <row />
      <iterator method="getTransactionNotes">
        <row>
          <field text="_comments" loc="10" />
        </row>
        <region left_margin="2" right_margin="2">
          <field method="getNote" />
        </region>
      </iterator>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_employeesignature" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row>
        <field text="_managersignature" />
      </row>
      <sectionref>page_break</sectionref>
    </section>

    <section name="EMPLOYEE_SCHEDULE_SECTION">
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row align="C">
        <field method="getUser.getOperatorParty.getFirstName" />
        <sp />
        <field method="getUser.getOperatorParty.getLastName" />
        <sp n="3" />
        <field method="getUser.getEmployeeId" />
      </row>
      <row align="C">
        <field method="getModel.getStartDate" style="BOLD" formatter="DateShort" />
        <field text=" - " />
        <field method="getModel.getEndDate" style="BOLD" formatter="DateShort" />
      </row>
      <horizontal_rule style="Strong" />
      <iterator method="getSchedule">
        <sectionref>schedule</sectionref>
        <sectionref>scheduleDetail</sectionref>
      </iterator>
      <horizontal_rule style="Strong" />
      <row />
      <region align="C">
        <field text="_empScheduleTerms" />
      </region>
      <sectionref>page_break</sectionref>
    </section>

    <section name="schedule">
      <row>
        <field method="getStartTime" formatter="DayOfWeek" />
        <sp />
        <field method="getStartTime" formatter="DateShort" />
        <sp />
      </row>
    </section>

    <section name="scheduleDetail">
      <row>
        <condition method="getEndTime" comparison="NOT_NULL" />
        <field method="getStartTime" style="BOLD" formatter="TimeShort" />
        <field text=" - " style="BOLD" />
        <field method="getEndTime" style="BOLD" formatter="TimeShort" />
        <sp />
        <field method="getWorkCode" />
      </row>
    </section>
    <!-- Warranty -->
    <section name="WARRANTY_LINE">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IWarrantyLineItem" />
      <sectionref>WARRANTY_LINE_CUSTOMER</sectionref>
      <sectionref>WARRANTY_LINE_DETAIL</sectionref>
    </section>

    <section name="WARRANTY_COVERAGE_DETAIL">
      <iterator method="getWarrantyModifiers">
        <row>
          <field text="_warrantyNbrLabel" loc="4" />
          <sp />
          <field method="getWarrantyNbr" />
        </row>
      </iterator>
    </section>

    <section name="WARRANTY_LINE_DETAIL">
      <condition class="dtv.pos.warranty.conditions.AnyCoveredItemInTransCondition" inverted="true" />
      <sectionref>WARRANTY_COVERAGE_DETAIL</sectionref>
    </section>

    <section name="WARRANTY_LINE_CUSTOMER">
      <condition class="dtv.pos.warranty.conditions.AnyWarrantyCustomerCondition" />
      <row>
        <field text="_rcptCustomerLabel" loc="4" />
        <sp />
        <field>
          <aggregate class="dtv.pos.warranty.WarrantyCustomerNameDocBuilderField" />
        </field>
      </row>
    </section>

    <section name="WARRANTY_COVERAGE">
      <iterator method="getLineItemAssociationModifiers">
        <call method="getChildLineItem">
          <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IWarrantyLineItem" />
          <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
          <sectionref>WARRANTY_COVERAGE_DETAIL</sectionref>
        </call>
      </iterator>
    </section>

    <section name="GENERIC_REBATE_RECEIPT">
      <iterator method="getLineItemsByTypeCode" method_param="DOCUMENT">
        <sectionref>REBATE_RECEIPT_CONTENT</sectionref>
      </iterator>
    </section>

    <section name="REBATE_RECEIPT_CONTENT">
      <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
      <condition class="dtv.pos.docbuilding.conditions.DocumentTypeCondition" value="ISSUED" />
      <condition class="dtv.pos.docbuilding.conditions.DocumentReceiptTypeCondition" value="GENERIC_REBATE_RECEIPT" />
      <call method="getParentTransaction">
        <sectionref>header</sectionref>
      </call>
      <textblock dateMethod="getTransactionDate">
        <code dtype="DocBuilderField" method="getDocument.getDocumentDefinition.getTextCodeValue" />
        <subcode dtype="DocBuilderField" text="1" />
      </textblock>
      <sectionref>page_break</sectionref>
    </section>

    <section name="GENERIC_REBATE_SEGMENT">
      <iterator method="getLineItemsByTypeCode" method_param="DOCUMENT">
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.DocumentTypeCondition" value="ISSUED" />
        <condition class="dtv.pos.docbuilding.conditions.DocumentSegmentTypeCondition" value="GENERIC_REBATE_SEGMENT" />
        <textblock dateMethod="getTransactionDate">
          <code dtype="DocBuilderField" method="getDocument.getDocumentDefinition.getTextCodeValue" />
          <subcode dtype="DocBuilderField" text="1" />
        </textblock>
      </iterator>
    </section>

    <section name="VALIDATE_CLOCKOUT">
      <call method="getTransaction">
        <sectionref>header</sectionref>
      </call>
      <row />
      <row>
        <field text="_rptTimeCardEmployee" />
        <sp />
        <field method="getEmployeeId" />
        <sp />
        <field text="_openBracket" />
        <field method="getEmployeeName" />
        <field text="_closeBracket" />
      </row>
      <row />
      <row>
        <field text="_rptTimeCardEmployeeEntryFor" style="BOLD" />
        <sp />
        <field method="getCurrentBusinessDate" style="BOLD" formatter="DateShort" />
      </row>
      <row />
      <sectionref>system_mode</sectionref>
      <row style="STRONGUNDERLINE">
        <field text="_rptTimeCardWorkCode" />
        <field text="_rptTimeCardStartTime" loc="12" />
        <field text="_rptTimeCardEndTime" loc="-14" />
        <field text="_rptTimeCardTotalHours" loc="-2" />
      </row>
      <iterator method="getDailyTimecardEntries">
        <row>
          <field method="getTimecardEntry.getWorkCode.getWorkCode" />
          <field method="getTimecardEntry.getClockInDateTime" formatter="TimeShort" loc="11" />
          <field method="getTimecardEntry.getClockOutDateTime" formatter="TimeShort" loc="-12" />
          <field method="getTotalHours" formatter="Hours" loc="-2" />
          <sp />
          <field method="getTimecardIndicator" />
        </row>
      </iterator>
      <row>
        <condition method="getDailyTimecardEntries" comparison="NOT_NULL" />
        <field style="UNDERLINE" text="      " loc="-2" />
      </row>
      <row>
        <condition method="getDailyTimecardEntries" comparison="NOT_NULL" />
        <field text="_rptTimeCardDailyTotal" loc="-14" />
        <field method="getDailyTotalHours" formatter="Hours" loc="-2" />
      </row>
      <row />
      <row>
        <field text="_rptTimeCardWorkCodeDescription" style="BOLD" />
      </row>
      <iterator method="getWorkCodes">
        <row>
          <field method="getWorkCode" />
          <field text=" - " />
          <field method="getDescription" />
        </row>
      </iterator>
      <row />
      <row>
        <field text="_rptTimeCardWeekToDateSummary" style="BOLD" />
      </row>
      <iterator method="getWeeklyEntries">
        <row>
          <field method="getTimecardDate" formatter="DateShort" />
          <field method="getDailyHrs" formatter="Hours" loc="-2" />
        </row>
      </iterator>
      <row>
        <condition method="getWeeklyEntries" comparison="NOT_NULL" />
        <field style="UNDERLINE" text="      " loc="-2" />
      </row>
      <row>
        <condition method="getWeeklyEntries" comparison="NOT_NULL" />
        <field text="_rptTimeCardWeekTotal" loc="-14" />
        <field method="getTotalWeeklyHours" formatter="Hours" loc="-2" />
      </row>
      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="WARRANTY_RECEIPT">
      <iterator method="getLineItemsByTypeCode" method_param="ITEM">
        <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IWarrantyLineItem" />
        <condition class="dtv.pos.docbuilding.conditions.VoidedLineCondition" />
        <condition class="dtv.pos.docbuilding.conditions.NotReturnCondition" />
        <condition class="dtv.pos.docbuilding.conditions.LineIsFinalCondition" />
        <iterator method="getWarrantyModifiers">
          <condition method="getWarrantyTypeCode" comparison="EQUAL" value="WARRANTY" />
          <sectionref>WARRANTY_RECEIPT_HEADER</sectionref>
          <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
          <call impl="dtv.pos.warranty.WarrantyCall">
            <sectionref>WARRANTY_RECEIPT_CONTENT</sectionref>
          </call>
        </iterator>
      </iterator>
    </section>

    <section name="WARRANTY_RECEIPT_CONTENT">
      <sectionref>system_mode</sectionref>
      <sectionref>WARRANTY_RECEIPT_CUSTOMER</sectionref>
      <sectionref>WARRANTY_RECEIPT_PLAN_DETAIL</sectionref>
      <sectionref>WARRANTY_RECEIPT_INTRO</sectionref>
      <sectionref>WARRANTY_RECEIPT_COVERED</sectionref>
      <sectionref>WARRANTY_RECEIPT_NOT_COVERED</sectionref>
      <sectionref>WARRANTY_RECEIPT_VALID</sectionref>
      <sectionref>WARRANTY_RECEIPT_INSTRUCTIONS</sectionref>
      <sectionref>warranty_receipt_barcode</sectionref>

      <sectionref>system_mode</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="WARRANTY_RECEIPT_HEADER">
      <sectionref>logo</sectionref>
      <call method="getParentLine.getParentTransaction.getRetailLocationIdObject" impl="dtv.pos.docbuilding.RetailLocationLookupCall">
        <row />
        <row align="C">
          <field method="getStoreName" />
        </row>
        <region alignment="C" left_margin="1">
          <field method="." formatter="BasicAddress" />
        </region>
        <row align="C">
          <condition method="getTelephone1" comparison="NOT_BLANK" />
          <field method="getTelephone1" formatter="Phone" />
        </row>
      </call>
      <row />
      <sectionref>system_mode</sectionref>
      <row />
      <call impl="dtv.pos.warranty.WarrantyCall">
        <textblock dateMethod="getUpdateDate">
          <code dtype="DocBuilderField" text="WARRANTY_NAME" />
          <subcode dtype="DocBuilderField" method="getWarrantyItem.getNonPhysicalItemSubtype" />
        </textblock>
      </call>
      <row />
      <horizontal_rule />
      <call method="getParentLine.getParentTransaction">
        <sectionref>transaction_header_info</sectionref>
      </call>
      <row />
      <row>
        <field text="_rptWarrantyId" />
        <field text=": " />
        <field method="getWarrantyNbr" />
      </row>
      <row />
    </section>

    <section name="WARRANTY_RECEIPT_CUSTOMER">
      <call method="getCustomer">
        <row>
          <field text="_commonCustInfo" />
          <field text=":" />
        </row>
        <row>
          <field loc="2" method="." formatter="BasicName" />
        </row>
        <region left_margin="2">
          <field method="getPrimaryLocaleInformation" formatter="BasicAddress" />
        </region>
        <row>
          <field text="_rptWarrantyHomePhone" />
          <field text=": " />
          <field method="getTelephone1" formatter="Phone" />
        </row>
        <row>
          <field text="_rptWarrantyBusinessPhone" />
          <field text=": " />
          <field method="getTelephone2" formatter="Phone" />
        </row>
      </call>
      <row />
    </section>

    <section name="WARRANTY_RECEIPT_PLAN_DETAIL">
      <row>
        <field text="_rptWarrantyCoverItemId" />
        <field text=": " />
        <field method="getCoveredItemId" />
        <sp />
        <sp />
      </row>
      <row>
        <field text="_commonDescription" />
        <field text=": " />
        <field method="getCoveredItem.getDescription" formatter="ItemDescriptionLength" />
      </row>
      <row />
      <row>
        <field text="_rptWarrantyPurchaseDate" />
        <field text=": " />
        <field method="getWarrantyIssueDate" formatter="DateMedium" />
      </row>
      <row />
    </section>

    <section name="WARRANTY_RECEIPT_INTRO">
      <textblock dateMethod="getUpdateDate">
        <code dtype="DocBuilderField" text="WARRANTY_INTRO" />
        <subcode dtype="DocBuilderField" method="getWarrantyItem.getNonPhysicalItemSubtype" />
      </textblock>
    </section>

    <section name="WARRANTY_RECEIPT_COVERED">
      <textblock dateMethod="getUpdateDate">
        <code dtype="DocBuilderField" text="WARRANTY_COVER" />
        <subcode dtype="DocBuilderField" method="getWarrantyItem.getNonPhysicalItemSubtype" />
      </textblock>
    </section>

    <section name="WARRANTY_RECEIPT_NOT_COVERED">
      <textblock dateMethod="getUpdateDate">
        <code dtype="DocBuilderField" text="WARRANTY_NOT_COVER" />
        <subcode dtype="DocBuilderField" method="getWarrantyItem.getNonPhysicalItemSubtype" />
      </textblock>
    </section>

    <section name="WARRANTY_RECEIPT_VALID">
      <textblock dateMethod="getUpdateDate">
        <code dtype="DocBuilderField" text="WARRANTY_VALID" />
        <subcode dtype="DocBuilderField" method="getWarrantyItem.getNonPhysicalItemSubtype" />
      </textblock>
    </section>

    <section name="WARRANTY_RECEIPT_INSTRUCTIONS">
      <textblock dateMethod="getUpdateDate">
        <code dtype="DocBuilderField" text="WARRANTY_INSTRUCTION" />
        <subcode dtype="DocBuilderField" method="getWarrantyItem.getNonPhysicalItemSubtype" />
      </textblock>
    </section>

    <section name="warranty_receipt_barcode">
      <barcode symbology="Code 93">
        <field method="getWarrantyNbr" />
      </barcode>
    </section>

    <section name="INVENTORY_LOCATION_SUMMARY_COUNT">
      <sectionref>inventory_location_summary_count_header</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row>
        <field text="_invSumCountRcptLabelHeader" />
        <field text="_invSumCountRcptCountHeader" loc="-1" />
      </row>
      <horizontal_rule />
      <iterator method="getInventorySummaryCountTransactionDetails">
        <sectionref>inv_summary_count_detail</sectionref>
      </iterator>
      <row />
      <row>
        <field text="_invSumCountRcptEmployeeSign" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row n="2" />
      <row>
        <field text="_invSumCountRcptManagerSign" />
      </row>
      <row n="2" />
      <sectionref>signature_line</sectionref>
      <row />
      <sectionref>page_break</sectionref>
    </section>

    <section name="inv_summary_count_detail">
      <row>
        <field method="getLocationId" />
        <field text="/" />
        <field method="getBucketId" />
      </row>
      <row>
        <field text="_invSumCountRcptDeclared" loc="3" />
        <field method="getDeclaredCount" formatter="Quantity" loc="-2" />
      </row>
      <row>
        <field text="_invSumCountRcptSystem" loc="3" />
        <field method="getSystemCount" formatter="Quantity" loc="-2" />
      </row>
      <row>
        <field text="_invSumCountRcptDifference" loc="3" />
        <sp />
        <field formatter="Quantity" loc="-1">
          <aggregate class="dtv.pos.inventory.count.summary.InvSummaryCountDifferenceField" />
        </field>
      </row>
    </section>

    <section name="inventory_location_summary_count_header">
      <sectionref>logo</sectionref>
      <sectionref>transaction_store_location</sectionref>
      <horizontal_rule />
      <sectionref>transaction_header_info</sectionref>
      <row>
        <condition method="getOperatorParty.getEmployeeId" comparison="NOT_NULL" />
        <field text="_cashier" />
        <sp />
        <field method="getOperatorParty.getEmployeeId" />
      </row>
      <row />
      <sectionref>system_mode</sectionref>
    </section>

    <section name="item_inventory_locations">
      <condition class="dtv.pos.inventory.PrintInventoryLocationsCondition" />
      <iterator method="getRetailInventoryLocationModifiers">
        <row>
          <field method="getSourceLocationId" loc="4" />
          <field text="/" />
          <field method="getSourceBucketId" />
        </row>
      </iterator>
    </section>

    <section name="cust_acct_item_inventory_locations">
      <call method="getRetailLineItem">
        <condition class="dtv.pos.inventory.PrintInventoryLocationsCondition" />
        <iterator method="getRetailInventoryLocationModifiers">
          <row>
            <field method="getSourceLocationId" loc="1" />
            <field text="/" />
            <field method="getSourceBucketId" />
          </row>
        </iterator>
      </call>
    </section>

    <section name="till_summary_header">
      <!-- Target: dtv.pos.till.TillSummaryBean -->
      <row>
        <field text="_store" />
        <sp />
        <field method="getRetailLocationId" />
        <field text="_register" loc="22" />
        <sp />
        <field method="getRegisterId" />
      </row>
      <row>
        <field text="_date" />
        <sp />
        <field method="getCurrentTime" formatter="DateShort" />
        <field text="_trantime" loc="22" />
        <sp />
        <field method="getCurrentTime" formatter="TimeShort" />
      </row>
      <row>
        <field text="_cashier" />
        <sp />
        <field method="getAssocId" />
        <field text="_tillId" loc="22" />
        <sp />
        <field method="getRegisterId" />
      </row>
    </section>

    <section name="TillSummary">
      <sectionref>till_summary_header</sectionref>
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <row />
      <row>
        <field text="_tillId" />
        <sp />
        <field method="getTillCountReferenceData.getTenderRepositoryId" />
      </row>
      <row />
      <row align="C">
        <field text="_tillSummaryReceipt" style="BOLD" />
      </row>
      <row />
      <row>
        <field text="_tender" style="BOLD" />
        <field text="_qty" style="BOLD" loc="-15" />
        <field text="_total" style="BOLD" loc="-1" />
      </row>
      <iterator method="getDepositTenderCountSummaryItemList">
        <sectionref>TillSummaryTenders</sectionref>
      </iterator>
      <horizontal_rule style="-" />
      <row>
        <field text="_tillAuditRcptTotalCash" style="BOLD" />
        <field method="getDepositTendersTotalAmount" style="BOLD" formatter="Money" loc="-1" />
      </row>
      <row />
      <row>
        <condition method="getTillSummaryChecksList" comparison="NOT_NULL" />
        <field text="_tillAuditRcptCheckNumber" style="BOLD" loc="5" />
        <field text="_tillAuditRcptTransId" style="BOLD" loc="-15" />
        <field text="_amount" style="BOLD" loc="-1" />
      </row>
      <iterator method="getTillSummaryChecksList">
        <sectionref>TillSummaryChecks</sectionref>
      </iterator>
      <horizontal_rule style="-" />
      <row />
      <iterator method="getNonDepositTenderCountSummaryItemList">
        <sectionref>TillSummaryTenders</sectionref>
      </iterator>
      <horizontal_rule style="-" />
      <row>
        <field text="_tillAuditRcptTotalTender" style="BOLD" />
        <field method="getAllTendersTotalAmount" style="BOLD" formatter="Money" loc="-1" />
      </row>
      <sectionref>till_summary_gross_sales</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="TillSummaryTenders">
      <row>
        <field method="getDescription" formatter="TenderDescriptionLength" />
        <field method="getTotalSystemCount" loc="-15" />
        <field method="getTotalSystemAmount" formatter="Money" loc="-1" />
      </row>
    </section>

    <section name="TillSummaryChecks">
      <row>
        <field method="getCheckNumber" loc="8" />
        <field method="getTransId" loc="-15" />
        <field method="getAmount" formatter="Money" loc="-1" />
      </row>
    </section>

    <section name="till_summary_gross_sales">
      <row>
        <field text="_tillAuditRcptGrossSales" style="BOLD" />
      </row>
      <row>
        <field text="_tillAuditRcptGiftcardSold" loc="2" />
        <field method="getGiftCardSoldQty" loc="-15" />
        <field method="getGiftCardSoldTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptGiftcardRefd" loc="2" />
        <field method="getGiftCardRefundedQty" loc="-15" />
        <field method="getGiftCardRefundedTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptLayawaySetup" loc="2" />
        <field method="getLayawaySetupQty" loc="-15" />
        <field method="getLayawaySetupTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptLayawayPayment" loc="2" />
        <field method="getLayawayPaymentQty" loc="-15" />
        <field method="getLayawayPaymentTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptLayawayRefund" loc="2" />
        <field method="getLayawayRefundedQty" loc="-15" />
        <field method="getLayawayRefundedTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptSpecOrderSetup" loc="2" />
        <field method="getSOSetupQty" loc="-15" />
        <field method="getSOSetupTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptSpecOrderPayment" loc="2" />
        <field method="getSOPaymentQty" loc="-15" />
        <field method="getSOPaymentTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptSpecOrderRefunded" loc="2" />
        <field method="getSORefundedQty" loc="-15" />
        <field method="getSORefundedTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptSpecOrderPickup" loc="2" />
        <field method="getSOPickupQty" loc="-15" />
        <field method="getSOPickupTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptPaidIn" loc="2" />
        <field method="getPaidInQty" loc="-15" />
        <field method="getPaidInTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptPaidOut" loc="2" />
        <field method="getPaidOutQty" loc="-15" />
        <field method="getPaidOutTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptNonMdseIn" loc="2" />
        <field method="getNonMdseInQty" loc="-15" />
        <field method="getNonMdseInTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptNonMdseOut" loc="2" />
        <field method="getNonMdseOutQty" loc="-15" />
        <field method="getNonMdseOutTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptDiscounts" loc="2" />
        <field method="getDiscountsQty" loc="-15" />
        <field method="getDiscountsTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptRefunds" loc="2" />
        <field method="getRefundsQty" loc="-15" />
        <field method="getRefundsTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptNosales" loc="2" />
        <field method="getNoSalesQty" loc="-15" />
      </row>
      <row>
        <field text="_tillAuditRcptVoids" loc="2" />
        <field method="getVoidsQty" loc="-15" />
      </row>
      <row>
        <field text="_tillAuditRcptExcisetax" />
        <field method="getExciseTaxTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptAltTax" />
        <field method="getAltTaxTotal" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptPrimaryTax" />
        <field method="getPrimaryTaxTotalForDisplay" formatter="Money" loc="-1" />
      </row>
      <horizontal_rule style="-" />
      <row>
        <field text="_tillAuditRcptTotalTax" style="BOLD" />
        <field method="getTotalTaxNegated" formatter="Money" loc="-1" />
      </row>
      <row>
        <field text="_tillAuditRcptNetSales" />
        <field method="getNetSales" formatter="Money" loc="-1" />
      </row>
    </section>

    <section name="roomcharge_tender">
      <condition class="dtv.pos.docbuilding.conditions.TenderIdCondition" tenderId="ROOM_CHARGE" />
      <row>
        <field method="getTender.getDescription" />
        <field method="getAmount" formatter="Money" loc="-3" />
      </row>
    </section>

    <section name="storecopy_roomcharge_tender">
      <condition class="dtv.pos.docbuilding.conditions.TenderIdCondition" tenderId="ROOM_CHARGE" />
      <sectionref>roomcharge_tender</sectionref>
      <sectionref>storecopy_roomcharge_signature</sectionref>
    </section>

    <section name="storecopy_roomcharge_signature">
      <condition method="getSignature.getSignature" comparison="IS_NULL" />
      <sectionref>signature_line_name</sectionref>
      <sectionref>signature_line_signature</sectionref>
      <sectionref>signature_line_room</sectionref>
    </section>

    <section name="signature_line_name">
      <row n="2" />
      <horizontal_rule style="Strong">
        <field text="_custName" />
      </horizontal_rule>
    </section>

    <section name="signature_line_signature">
      <row n="2" />
      <horizontal_rule style="Strong">
        <field text="_custSignature" />
      </horizontal_rule>
    </section>

    <section name="signature_line_room">
      <row n="2" />
      <horizontal_rule style="Strong">
        <field text="_roomNbr" />
      </horizontal_rule>
    </section>

    <section name="RainCheck">
      <sectionref>header</sectionref>
      <row align="C" charsize="X2HW">
        <field method="getTransactionTypeCode" formatter="TranType" />
      </row>
      <row />
      <row align="L">
        <field text="_itemId" />
        <field text=": " />
        <field method="getRainCheck.getItemId" />
      </row>
      <row align="L">
        <field method="getRainCheck.getItemDescription" formatter="ItemDescriptionLength" />
      </row>
      <row align="L">
        <field text="_price" />
        <field text=": " />
        <field method="getRainCheck.getSalePrice" formatter="MONEY" />
      </row>
      <sectionref>raincheck_expiration_date</sectionref>
      <sectionref>raincheck_qty_limit</sectionref>
      <row />
      <sectionref>raincheck_barcode</sectionref>
      <sectionref>system_mode</sectionref>
      <sectionref>RAIN_CHECK_TERMS</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="raincheck_expiration_date">
      <condition method="getRainCheck.getExpirationBusinessDate" comparison="NOT_NULL" />
      <row align="L">
        <field text="_receiptRainCheckExpirationDate" />
        <field text=": " />
        <field method="getRainCheck.getExpirationBusinessDate" formatter="DateShort" />
      </row>
    </section>

    <section name="raincheck_qty_limit">
      <condition method="getRainCheck.getQuantityLimit" comparison="GREATER_THAN_ZERO" />
      <row align="L">
        <field text="_receiptRainCheckQuantityLimit" />
        <field text=": " />
        <field method="getRainCheck.getQuantityLimit" />
      </row>
    </section>
    <section name="raincheck_barcode">
      <barcode symbology="Code 93">
        <field method="getRainCheck.getRainCheckId" />
      </barcode>
    </section>
    <section name="RAIN_CHECK_TERMS">
      <row />
      <sectionref>RAIN_CHECK_TERMS_DB</sectionref>
      <row />
    </section>

    <section name="CUSTOMER_INFO">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <sectionref>CUSTOMER_DETAILS</sectionref>
      <sectionref>LOYALTY_INFO</sectionref>
      <sectionref>LOCAL.CUSTOMER_INFO</sectionref>
    </section>

    <section name="CUSTOMER_DETAILS">
      <condition method="getCustomerParty" comparison="NOT_NULL" />
      <row>
        <field text="_rcptCustomerLabel" />
        <sp />
        <field method="getCustomerParty" formatter="BasicName" />
      </row>
      <row>
        <condition method="getCustomerParty.getOrganizationName" comparison="NOT_NULL" />
        <field text="_rcptCompanyLabel" />
        <sp />
        <field method="getCustomerParty.getOrganizationName" />
      </row>
      <row>
        <condition class="dtv.pos.docbuilding.conditions.EmployeeSaleCondition" />
        <field text="_rcptEmployeeLabel" />
        <sp />
        <field method="getCustomerParty.getEmployeeId" />
      </row>
    </section>

    <section name="INVALID_LOYALTY_CARD">
      <condition class="dtv.pos.customer.loyalty.InvalidLoyaltyCardCondition" />
      <row />
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <row />
      <region align="C" left_margin="2" right_margin="2">
        <field text="_loyaltyCardInvalidMsg" />
      </region>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
    </section>

    <section name="LOYALTY_BALANCE_INQUIRY">
      <sectionref>logo</sectionref>
      <row align="C" charsize="X2HW">
        <field text="_BI_rcptHeader" />
      </row>
      <horizontal_rule />
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <sectionref>INVALID_LOYALTY_CARD</sectionref>
      <row />
      <row>
        <field text="_BI_date" loc="3" />
        <sp />
        <field formatter="DateShort">
          <aggregate class="dtv.pos.logbuilder.CurrentTimeDocBuilderField" />
        </field>
      </row>
      <row>
        <field text="_loyaltyCardNumber" loc="3" />
        <sp />
        <field method="getCardNumber" formatter="CREDITCARD" />
      </row>
      <row>
        <condition method="getExpirationDate" comparison="NOT_NULL" />
        <field text="_loyaltyExpiration" loc="3" />
        <sp />
        <field method="getExpirationDate" formatter="DateMedium" />
      </row>
      <row />
      <sectionref>LOYALTY_BALANCE_INQUIRY_ACCT</sectionref>
      <sectionref>INVALID_LOYALTY_CARD</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="LOYALTY_BALANCE_INQUIRY_ACCT">
      <condition method="getPrimaryLoyaltyAccount" comparison="NOT_NULL" />
      <row>
        <field text="_programNameLabel" loc="3" />
        <sp />
        <field method="getPrimaryLoyaltyAccount.getLoyaltyProgramName" />
      </row>
      <row>
        <field text="_programLevelLabel" loc="3" />
        <sp />
        <field method="getPrimaryLoyaltyAccount.getLoyaltyProgramLevelName" />
      </row>
      <row>
        <field text="_loyaltyBalanceLabel" loc="3" />
        <sp />
        <field method="getPrimaryLoyaltyAccount.getAccountBalance" formatter="QUANTITY" />
      </row>
    </section>

    <section name="LOYALTY_INFO">
      <condition class="dtv.pos.docbuilding.conditions.InstanceOfCondition" value="dtv.xst.dao.trl.IRetailTransaction" />
      <condition method="getLoyaltyCardObject" comparison="NOT_NULL" />
      <sectionref>LoyaltyInformationBanner</sectionref>
      <row>
        <field text="_loyaltycardnumberrcpt" loc="4" />
        <sp />
        <field method="getLoyaltyCard" formatter="CREDITCARD" />
      </row>
      <region left_margin="4">
        <condition class="dtv.pos.customer.loyalty.CardShowExpirationDateCondition" />
        <condition class="dtv.pos.customer.loyalty.CardAlmostExpiredCondition" />
        <field>
          <aggregate class="dtv.pos.customer.loyalty.CardAlmostExpiredDocBuilderField" />
        </field>
      </region>
      <sectionref>LOYALTY_INFO_POINTS</sectionref>
      <row />
      <row align="C">
        <field style="BOLD">
          <text dtype="String"><![CDATA[--------------------------------------------]]></text>
        </field>
      </row>
    </section>

    <section name="LOYALTY_INFO_POINTS">
      <condition method="getLoyaltyCardObject.getPrimaryLoyaltyAccount" comparison="NOT_NULL" />
      <call method="getLoyaltyCardObject.getPrimaryLoyaltyAccount">
        <row>
          <condition method="getLoyaltyProgramName" comparison="NOT_NULL" />
          <field text="_programNameLabel" loc="4" />
          <sp />
          <field method="getLoyaltyProgramName" />
        </row>
        <row>
          <condition method="getLoyaltyProgramLevelName" comparison="NOT_NULL" />
          <field text="_programLevelLabel" loc="4" />
          <sp />
          <field method="getLoyaltyProgramLevelName" />
        </row>
        <row>
          <field text="_rcptCrmEscrowPoints" loc="4" />
          <field formatter="QUANTITY" loc="-6" align="R">
            <aggregate class="dtv.pos.customer.loyalty.LoyaltyAccountEscrowPointsDocBuilderField" />
          </field>
        </row>
        <row>
          <condition method="getProformaTransactionEarnedPoints" comparison="NOT_NULL" />
          <field text="_loyaltyPointsEarnedToday" loc="4" />
          <sp />
          <field method="getProformaTransactionEarnedPoints" formatter="QUANTITY" loc="-6" align="R" />
        </row>
        <row>
          <field text="_rcptCrmEarnedPoints" loc="4" />
          <field formatter="QUANTITY" loc="-6" align="R">
            <aggregate class="dtv.pos.customer.loyalty.LoyaltyAccountEarnedPointsDocBuilderField" />
          </field>
        </row>
      </call>
    </section>

    <section name="LOYALTY_HISTORY_INQUIRY">
      <sectionref>logo</sectionref>
      <row n="2" />
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
      <sectionref>LOYALTY_HISTORY_CUSTOMER</sectionref>
      <sectionref>LoyaltyInformationBanner</sectionref>
      <sectionref>CUSTOMER_LOYALTY_ACCOUNTS</sectionref>
      <sectionref>loyaltyHistoryFooter</sectionref>
      <sectionref>page_break</sectionref>
    </section>

    <section name="loyaltyHistoryFooter">
      <row />
      <region align="C">
        <field text="_loyaltyHistoryReceiptFooter" />
      </region>
      <row />
    </section>

    <section name="CUSTOMER_LOYALTY_ACCOUNTS">
      <condition method="getLoyaltyCards" comparison="NOT_NULL" />
      <row />
      <row style="STRONGUNDERLINE">
        <field text="_loyaltyHistoryRcptLoyaltyAccount" />
      </row>
      <iterator method="getLoyaltyCards">
        <sectionref>LOYALTY_CARD_LOYALTY_ACCOUNTS</sectionref>
      </iterator>
    </section>

    <section name="LOYALTY_CARD_LOYALTY_ACCOUNTS">
      <condition method="getLoyaltyAccounts" comparison="NOT_NULL" />
      <iterator method="getLoyaltyAccounts">
        <sectionref>loyaltyAccountDetail</sectionref>
      </iterator>
    </section>

    <section name="loyaltyAccountDetail">
      <row>
        <field text="_loyaltyHistoryRcptLoyaltyCardNumber" loc="4" />
        <sp />
        <field method="getCardNumber" formatter="CREDITCARD" />
      </row>
      <row>
        <condition method="getLoyaltyProgramName" comparison="NOT_NULL" />
        <field text="_loyaltyHistoryRcptLoyaltyProgramName" loc="4" />
        <sp />
        <field method="getLoyaltyProgramName" />
      </row>
      <row>
        <condition method="getLoyaltyProgramLevelName" comparison="NOT_NULL" />
        <field text="_loyaltyHistoryRcptLoyaltyProgramLevel" loc="4" />
        <sp />
        <field method="getLoyaltyProgramLevelName" />
      </row>
      <row>
        <condition method="getEscrowBalance" comparison="NOT_NULL" />
        <field text="_loyaltyHistoryRcptLoyaltyEscrowPoints" loc="4" />
        <field method="getEscrowBalance" formatter="QUANTITY" loc="-6" />
      </row>
      <row>
        <condition method="getAccountBalance" comparison="NOT_NULL" />
        <field text="_loyaltyHistoryRcptLoyaltyEarnedPoints" loc="4" />
        <field method="getAccountBalance" formatter="QUANTITY" loc="-6" />
      </row>
      <row />
    </section>

    <section name="LoyaltyInformationBanner">
      <row />
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <row align="C">
        <field text="_rcptCrmPrintLoyaltyInfoHeading" />
      </row>
      <row align="C">
        <field text="********************************************" style="BOLD" />
      </row>
      <row />
    </section>

    <section name="LOYALTY_HISTORY_CUSTOMER">
      <row>
        <field text="_rcptCustomerLabel" />
        <sp />
        <field method="getCustomer" formatter="BasicName" />
      </row>
      <row>
        <condition method="getCustomer.getOrganizationName" comparison="NOT_NULL" />
        <field text="_rcptCompanyLabel" />
        <sp />
        <field method="getCustomer.getOrganizationName" />
      </row>
    </section>

    <section name="registry_info">
      <row>
        <condition method="getStringProperty" method_param="GIFT_REGISTRY_NAME" comparison="NOT_BLANK" />
        <field text="_giftRegistryIdReceipt" />
        <field method="getStringProperty" method_param="GIFT_REGISTRY_NAME" />
      </row>
      <row>
        <condition method="getStringProperty" method_param="GIFT_REGISTRY_OWNER" comparison="NOT_BLANK" />
        <field text="_giftRegistryOwnerReceipt" />
        <field method="getStringProperty" method_param="GIFT_REGISTRY_OWNER" />
      </row>
    </section>

    <section name="transaction_flight_staff_information">
      <condition method="getStringProperty" method_param="AIRPORT_CUSTOMER_TYPE" comparison="EQUAL" value="Staff" />
      <row />
      <row>
        <field text="_rcptFlightStaffId" />
        <sp />
        <field method="getStringProperty" method_param="AIRPORT_STAFF_IDENTIFICATION" />
      </row>
      <row>
        <field text="_rcptFlightStaffType" />
        <sp />
        <field>
          <aggregate class="dtv.pos.flight.rcpt.StaffTypeDocBuilder" />
        </field>
      </row>
    </section>

    <section name="transaction_flight_arrivals">
      <condition method="getStringProperty" method_param="AIRPORT_CUSTOMER_TYPE" comparison="EQUAL" value="Arrivals" />
      <row />
      <row>
        <!-- <field method="getStringProperty" method_param="AIRPORT_CUSTOMER_TYPE" /> -->
        <field text="_rcptFlightArrivals" />
      </row>
    </section>

    <section name="transaction_flight_information_flight">
      <condition method="getFlightInformation" comparison="NOT_NULL" />
      <call method="getFlightInformation">
        <row />
        <sectionref>transaction_flight_information_flight_NO_TAX</sectionref>
        <sectionref>transaction_flight_information_flight_TAX</sectionref>
        <row>
          <field>
            <aggregate class="dtv.pos.flight.rcpt.RcptAirportTaxTypeDocBuilderField" />
          </field>
        </row>
      </call>
    </section>

    <section name="transaction_flight_information_flight_NO_TAX">
      <condition method="getTaxCalculationMode" comparison="EQUAL" value="TAX_FREE"/>
      <row>
        <field text="_flightCode" />
        <sp />
        <field method="getFlightNumber" />
      </row>
      <row>
        <field text="_rcptFlightOriginAirport" />
        <sp />
        <field method="getOriginAirport" />
      </row>
      <row>
        <field text="_rcptDestination" />
        <sp />
        <field method="getDestinationAirport" />
      </row>
    </section>
    <section name="transaction_flight_information_flight_TAX">
      <condition method="getTaxCalculationMode" comparison="NOT_EQUAL" value="TAX_FREE"/>
      <row>
        <field text="_flightCode" />
        <sp />
        <field method="getFirstFlightNumber" />
      </row>
      <row>
        <field text="_rcptFlightOriginAirport" />
        <sp />
        <field method="getFirstOriginAirport" />
      </row>
      <row>
        <field text="_rcptDestination" />
        <sp />
        <field method="getFirstDestinationAirport" />
      </row>
    </section>

    <section name="transaction_flight_information">
      <sectionref>transaction_flight_arrivals</sectionref>
      <sectionref>transaction_flight_staff_information</sectionref>
      <sectionref>transaction_flight_information_flight</sectionref>
      <row />
    </section>

    <!-- **************************** -->
    <!-- Database-driven receipt data -->
    <!-- **************************** -->
    <section name="CUST_COPY_HEADER_DB" dbRef="CUSTOMER_COPY_HEADER::DEFAULT::getTransactionDate">
      <row />
    </section>
    <section name="CUST_COPY_FOOTER_DB" dbRef="CUSTOMER_COPY_FOOTER::DEFAULT::getTransactionDate">
      <row />
    </section>
    <section name="STORE_COPY_HEADER_DB" dbRef="STORE_COPY_HEADER::DEFAULT::getTransactionDate">
      <row />
    </section>
    <section name="STORE_COPY_FOOTER_DB" dbRef="STORE_COPY_FOOTER::DEFAULT::getTransactionDate">
      <row />
    </section>
    <section name="HOUSE_ACCOUNT_TERMS_DB" dbRef="HOUSE_ACCOUNT_TERMS::DEFAULT::getTransactionDate" />
    <section name="SALE_DISCLAIMER_DB" dbRef="SALE_DISCLAIMER::DEFAULT::getTransactionDate">
      <row />
    </section>
    <section name="TAX_EXEMPTION_DISCLAIMER_DB" dbRef="TAX_EXEMPTION_DISCLAIMER::DEFAULT::getBusinessDate" />
    <section name="TENDER_CREDIT_TERMS_DB" dbRef="TENDER_CREDIT_TERMS::DEFAULT::getTransactionDate">
      <row />
    </section>
    <section name="REBATE_HEADER_DB" dbRef="REBATE_HEADER::DEFAULT::getTransactionDate" />
    <section name="REBATE_FOOTER_DB" dbRef="REBATE_FOOTER::DEFAULT::getTransactionDate" />
    <section name="BOUNCE_BACK_2_DB" dbRef="BOUNCE_BACK_2::DEFAULT::getTransactionDate" />
    <section name="BOUNCE_BACK_3_DB" dbRef="BOUNCE_BACK_3::DEFAULT::getTransactionDate" />
    <section name="BOUNCE_BACK_4_DB" dbRef="BOUNCE_BACK_4::DEFAULT::getTransactionDate" />
    <section name="BOUNCE_BACK_5_DB" dbRef="BOUNCE_BACK_5::DEFAULT::getTransactionDate" />
    <section name="BOUNCE_BACK_6_DB" dbRef="BOUNCE_BACK_6::DEFAULT::getTransactionDate" />
    <section name="GIFT_CERTIFICATE_HEADER_DB" dbRef="GIFT_CERTIFICATE_HEADER::DEFAULT::getTransactionDate">
      <row />
    </section>
    <section name="GIFT_CERTIFICATE_FOOTER_DB" dbRef="GIFT_CERTIFICATE_FOOTER::DEFAULT::getTransactionDate" />
    <section name="LAYAWAY_HEADER_DB" dbRef="LAYAWAY_HEADER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="LAYAWAY_FOOTER_DB" dbRef="LAYAWAY_FOOTER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="LAYAWAY_MERCH_TICKET_HEADER_DB" dbRef="LAYAWAY_MERCH_TICKET_HEADER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="LAYAWAY_MERCH_TICKET_FOOTER_DB" dbRef="LAYAWAY_MERCH_TICKET_FOOTER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="LAYAWAY_TERMS_DB" dbRef="LAYAWAY_TERMS::DEFAULT::getCurrentTransaction.getTransactionDate" />
    <section name="SPECIAL_ORDER_HEADER_DB" dbRef="SPECIAL_ORDER_HEADER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="SPECIAL_ORDER_FOOTER_DB" dbRef="SPECIAL_ORDER_FOOTER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="SPECIAL_ORDER_TERMS_DB" dbRef="SPECIAL_ORDER_TERMS::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="WORK_ORDER_HEADER_DB" dbRef="WORK_ORDER_HEADER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="WORK_ORDER_FOOTER_DB" dbRef="WORK_ORDER_FOOTER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="WORK_ORDER_MERCH_TICKET_HEADER_DB" dbRef="WORK_ORDER_MERCH_TICKET_HEADER::DEFAULT::getWorkOrderAccount.getAccountSetupDate" />
    <section name="WORK_ORDER_MERCH_TICKET_FOOTER_DB" dbRef="WORK_ORDER_MERCH_TICKET_FOOTER::DEFAULT::getWorkOrderAccount.getAccountSetupDate" />
    <section name="WORK_ORDER_TERMS_DB" dbRef="WORK_ORDER_TERMS::DEFAULT::getCurrentTransaction.getTransactionDate" />
    <section name="SEND_SALE_HEADER_DB" dbRef="SEND_SALE_HEADER::DEFAULT::getCurrentTransaction.getTransactionDate" />
    <section name="SEND_SALE_FOOTER_DB" dbRef="SEND_SALE_FOOTER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="SEND_SALE_MERCH_TICKET_HEADER_DB" dbRef="SEND_SALE_MERCH_TICKET_HEADER::DEFAULT::getCurrentTransaction.getTransactionDate" />
    <section name="SEND_SALE_MERCH_TICKET_FOOTER_DB" dbRef="SEND_SALE_MERCH_TICKET_FOOTER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="SEND_SALE_TERMS_DB" dbRef="SEND_SALE_TERMS::DEFAULT::getCurrentTransaction.getTransactionDate" />
    <section name="CONFIGURABLE_CUST_ACCT_HEADER_DB" dbRef="CONFIGURABLE_CUST_ACCT_HEADER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="CONFIGURABLE_CUST_ACCT_FOOTER_DB" dbRef="CONFIGURABLE_CUST_ACCT_FOOTER::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="CONFIGURABLE_CUST_ACCT_TERMS_DB" dbRef="CONFIGURABLE_CUST_ACCT_TERMS::DEFAULT::getCurrentTransaction.getTransactionDate">
      <row />
    </section>
    <section name="RAIN_CHECK_TERMS_DB" dbRef="RAIN_CHECK_TERMS::DEFAULT::getTransactionDate" />

    <!-- ********************************** -->
    <!-- Cut points for fiscalization layer -->
    <!-- ********************************** -->
    <section name="LOCAL.CUST_COPY_FOOTER"></section>
    <section name="LOCAL.HEADER_TOP"></section>
    <section name="LOCAL.NONVOIDED_ITEM"></section>
    <section name="LOCAL.VOUCHER_HEADER"></section>
    <section name="LOCAL.POSTVOID_HEADER"></section>
    <section name="LOCAL.POSTVOID_FOOTER"></section>
    <section name="LOCAL.CUSTOMER_INFO"></section>
    <section name="LOCAL.NON_FISCAL"></section>
    <section name="LOCAL.ITEMS_COUNT"></section>

    <!-- ********************************** -->
    <!-- Rcptconfig.xml injection entries for fiscal printer integration -->
    <!-- ********************************** -->
    <section name="FISCAL.DISCOUNT_DESCRIPTION">
      <sectionref>fiscal_item_amount_discount</sectionref>
      <sectionref>fiscal_item_percent_discount</sectionref>
      <sectionref>fiscal_item_deal</sectionref>
      <sectionref>fiscal_competitive_discount_percent</sectionref>
      <sectionref>fiscal_competitive_discount_amount</sectionref>
      <sectionref>fiscal_manufac_coupon</sectionref>
    </section>
    <section name="fiscal_item_amount_discount">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="ANY_AMOUNT_DISCOUNT" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
      </row>
    </section>
    <section name="fiscal_item_percent_discount">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="ANY_PERCENT_DISCOUNT" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
        <sp />
        <field text="_openBracket" />
        <field method="getPercentForRcpt" formatter="Percent" />
        <field text="_closeBracket" />
      </row>
    </section>
    <section name="fiscal_item_deal">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="DEAL" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
      </row>
    </section>
    <section name="fiscal_competitive_discount_percent">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="PROMPT_COMP_PRICE_PERCENT" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
      </row>
    </section>
    <section name="fiscal_competitive_discount_amount">
      <condition class="dtv.pos.docbuilding.conditions.PriceModifierTypeCondition" value="PROMPT_COMP_PRICE_AMOUNT" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
      </row>
    </section>
    <section name="fiscal_manufac_coupon">
      <condition method="getRetailPriceModifierReasonCode" comparison="EQUAL" value="MANUFACTURER_COUPON" />
      <row>
        <field method="getDisplayDescription" formatter="ShortDescription" />
      </row>
    </section>
    <section name="FISCAL.LINE_ITEM_DESCRIPTION">
      <row>
        <field method="getItem.getItemId" />
      </row>
    </section>
    <section name="FISCAL.TENDER_DESCRIPTION">
      <row>
        <field method="getTender.getDescription" />
      </row>
    </section>
    <section name="FISCAL.LINE_ITEM_PRE">
      <row/>
      <row>
        <field method="getItemDescription" />
      </row>
    </section>
    <section name="FISCAL.LINE_ITEM_SKIP_DISC_PRE">
      <condition method="getQuantity.abs" comparison="NOT_EQUAL">
        <Parameter name="VALUE">
          <param_value dtype="BigDecimal">1</param_value>
        </Parameter>
      </condition>
      <row>
        <field method="getQuantity" formatter="Quantity" loc="4" />
        <field text=" X " />
        <field method="getUnitPrice" formatter="Money" />
      </row>
    </section>
    <section name="FISCAL.LINE_ITEM_POST">
    </section>    
    <section name="FISCAL.ROUNDING_INFO">
      <condition class="dtv.pos.tender.rounding.RoundedAmountCondition" />
      <row>
        <condition method="getTotal" comparison="GREATER_THAN_ZERO" />
        <field text="_rounding" />
        <field method="getRoundedAmount" formatter="Money" align="R" />
      </row>
      <row>
        <condition method="getTotal" comparison="LESS_THAN_ZERO" />
        <field text="_rounding" />
        <field method="getRoundedAmount.negate" formatter="Money" align="R" />
      </row>
    </section>
    <section name="FISCAL.TRANS_FOOTER">  
      <horizontal_rule style="Double" />
      <sectionref>transaction_header_info</sectionref>
      <sectionref>SALES_PERSON_INFO</sectionref>
      <sectionref>transaction_cashier</sectionref>
      <sectionref>CUSTOMER_INFO</sectionref>
      <horizontal_rule style="Double" />
      <row></row>
      <sectionref>CUST_COPY_FOOTER_DB</sectionref>
      <horizontal_rule style="Double" />
    </section>
    <section name="FISCAL.SET_RECEIPT_HEADER">
        <row align="C">
          <field method="getStoreName" />
        </row>
        <region left_margin="1" alignment="C">
          <field method="." formatter="BasicAddress" />
        </region>
        <row align="C">
          <condition method="getTelephone1" comparison="NOT_BLANK" />
          <field method="getTelephone1" formatter="Phone" />
        </row>
    </section>

    <!-- PORTUGAL CHANGES START -->

    <!-- If a LOCAL.*HEADER* section is used this section should not explicitely be called -->
    <!-- i.e. the HEADER section should take care of printing the non-fiscal statement -->
    <section name="COUNTRYPACK.NON_FISCAL_STATEMENT" />

    <section name="COUNTRYPACK.SUSPEND_NONFISCAL">
      <condition class="dtv.pos.docbuilding.conditions.TransactionSuspendedCondition" />
      <sectionref>COUNTRYPACK.NON_FISCAL_STATEMENT</sectionref>
    </section>
    <!-- PORTUGAL CHANGES END -->
  </sections>
</ReceiptDefinitions>
